
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="Documentation for use of EdgeX Foundry" name="description"/>
<meta content="Michael Johanson" name="author"/>
<link href="https://docs.edgexfoundry.org/3.1/design/adr/0023-North-South-Messaging/" rel="canonical"/>
<link href="../../../assets/logo_edgex.png" rel="icon"/>
<meta content="mkdocs-1.4.3, mkdocs-material-8.5.8" name="generator"/>
<title>North-South Messaging - EdgeX Foundry Documentation</title>
<link href="../../../assets/stylesheets/main.20d9efc8.min.css" rel="stylesheet"/>
<link href="../../../assets/stylesheets/palette.815d1a91.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../../../assets/stylesheets/version-select.css" rel="stylesheet"/>
<link href="../../../assets/stylesheets/branding.css" rel="stylesheet"/>
<link href="../../../assets/stylesheets/edgey.css" rel="stylesheet"/>
<link href="../../../assets/stylesheets/newexample.css" rel="stylesheet"/>
<script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-38531ZZHBN"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-38531ZZHBN",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-38531ZZHBN",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
<script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
</head>
<body data-md-color-accent="none" data-md-color-primary="none" data-md-color-scheme="" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#north-south-messaging">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="EdgeX Foundry Documentation" class="md-header__button md-logo" data-md-component="logo" href="../../.." title="EdgeX Foundry Documentation">
<img alt="logo" src="../../../assets/logo_edgex_white.png"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            EdgeX Foundry Documentation
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              North-South Messaging
            
          </span>
</div>
</div>
</div>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/edgexfoundry/edgex-go" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    edgex/edgex-go
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<nav aria-label="Tabs" class="md-tabs" data-md-component="tabs">
<div class="md-tabs__inner md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../..">
        Introduction
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../getting-started/">
        Getting Started
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../security/Ch-Security/">
        Security
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../microservices/general/">
        Microservices
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../examples/">
        Examples and Tutorials
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../api/Ch-APIIntroduction/">
        API Reference
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../Process/">
        Use Cases &amp; Designs
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../general/Definitions/">
        Reference
      </a>
</li>
</ul>
</div>
</nav>
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="EdgeX Foundry Documentation" class="md-nav__button md-logo" data-md-component="logo" href="../../.." title="EdgeX Foundry Documentation">
<img alt="logo" src="../../../assets/logo_edgex_white.png"/>
</a>
    EdgeX Foundry Documentation
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/edgexfoundry/edgex-go" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    edgex/edgex-go
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" id="__nav_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_1">
          Introduction
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Introduction" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_1">
<span class="md-nav__icon md-icon"></span>
          Introduction
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../..">
        Introduction
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../V3TopLevelMigration/">
        V3 Migration Guide
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2">
          Getting Started
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Getting Started" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
          Getting Started
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../getting-started/">
        Getting Started
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../getting-started/quick-start/">
        Quick Start
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3" id="__nav_2_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_3">
          Users
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Users" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_3">
<span class="md-nav__icon md-icon"></span>
          Users
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../getting-started/Ch-GettingStartedUsers/">
        Getting Started as a User
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../getting-started/Ch-GettingStartedDockerUsers/">
        Getting Started using Docker
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../getting-started/Ch-GettingStartedSnapUsers/">
        Getting Started using Snaps
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_4" id="__nav_2_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_4">
          Developers
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Developers" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_4">
<span class="md-nav__icon md-icon"></span>
          Developers
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../getting-started/Ch-GettingStartedDevelopers/">
        Getting Started as a Developer
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../getting-started/Ch-GettingStartedGoDevelopers/">
        Getting Started - Go Developers
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../getting-started/Ch-GettingStartedCDevelopers/">
        Getting Started - C Developers
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../getting-started/Ch-GettingStartedHybrid/">
        Working in a Hybrid Environment
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_4_5" id="__nav_2_4_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_4_5">
          Native Build and Run Guides
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Native Build and Run Guides" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_4_5">
<span class="md-nav__icon md-icon"></span>
          Native Build and Run Guides
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../getting-started/native/Ch-BuildRunNative/">
        Native Build and Run
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../getting-started/native/Ch-BuildRunOnLinuxDistro/">
        Build and Run on Linux on x86/x64
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../getting-started/native/Ch-BuildRunOnArm32/">
        Build and Run on Linux on ARM 32
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../getting-started/native/Ch-BuildRunOnWindows/">
        Build and Run on Windows on x86/x64
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../getting-started/ApplicationFunctionsSDK/">
        Application Functions SDK
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_4_7" id="__nav_2_4_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_4_7">
          Device Services
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Device Services" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_4_7">
<span class="md-nav__icon md-icon"></span>
          Device Services
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../getting-started/Ch-GettingStartedSDK/">
        Device Service SDK
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../getting-started/Ch-GettingStartedSDK-C/">
        C SDK
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../getting-started/Ch-GettingStartedSDK-Go/">
        Golang SDK
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../getting-started/Ch-GettingStartedUsersNexus/">
        Getting Docker Images from EdgeX Nexus Repository
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../getting-started/Ch-GettingStartedDTOValidation/">
        DTO Validation
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_5" id="__nav_2_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_5">
          Tools
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Tools" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_5">
<span class="md-nav__icon md-icon"></span>
          Tools
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../getting-started/tools/Ch-GUI/">
        Graphical User Interface (GUI)
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3">
          Security
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Security" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
          Security
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../security/Ch-Security/">
        Security
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../security/Ch-SecretStore/">
        Secret Store
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../security/Ch-Authenticating/">
        Authenticating to EdgeX Microservices
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../security/Ch-SecretProviderApi/">
        Secret Provider API
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../security/Ch-APIGateway/">
        API Gateway
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../security/Ch-Secure-MessageBus/">
        Secure MessageBus
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../security/Ch-Configuring-Add-On-Services/">
        Configuring Add-on Service
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../security/Ch-Secure-Consul/">
        Secure Consul
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../security/Ch-SecurityIssues/">
        Reporting Security Issues
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../security/secrets-config/">
        Secrets config
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../security/secrets-config-proxy/">
        Secrets config proxy
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../security/SeedingServiceSecrets/">
        Seeding Service Secrets
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../security/Ch-CORS-Settings/">
        CORS settings
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../security/Ch-DelayedStartServices/">
        Delayed-Start Services
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../security/Ch-RemoteDeviceServices/">
        Remote Device Services in Secure Mode
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_16" id="__nav_3_16" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_16">
          Threat Models
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Threat Models" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_16">
<span class="md-nav__icon md-icon"></span>
          Threat Models
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../threat-models/secret-store/">
        EdgeX Foundry Secret Management Threat Model
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../threat-models/stride-model/EdgeX-STRIDE/">
        EdgeX Foundry STRIDE Threat Model
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../threat-models/stride-model/EdgeXFoundryThreatReportV2.2/">
        Threat Modeling Report
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../security/V3Migration/">
        V3 Security Migration Guide
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4">
          Microservices
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Microservices" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
          Microservices
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/general/">
        Cross Cutting Concerns
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2" id="__nav_4_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_2">
          Configuration &amp; Registry
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Configuration &amp; Registry" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_2">
<span class="md-nav__icon md-icon"></span>
          Configuration &amp; Registry
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/configuration/CommonConfiguration/">
        Service Configuration
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/configuration/CommonCommandLineOptions/">
        Command Line Options
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/configuration/CommonEnvironmentVariables/">
        Environment Variables
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/configuration/ConfigurationAndRegistry/">
        Configuration and Registry Providers
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/configuration/V3MigrationCommonConfig/">
        V3 Migration of Common Configuration
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/general/messagebus/">
        EdgeX MessageBus
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_4" id="__nav_4_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_4">
          Core Services
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Core Services" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_4">
<span class="md-nav__icon md-icon"></span>
          Core Services
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/core/Ch-CoreServices/">
        Core Services
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/core/data/Ch-CoreData/">
        Core Data
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/core/metadata/Ch-Metadata/">
        Core Metadata
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/core/command/Ch-Command/">
        Core Command
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/core/database/Ch-Redis/">
        Redis Database
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_5" id="__nav_4_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_5">
          Supporting Services
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Supporting Services" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_5">
<span class="md-nav__icon md-icon"></span>
          Supporting Services
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/support/Ch-SupportingServices/">
        Supporting Services Microservices
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/support/notifications/Ch-AlertsNotifications/">
        Support Notifications
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/support/scheduler/Ch-Scheduler/">
        Support Scheduler
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/support/eKuiper/Ch-eKuiper/">
        eKuiper Rules Engine
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_6" id="__nav_4_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_6">
          Devices Services
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Devices Services" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_6">
<span class="md-nav__icon md-icon"></span>
          Devices Services
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/device/Ch-DeviceServices/">
        Device Services Microservices
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/device/profile/Ch-DeviceProfile/">
        Device Profile
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/device/sdk/Ch-DeviceSDK/">
        Device Services SDK
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_6_4" id="__nav_4_6_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_6_4">
          Device SDK API
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Device SDK API" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_4_6_4">
<span class="md-nav__icon md-icon"></span>
          Device SDK API
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/device/sdk/SDK-Go-API/">
        Go Device SDK API
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_6_5" id="__nav_4_6_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_6_5">
          Supported Device Services
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Supported Device Services" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_4_6_5">
<span class="md-nav__icon md-icon"></span>
          Supported Device Services
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/device/Ch-DeviceServiceList/">
        Supported Device Services List
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_6_5_2" id="__nav_4_6_5_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_6_5_2">
          Device Onvif Camera
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Device Onvif Camera" class="md-nav" data-md-level="4">
<label class="md-nav__title" for="__nav_4_6_5_2">
<span class="md-nav__icon md-icon"></span>
          Device Onvif Camera
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/device/supported/device-onvif-camera/General/">
        General
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_6_5_2_2" id="__nav_4_6_5_2_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_6_5_2_2">
          Walkthrough
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Walkthrough" class="md-nav" data-md-level="5">
<label class="md-nav__title" for="__nav_4_6_5_2_2">
<span class="md-nav__icon md-icon"></span>
          Walkthrough
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/device/supported/device-onvif-camera/Walkthrough/setup/">
        Setup
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/device/supported/device-onvif-camera/Walkthrough/deployment/">
        Deployment
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/device/supported/device-onvif-camera/Walkthrough/general-usage/">
        General Usage
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/device/supported/device-onvif-camera/Walkthrough/custom-build/">
        Custom Build
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/device/supported/device-onvif-camera/swagger/">
        Device ONVIF Swagger API Documentation
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_6_5_2_4" id="__nav_4_6_5_2_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_6_5_2_4">
          Supplementary Information
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Supplementary Information" class="md-nav" data-md-level="5">
<label class="md-nav__title" for="__nav_4_6_5_2_4">
<span class="md-nav__icon md-icon"></span>
          Supplementary Information
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_6_5_2_4_1" id="__nav_4_6_5_2_4_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_6_5_2_4_1">
          ONVIF Protocol
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="ONVIF Protocol" class="md-nav" data-md-level="6">
<label class="md-nav__title" for="__nav_4_6_5_2_4_1">
<span class="md-nav__icon md-icon"></span>
          ONVIF Protocol
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/device/supported/device-onvif-camera/supplementary-info/ONVIF-protocol/">
        Onvif Camera Device Service Specifications
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/device/supported/device-onvif-camera/supplementary-info/onvif-user-authentication/">
        Onvif User Authentication
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_6_5_2_4_2" id="__nav_4_6_5_2_4_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_6_5_2_4_2">
          Features
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Features" class="md-nav" data-md-level="6">
<label class="md-nav__title" for="__nav_4_6_5_2_4_2">
<span class="md-nav__icon md-icon"></span>
          Features
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/device/supported/device-onvif-camera/supplementary-info/custom-metadata-feature/">
        Custom Metadata
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/device/supported/device-onvif-camera/supplementary-info/friendlyname-mac/">
        Friendly Name and MAC Address
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/device/supported/device-onvif-camera/supplementary-info/device-status/">
        Device Status
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/device/supported/device-onvif-camera/supplementary-info/auto-discovery/">
        Auto Discovery
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/device/supported/device-onvif-camera/supplementary-info/credentials/">
        Credentials
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/device/supported/device-onvif-camera/supplementary-info/reboot-needed/">
        RebootNeeded
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_6_5_2_4_3" id="__nav_4_6_5_2_4_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_6_5_2_4_3">
          API Reference
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="API Reference" class="md-nav" data-md-level="6">
<label class="md-nav__title" for="__nav_4_6_5_2_4_3">
<span class="md-nav__icon md-icon"></span>
          API Reference
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/device/supported/device-onvif-camera/supplementary-info/api-analytic-support/">
        Analytic Support
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/device/supported/device-onvif-camera/supplementary-info/api-event-handling/">
        Event Handling
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/device/supported/device-onvif-camera/supplementary-info/api-usage-user-handling/">
        User Handling
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_6_5_2_4_4" id="__nav_4_6_5_2_4_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_6_5_2_4_4">
          Utility
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Utility" class="md-nav" data-md-level="6">
<label class="md-nav__title" for="__nav_4_6_5_2_4_4">
<span class="md-nav__icon md-icon"></span>
          Utility
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/device/supported/device-onvif-camera/supplementary-info/test-with-postman/">
        Test with Postman
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/device/supported/device-onvif-camera/supplementary-info/utility-scripts/">
        Utility Scripts
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_6_5_2_4_5" id="__nav_4_6_5_2_4_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_6_5_2_4_5">
          Miscellaneous
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Miscellaneous" class="md-nav" data-md-level="6">
<label class="md-nav__title" for="__nav_4_6_5_2_4_5">
<span class="md-nav__icon md-icon"></span>
          Miscellaneous
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/device/supported/device-onvif-camera/supplementary-info/control-plane-events/">
        Control Plane Events
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/device/supported/device-onvif-camera/supplementary-info/getting-started-with-docker-security/">
        Getting Started With Docker (Security Mode)
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/device/supported/device-onvif-camera/supplementary-info/ws-discovery/">
        How does WS-Discovery work?
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/device/supported/device-onvif-camera/supplementary-info/onvif-footnotes/">
        ONVIF Footnotes
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_6_5_3" id="__nav_4_6_5_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_6_5_3">
          Device USB Camera
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Device USB Camera" class="md-nav" data-md-level="4">
<label class="md-nav__title" for="__nav_4_6_5_3">
<span class="md-nav__icon md-icon"></span>
          Device USB Camera
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/device/supported/device-usb-camera/General/">
        General
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_6_5_3_2" id="__nav_4_6_5_3_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_6_5_3_2">
          Walkthrough
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Walkthrough" class="md-nav" data-md-level="5">
<label class="md-nav__title" for="__nav_4_6_5_3_2">
<span class="md-nav__icon md-icon"></span>
          Walkthrough
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/device/supported/device-usb-camera/walkthrough/setup/">
        Setup
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/device/supported/device-usb-camera/walkthrough/deployment/">
        Deployment
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/device/supported/device-usb-camera/walkthrough/general-usage/">
        General Usage
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/device/supported/device-usb-camera/walkthrough/custom-build/">
        Custom Build
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_6_5_3_3" id="__nav_4_6_5_3_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_6_5_3_3">
          Supplementary Information
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Supplementary Information" class="md-nav" data-md-level="5">
<label class="md-nav__title" for="__nav_4_6_5_3_3">
<span class="md-nav__icon md-icon"></span>
          Supplementary Information
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/device/supported/device-usb-camera/supplementary-info/USB-protocol/">
        USB Camera Device Service Specifications
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/device/supported/device-usb-camera/supplementary-info/discovery/">
        Dynamic Discovery
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/device/supported/device-usb-camera/supplementary-info/advanced-options/">
        Advanced Options
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_6_5_4" id="__nav_4_6_5_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_6_5_4">
          Device Virtual
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Device Virtual" class="md-nav" data-md-level="4">
<label class="md-nav__title" for="__nav_4_6_5_4">
<span class="md-nav__icon md-icon"></span>
          Device Virtual
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/device/supported/device-virtual/Ch-VirtualDevice/">
        Device Virtual
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/device/V3Migration/">
        V3 Migration Guide
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_7" id="__nav_4_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_7">
          Application Services
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Application Services" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_7">
<span class="md-nav__icon md-icon"></span>
          Application Services
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/application/ApplicationServices/">
        Introduction
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/application/GettingStarted/">
        Getting Started
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/application/Triggers/">
        Triggers
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_7_4" id="__nav_4_7_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_7_4">
          Application Functions SDK
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Application Functions SDK" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_4_7_4">
<span class="md-nav__icon md-icon"></span>
          Application Functions SDK
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/application/ApplicationFunctionsSDK/">
        App Functions SDK Introduction
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/application/ApplicationServiceAPI/">
        Application Service API
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/application/AppFunctionContextAPI/">
        App Function Context API
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/application/ErrorHandling/">
        Pipeline Function Error Handling
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/application/BuiltIn/">
        Built-In Pipeline Functions
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/application/AdvancedTopics/">
        Advanced Topics
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/application/GeneralAppServiceConfig/">
        Application Service Configuration
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/application/V3Migration/">
        V3 Migration Guide
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_7_7" id="__nav_4_7_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_7_7">
          Available Services
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Available Services" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_4_7_7">
<span class="md-nav__icon md-icon"></span>
          Available Services
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/application/available/AvailableAppServices/">
        Overview
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/application/available/AppServiceConfigurable/">
        App Service Configurable
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/application/available/AppRecordReplay/">
        App Record and Replay
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../microservices/application/available/AppLLRPInventory/">
        App RFID LLRP Inventory
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5">
          Examples and Tutorials
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Examples and Tutorials" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
          Examples and Tutorials
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../examples/">
        EdgeX Examples
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../examples/Ch-ExamplesVirtualDeviceService/">
        Using the Virtual Device Service
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../examples/Ch-ExamplesSendingAndConsumingBinary/">
        Sending and Consuming Binary Data From EdgeX Device Services
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_4" id="__nav_5_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_4">
          App Service Examples
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="App Service Examples" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_4">
<span class="md-nav__icon md-icon"></span>
          App Service Examples
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../examples/AppServiceExamples/">
        App Service Examples
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../examples/app-service-examples/camera-management/Ch-CameraManagement/">
        Camera Management Example App Service
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../examples/Ch-CommandingDeviceThroughRulesEngine/">
        Command Devices with eKuiper Rules Engine
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../examples/Ch-ExamplesModbusdatatypeconversion/">
        Modbus - Data Type Conversion
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../examples/Ch-OSImageWithEdgeX/">
        Creating an EdgeX Ubuntu Core Image
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_8" id="__nav_5_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_8">
          Adding a Device
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Adding a Device" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_8">
<span class="md-nav__icon md-icon"></span>
          Adding a Device
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../examples/Ch-ExamplesAddingModbusDevice/">
        Modbus
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../examples/Ch-ExamplesAddingSNMPDevice/">
        SNMP
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../examples/Ch-ExamplesAddingMQTTDevice/">
        MQTT
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_9" id="__nav_5_9" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_9">
          Walkthrough
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Walkthrough" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_9">
<span class="md-nav__icon md-icon"></span>
          Walkthrough
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../walk-through/Ch-Walkthrough/">
        EdgeX Demonstration API Walk Through
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../walk-through/Ch-WalkthroughSetup/">
        Setup up your environment
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../walk-through/Ch-WalkthroughUseCase/">
        Example Use Case
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../walk-through/Ch-WalkthroughDeviceProfile/">
        Defining your device
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../walk-through/Ch-WalkthroughDeviceService/">
        Register your device service
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../walk-through/Ch-WalkthroughProvision/">
        Provision a device
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../walk-through/Ch-WalkthroughCommands/">
        Calling commands
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../walk-through/Ch-WalkthroughReading/">
        Sending events and reading data
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../walk-through/Ch-WalkthroughExporting/">
        Exporting your device data
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6">
          API Reference
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="API Reference" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
          API Reference
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../api/Ch-APIIntroduction/">
        Introduction
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../api/core/Ch-APICoreCommand/">
        Core Command
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../api/core/Ch-APICoreData/">
        Core Data
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../api/core/Ch-APICoreMetadata/">
        Core Metadata
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../api/core/Ch-APICoreConfigurationAndRegistry/">
        Configuration and Registry
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../api/support/Ch-APISupportNotifications/">
        Support Notifications
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../api/support/Ch-APISupportScheduler/">
        Support Scheduler
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../api/devices/Ch-APIDeviceSDK/">
        Device Services
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../api/applications/Ch-APIAppFunctionsSDK/">
        Application Services
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../api/applications/Ch-APIRulesEngine/">
        Rules Engine
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" id="__nav_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_7">
          Use Cases &amp; Designs
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Use Cases &amp; Designs" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
          Use Cases &amp; Designs
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../Process/">
        Use Cases and Design Process
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../TOC/">
        Use Cases and Design Records
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_3" id="__nav_7_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_7_3">
          Legacy
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Legacy" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_7_3">
<span class="md-nav__icon md-icon"></span>
          Legacy
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../legacy-design/">
        Legacy Design Documents
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../legacy-requirements/">
        Legacy Requirements
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" id="__nav_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_8">
          Reference
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Reference" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_8">
<span class="md-nav__icon md-icon"></span>
          Reference
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../general/Definitions/">
        Definitions
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../general/PlatformRequirements/">
        Platform Requirements
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../general/ServicePorts/">
        Default Service Ports
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../general/ContainerNames/">
        EdgeX Container Names
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../general/ServiceConfiguration/">
        Service Configuration
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../general/EdgeX_CN/">
        Is EdgeX Foundry Cloud Native?
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#status">
    Status
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#context-and-proposed-design">
    Context and Proposed Design
  </a>
<nav aria-label="Context and Proposed Design" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#core-command-as-message-bus-bridge">
    Core Command as Message Bus Bridge
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#message-bus-subscriptions-and-publishing">
    Message Bus Subscriptions and Publishing
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#command-queries-via-command-service">
    Command Queries via Command Service
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#message-structure">
    Message Structure
  </a>
<nav aria-label="Message Structure" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#message-envelope">
    Message Envelope
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#command-message-payload">
    Command Message Payload
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#query-message-payload">
    Query Message Payload
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#topic-naming">
    Topic Naming
  </a>
<nav aria-label="Topic Naming" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#3rd-party-system-topics">
    3rd party system topics
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#command-service-topics">
    command service topics
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#device-service-topics">
    device service topics
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#configuration">
    Configuration
  </a>
<nav aria-label="Configuration" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#command-service-configuration">
    command service configuration
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#device-service-configuration">
    device service configuration
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#edgex-service-internal-message-bus-requests">
    EdgeX Service (Internal) Message Bus Requests
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#questions">
    Questions
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#future-considerations">
    Future Considerations
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#consequences">
    Consequences
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#references">
    References
  </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<a class="md-content__button md-icon" href="https://github.com/edgexfoundry/edgex-go/edit/master/docs/design/adr/0023-North-South-Messaging.md" title="Edit this page">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"></path></svg>
</a>
<h1 id="north-south-messaging">North-South Messaging</h1>
<h2 id="status">Status</h2>
<p><strong>Approved</strong> by TSC Vote on 4/28/22</p>
<h2 id="context-and-proposed-design">Context and Proposed Design</h2>
<p>Today, data flowing from sensors/devices (the southside) through EdgeX to enterprise applications, databases and cloud-based systems (the northside) can be accomplished via REST or Message bus.  That is, sensor or device data collected by a device service can be sent via REST or message bus to core data.  Core data then relays the data to application services via message bus, but the sensor data can also be sent directly from device services to application services via message bus (bypassing core data).  The message bus is implemented via Redis Pub/Sub (default) or via MQTT.  From the application services, data can be sent to northside endpoints in any number of ways  including via MQTT.</p>
<p>So, in summary, data can be collected from a sensor or device and be sent from the southside to the northside entirely using message bus technology when desired.</p>
<p>Today, communications from a 3rd party system (enterprise application, cloud application, etc.) to EdgeX in order to acuate a device or get the latest information from a sensor is accomplished via REST.  The 3rd party system makes a REST call of the command service which then relays a request to a device service also using REST.  There is no built in means to make a message-based request of EdgeX or the devices/sensors it manages.  Note, these REST calls are optionally made via the API Gateway in order to provide access control.</p>
<p>In a future release of EdgeX, there is a desire to allow 3rd party systems to make requests of the southside via message bus.  Specifically, a 3rd party system will send a command request to the command service via external message broker. The command service would then relay the request via message bus to the managing device service via one of the allowed internal message bus implementations (which could be MQTT or Redis Pub/Sub today).  The device service would use the message to trigger action on the device/sensor as it does when it receives a REST request, and respond via message bus back to the command service.  In turn, the command service would relay the response to the 3rd party system via external message bus.</p>
<p>In summary, this ADR proposes that the core command service adds support for an external MQTT connection (in the same manner that app services provide an external MQTT connection), which will allow it to act as a bridge between the internal message bus (implemented via either MQTT or Redis Pub/Sub) and external MQTT message bus.</p>
<p><img alt="image" src="../command-message-bridge.png"/></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For the purposes of this initial north-to-south message bus communications, external 3rd party communications to the command service will be <strong>limited to use of MQTT</strong>.</p>
</div>
<h3 id="core-command-as-message-bus-bridge">Core Command as Message Bus Bridge</h3>
<p>The core command service will serve as the EdgeX entry point for external, north-to-south message bus requests to the south side.</p>
<p><img alt="image" src="../command-msg.png"/></p>
<p>3rd party systems should not be granted access to the EdgeX internal message bus.  Therefore, in order to implement north to south communications via message bus (specifically MQTT), the command service needs to take messages from the 3rd party or external MQTT topics and pass them internally onto the EdgeX internal message bus where they can eventually be routed to the device services and then on to the devices/sensors (southside).</p>
<p>In reverse, response messages from the southside will also be sent through the internal EdgeX message bus to the command service where they can then be bridged to the external MQTT topics and respond to the 3rd party system requester.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note that eKuiper is allowed access directly to the internal EdgeX message bus.  This is a special circumstance of 3rd party external system communication as eKuiper is a sister project that is deemed the EdgeX reference implementation rules engine.  In future releases of EdgeX, even eKuiper may be routed through an external to internal message bus bridge for better decoupling and security.</p>
</div>
<h3 id="message-bus-subscriptions-and-publishing">Message Bus Subscriptions and Publishing</h3>
<p>The command service will require the means to publish messages to device services via the EdgeX message bus (<strong>internal message bus</strong>).  It would use the messaging client (go-mod-messaging) to create a new MessageClient, connect to the message bus, and publish to designated request message topics (see topic configuration below).</p>
<p>The command service will also need to connect to the EdgeX message bus (<strong>internal message bus</strong>) in order to receive responses from the device services after a request by message bus has been made.  Again, core command will use the go-mod-messaging MessageClient to subscribe and receive response messages from the device services.</p>
<p>In a similar fashion, device services will need to both subscribe and publish to the EdgeX message bus (<strong>internal message bus</strong>) to get command requests and push back any responses to the command service.  Go lang device services will, like the command service, use the go-mod-messaging module and MessagingClient to get command requests and send command responses to and from the EdgeX message bus.  C based device services will use a C alternative to subscribe and publish to the EdgeX message bus (<strong>internal message bus</strong>).  Note, device services already use go-mod-messaging when publishing events/readings to the message bus (<strong>internal message bus</strong>).</p>
<p>The command service will also need to subscribe to 3rd party MQTT topics (<strong>external message bus</strong>) in order to get command requests from the 3rd party system.  The command service will then relay command requests on to the appropriate device service via the internal message bus (forming the message bus to message bus bridge).  Likewise, the command service will accept responses from the device services on the EdgeX message bus (<strong>internal message bus</strong>) and then publish responses to the 3rd party system via the 3rd party MQTT topics (<strong>external message bus</strong>).</p>
<h3 id="command-queries-via-command-service">Command Queries via Command Service</h3>
<p>Today, 3rd party systems can make a REST call of core command to get the possible commands that can be executed.  There are two query REST API endpoints:  /device/all (to get the commands for all devices) and device/name/{name} (to get the commands for a specific device by name).</p>
<p>It stands to reason that if a 3rd party system wants to send commands via messaging that they would also want to get an understanding of what commands are available via messaging.  For this reason, the core command service will also allow message requests to get all command or get all commands for a particular device name.  In other words, the core command service must support command "queries" via messaging just as it supports command requests via messaging.</p>
<p>In the case of command queries, the REST responses include the actual REST command endpoints.  For example, the REST query would return core command paths, urls and parameters used to construct REST command requests (as shown in the example below).</p>
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="nt">"coreCommands"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"coolingpoint1"</span><span class="p">,</span>
<span class="w">          </span><span class="nt">"get"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">          </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/api/v2/device/name/testDevice1/command/coolingpoint1"</span><span class="p">,</span>
<span class="w">          </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://localhost:59882"</span><span class="p">,</span>
<span class="w">          </span><span class="nt">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">              </span><span class="nt">"resourceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"resource1"</span><span class="p">,</span>
<span class="w">              </span><span class="nt">"valueType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Int32"</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">          </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w"> </span><span class="p">]</span>
</code></pre></div>
<p>When using messaging to make the "queries" the response message must return information about how to pass a message to the appropriate topic to make the command request.  Therefore, the query response when using messaging would include something like the following:</p>
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="nt">"coreCommands"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"coolingpoint1"</span><span class="p">,</span>
<span class="w">          </span><span class="nt">"topic"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/edgex/command/request/testDevice1/coolingpoint/get"</span><span class="p">,</span>
<span class="w">          </span><span class="nt">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">              </span><span class="nt">"resourceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"resource1"</span><span class="p">,</span>
<span class="w">              </span><span class="nt">"valueType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Int32"</span>
<span class="w">            </span><span class="p">}</span><span class="w">          </span><span class="p">]</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"coolingpoint1"</span><span class="p">,</span>
<span class="w">          </span><span class="nt">"topic"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/edgex/command/request/testDevice1/coolingpoint1/set"</span><span class="p">,</span>
<span class="w">          </span><span class="nt">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">              </span><span class="nt">"resourceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"resource1"</span><span class="p">,</span>
<span class="w">              </span><span class="nt">"valueType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Int32"</span>
<span class="w">            </span><span class="p">}</span><span class="w">          </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w"> </span><span class="p">]</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Per Core WG meeting of 4/7/22 - the JSON above serves as a general example.  The implementation will have to address get/set (or read/write) differentiation, but this is considered an implementation detail to be resolved by the developers.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The query response does not contain a URL since it is assumed that the broker address must already be known in order to make the query.</p>
</div>
<h3 id="message-structure">Message Structure</h3>
<p>In REST based command requests (and responses), the HTTP request line contains important information such as the path or target of the request, and the HTTP method type (indicating a GET or PUT request).  The HTTP status line provides the information such as the response code (ex: 200 for OK).  The body or payload of the HTTP message contains the request details (such as parameters to a device PUT call) or response information (such as events and associated readings from a GET call).  </p>
<p>Since most message bus protocols lack a generic message header mechanism (as in HTTP), providing request/response metadata is accomplished by defining a <code>message</code> envelope object associated with each request/response.  Therefore, messages described in this ADR must provide JSON <code>envelope</code> and <code>payload</code> objects for each request/response.</p>
<p>The message topic names act like the HTTP paths and methods in REST requests.  That is, the topic names specify the device receiver of any command request as paths do in the HTTP requests.</p>
<p><img alt="image" src="../command-msg-structure.png"/></p>
<h4 id="message-envelope">Message Envelope</h4>
<p>The messages defined in this ADR are JSON formatted requests and responses that share a common base structure. The outer most JSON object represents the message <code>envelope</code>, which is used to convey metadata about request/response (e.g. a correlation identifier which will be added to any relayed request message as well as the response message envelope so that the 3rd party system will know to associate the responses to the original request).</p>
<div class="admonition note">
<p class="admonition-title">Note<p>A Correlation ID (see this <a href="https://www.rapid7.com/blog/post/2016/12/23/the-value-of-correlation-ids/">article</a> for a more detailed description) is a unique value that is added to every request and response involved in a transaction which could include multiple requests/responses between one or more microservices. It's not meant to correlate requests to responses, its meant to label every message involved in a potentially multi-request transaction.</p>
<p>A Request ID should be an identifier returned on the response to a request (providing traceability between single request/response).</p>
</p>
</div>
<p>The <code>envelope</code> will also contain the API version (something provided in the HTTP path when using REST).</p>
<p>Command requests in HTTP may also contain ds-pushevent and ds-returnevent query parameters (for GET commands).  These will be optionally provided key/value pairs represented in the message <code>envelope</code>'s query parameters (and optionally allows for other parameters in the future).</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">"Correlation-ID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"14a42ea6-c394-41c3-8bcd-a29b9f5e6835"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"API"</span><span class="p">:</span><span class="s2">"V2"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"queryParams"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"ds-pushevent"</span><span class="p">:</span><span class="s2">"true"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"ds-returnevent"</span><span class="p">:</span><span class="s2">"true"</span><span class="p">,</span>
<span class="w">     </span><span class="p">}</span>
<span class="w">     </span><span class="err">...</span>
<span class="p">}</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As with REST requests, if the ds-returnvent was <code>no</code>, then a message with envelope would be returned but with no payload as there would be no events to return.</p>
</div>
<h4 id="command-message-payload">Command Message Payload</h4>
<p>The <strong>request</strong> message <code>payload</code> to the command service and those relayed to the device service would mimic their HTTP/REST request body alternatives.  The <code>payload</code> provides details needed in executing the command at the south side.</p>
<p>In the example GET and PUT messages below, note the <code>envelope</code> wraps or encases the message <code>payload</code>.  The payload may be empty (as is typical of GET requests).</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">"Correlation-ID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"14a42ea6-c394-41c3-8bcd-a29b9f5e6835"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"apiVersion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"v2"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"requestId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e6e8a2f4-eb14-4649-9e2b-175247911369"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"queryParams"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"ds-pushevent"</span><span class="p">:</span><span class="s2">"true"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"ds-returnevent"</span><span class="p">:</span><span class="s2">"true"</span><span class="p">,</span>
<span class="w">     </span><span class="p">}</span>
<span class="p">}</span>

<span class="p">{</span>
<span class="w">    </span><span class="nt">"Correlation-ID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"14a42ea6-c394-41c3-8bcd-a29b9f5e6835"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"apiVersion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"v2"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"requestId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e6e8a2f4-eb14-4649-9e2b-175247911369"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"payload"</span><span class="p">:</span><span class="w"> </span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"AHU-TargetTemperature"</span><span class="p">:</span><span class="w"> </span><span class="s2">"28.5"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"AHU-TargetBand"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4.0"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"AHU-TargetHumidity"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">"Accuracy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.2-0.3% RH"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"Value"</span><span class="p">:</span><span class="w"> </span><span class="mi">59</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Payload could be empty and therefore optional in the message structure - and exemplified in the top example here.</p>
</div>
<p>The <strong>response</strong> message <code>payload</code> would contain the response from the south side, which is typically EdgeX event/reading objects (in the case of GET requests) but would also include any error message details.</p>
<p>Example response messages for a GET and PUT request are shown below.  Again, note that the message <code>envelope</code> wraps the response <code>payload</code>.</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">"Correlation-ID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"14a42ea6-c394-41c3-8bcd-a29b9f5e6835"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"apiVersion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"v2"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"requestId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e6e8a2f4-eb14-4649-9e2b-175247911369"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"payload"</span><span class="p">:</span><span class="w"> </span>
<span class="w">    </span><span class="p">{</span>
<span class="w">    </span><span class="nt">"event"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"apiVersion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"v2"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3fa85f64-5717-4562-b3fc-2c963f66afa6"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"deviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"profileName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"created"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"origin"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"readings"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="s2">"string"</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">        </span><span class="nt">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">"Gateway-id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HoustonStore-000123"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"Latitude"</span><span class="p">:</span><span class="w"> </span><span class="s2">"29.630771"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"Longitude"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-95.377603"</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="p">{</span>
<span class="w">    </span><span class="nt">"Correlation-ID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"14a42ea6-c394-41c3-8bcd-a29b9f5e6835"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"apiVersion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"v2"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"requestId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e6e8a2f4-eb14-4649-9e2b-175247911369"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"payload"</span><span class="p">:</span><span class="w"> </span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note<p>Get command responses may include CBOR data.  The message envelope (which has a content type indicator) will indicate that the payload is either CBOR or JSON.  The same message envelope content type indicator that is used in REST communications will be used in this message bus communications.</p>
</p>
</div>
<div class="admonition alert">
<p class="admonition-title">Alert</p>
<p>Open discussions per working group meetings and reviews...</p>
<ul>
<li>Should we be validating the messages for version (V2 in this case)?  Per @lenny-intel, do we validate incoming REST requests for the particular version of the APIs?<ul>
<li>Ans (per monthly architect's meeting of 3/28/22): yes we should be validating, but this is not done in REST either.  We should implement validation for this message communications.  We should also add validation in REST communications in the future (Levski release??).  Add this to future planning meeting topics.</li>
</ul>
</li>
<li>Should API version be in the response at all?  Per @iain-anderson, would the API version be implied in that a V2 request would mean a V2 response?<ul>
<li>Ans (per monthly architect's meeting of 3/28/22): the DTO already has API version so it will be in the payload automatically.  Additionally, it was decided to add it to the message envelope.  The reason for this is that when using REST, the path of the request includes the version.  But in message communications which lacks the URL/path, it will be beneficial to also include the version in the envelope (in addition to the payload as part of the DTO) so that it is easily determined from the envelope without having to dig around in the payload.</li>
</ul>
</li>
<li>Per core WG meeting discussion of 2/24/22 - do we really need the request id (is it redundant based on already having correlation id)?<ul>
<li>Ans (per monthly architect's meeting of 3/28/22): request id and correlation id are two different things.  Request id should be returned on the response to a request (providing traceability between single request/response).  Correlation id is used to track across an entire transaction of many service request/responses (providing traceability across a "transaction" which is often across many services).  So both are needed and should be kept.</li>
</ul>
</li>
<li>If we have request id, should it be in the payload?<ul>
<li>Ans (per monthly architect's meeting of 3/28/22): This should be kept in the message envelope (not the message payaload).</li>
</ul>
</li>
<li>Per core WG meeting discussion of 2/24/22 - do we have status code?  If so should it mimic the REST/HTTP status code responses?  Do we really want to mimic HTTP in our message bus approach?  As suggested by @farshidtz, maybe we should just have an <code>error</code> boolean and then have the message indicate the error condition. <ul>
<li>Ans (per monthly architect's meeting of 3/28/22): We will use errorCode to provide the indication of error.  The errorCode will be 0 (no error) or 1 (indicating error) as the two enums for error conditions today.  In the future, if we determine the need for additional errors, we will add more "enums" or error code numbers.  When there is an error (with errorCode set to 1), then the payload contains a message string indicating more information about the error.  When there is no error (errorCode 0) then there is no message string in the payload. </li>
</ul>
</li>
<li>If we have a status code or error code, where does it belong?  In the payload or in the envelope (as it would be in the header in REST)?  As a reference, the IoTAAP MQTT to REST bridge provides a status code to message string translation as an example means to handle this problem.  Should we use something similar?<ul>
<li>Ans (per monthly architect's meeting of 3/28/22): errorCode should be in the message envelope not the payload.  When there is an error, the payload contains a single message string.</li>
</ul>
</li>
</ul>
</div>
<h4 id="query-message-payload">Query Message Payload</h4>
<p>The <strong>request</strong> message <code>payload</code> to query the command service would mimic their HTTP/REST request body alternatives.  The <code>payload</code> provides details needed in executing the command at the south side.</p>
<p>In the example query to get all commands below, note the <code>envelope</code> wraps or encases the message <code>payload</code>.  The payload will be empty.  The query parameters will include the offset and limit (as per the REST counter parts).</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">"Correlation-ID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"14a42ea6-c394-41c3-8bcd-a29b9f5e6835"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"apiVersion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"v2"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"requestId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e6e8a2f4-eb14-4649-9e2b-175247911369"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"queryParams"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"offset"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"limit"</span><span class="p">:</span><span class="mi">20</span><span class="p">,</span>
<span class="w">     </span><span class="p">}</span>
<span class="p">}</span>

<span class="err">I</span><span class="kc">n</span><span class="w"> </span><span class="kc">t</span><span class="err">he</span><span class="w"> </span><span class="err">example</span><span class="w"> </span><span class="err">query</span><span class="w"> </span><span class="kc">t</span><span class="err">o</span><span class="w"> </span><span class="err">ge</span><span class="kc">t</span><span class="w"> </span><span class="err">comma</span><span class="kc">n</span><span class="err">ds</span><span class="w"> </span><span class="kc">f</span><span class="err">or</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">speci</span><span class="kc">f</span><span class="err">ic</span><span class="w"> </span><span class="err">device</span><span class="w"> </span><span class="err">by</span><span class="w"> </span><span class="kc">na</span><span class="err">me</span><span class="p">,</span><span class="w"> </span><span class="kc">t</span><span class="err">he</span><span class="w"> </span><span class="err">device</span><span class="w"> </span><span class="kc">na</span><span class="err">me</span><span class="w"> </span><span class="err">would</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">i</span><span class="kc">n</span><span class="w"> </span><span class="kc">t</span><span class="err">he</span><span class="w"> </span><span class="kc">t</span><span class="err">opic</span><span class="p">,</span><span class="w"> </span><span class="err">so</span><span class="w"> </span><span class="kc">t</span><span class="err">he</span><span class="w"> </span><span class="err">query</span><span class="w"> </span><span class="err">message</span><span class="w"> </span><span class="err">would</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">wi</span><span class="kc">t</span><span class="err">hou</span><span class="kc">t</span><span class="w"> </span><span class="err">i</span><span class="kc">nf</span><span class="err">orma</span><span class="kc">t</span><span class="err">io</span><span class="kc">n</span><span class="w"> </span><span class="err">(a</span><span class="kc">n</span><span class="err">d</span><span class="w"> </span><span class="err">removed</span><span class="w"> </span><span class="kc">fr</span><span class="err">om</span><span class="w"> </span><span class="kc">t</span><span class="err">he</span><span class="w"> </span><span class="err">message</span><span class="w"> </span><span class="err">as</span><span class="w"> </span><span class="err">queryParams</span><span class="w"> </span><span class="err">will</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">op</span><span class="kc">t</span><span class="err">io</span><span class="kc">nal</span><span class="err">).</span>

<span class="p">{</span>
<span class="w">    </span><span class="nt">"Correlation-ID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"14a42ea6-c394-41c3-8bcd-a29b9f5e6835"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"apiVersion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"v2"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"requestId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e6e8a2f4-eb14-4649-9e2b-175247911369"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div>
<p>The <strong>response</strong> message <code>payload</code> for queries would contain the information necessary to make a message-based command request.</p>
<p>An example response message is shown below.  Again, note that the message <code>envelope</code> wraps the response <code>payload</code>.</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">"Correlation-ID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"14a42ea6-c394-41c3-8bcd-a29b9f5e6835"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"apiVersion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"v2"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"requestId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e6e8a2f4-eb14-4649-9e2b-175247911369"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"payload"</span><span class="p">:</span><span class="w"> </span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"apiVersion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"v2"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"deviceCoreCommands"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">            </span><span class="nt">"deviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"testDevice1"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"profileName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"testProfile"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"coreCommands"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"coolingpoint1"</span><span class="p">,</span>
<span class="w">                </span><span class="nt">"get"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                </span><span class="nt">"topic"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/edgex/command/request/testDevice1/coolingpoint1/get"</span><span class="p">,</span>
<span class="w">                </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"broker.address:1883"</span><span class="p">,</span>
<span class="w">                </span><span class="nt">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">"resourceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"resource1"</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">"valueType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Int32"</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">]</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">            </span><span class="nt">"deviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"testDevice1"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"profileName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"testProfile"</span><span class="p">,</span>
<span class="w">            </span><span class="nt">"coreCommands"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"coolingpoint1"</span><span class="p">,</span>
<span class="w">                </span><span class="nt">"set"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                </span><span class="nt">"topic"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/edgex/command/request/testDevice1/coolingpoint1/set"</span><span class="p">,</span>
<span class="w">                </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"broker.address:1883"</span><span class="p">,</span>
<span class="w">                </span><span class="nt">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">"resourceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"resource5"</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">"valueType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"String"</span>
<span class="w">                    </span><span class="p">},</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">"resourceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"resource6"</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">"valueType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bool"</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">]</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="topic-naming">Topic Naming</h3>
<p><img alt="image" src="../command-service-topics.png"/></p>
<h4 id="3rd-party-system-topics">3rd party system topics</h4>
<p>The 3rd party system or application must publish command requests messages to an EdgeX specified MQTT topic (<strong>external message bus</strong>) and subscribe to responses from the same.  Messages topics should follow the following pattern:</p>
<ul>
<li>Publishing command request topic: <code>/edgex/command/request/&lt;device-name&gt;/&lt;command-name&gt;/&lt;method&gt;</code></li>
<li>Subscribing command response topic: <code>/edgex/command/response/#</code></li>
</ul>
<p>For queries, the following topics are used
- Publishing query command request topic: <code>/edgex/commandquery/request</code>
- Subscribing query command response topic: <code>/edgex/commandquery/response</code></p>
<h4 id="command-service-topics">command service topics</h4>
<p>The command service must subscribe to the request topics of the 3rd party MQTT topic (<strong>external message bus</strong>) to get command requests, publish those to a topic to send them to a device service via the EdgeX message bus (<strong>internal message bus</strong>), subscribe to response messages on topics from device services (<strong>internal</strong>), and then publish response messages to a topic on the 3rd party MQTT broker (<strong>external</strong>).  Message topics for the command service would follow the following standard:</p>
<ul>
<li>Subscribing to 3rd party command request topics: <code>edgex/command/request/#</code></li>
<li>Publishing to device service request topic: <code>edgex/command/request/&lt;device-service&gt;/&lt;device-name&gt;/&lt;command-name&gt;/&lt;method&gt;</code></li>
<li>Subscribing to device service command response topics: <code>edgex/command/response/#</code></li>
<li>Publishing to 3rd party command response topic: <code>edgex/command/response/&lt;device-name&gt;/&lt;command-name&gt;/&lt;method&gt;</code></li>
</ul>
<p>For queries, the following topics are used:</p>
<ul>
<li>Subscribing to 3rd party command query request topics: <code>edgex/commandquery/request</code></li>
<li>Publishing to 3rd party command query response topic: <code>edgex/commandquery/response</code></li>
</ul>
<h4 id="device-service-topics">device service topics</h4>
<p>The device services must subscribe to the EdgeX command request topic (<strong>internal message bus</strong>) and publish response messages to an EdgeX command response topic.  The following naming standard will be applied to these topic names:</p>
<ul>
<li>Subscribing to command request topic: <code>edgex/command/request/#</code></li>
<li>Publishing to command response topic: <code>edgex/command/response/&lt;device-service&gt;/&lt;device-name&gt;/&lt;command-name&gt;/&lt;method&gt;</code></li>
</ul>
<h3 id="configuration">Configuration</h3>
<p>Both the EdgeX command service and the device services must contain configuration needed to connect to and publish/subscribe to messages from topics on the EdgeX message bus (<strong>internal</strong>).  This includes configuration to access the message bus when secure or insecure.</p>
<p>The command service must also be provided configuration to connect to the 3rd party MQTT broker's topics (<strong>external</strong>).  Because the communications may be done in a secure or insecure fashion, the core command service will need to be provided access to the 3rd party MQTT broker (<strong>external</strong>)</p>
<p>Similar to EdgeX application services, the command service will have access to an external MQTT broker to get command requests and send 3rd parties a response.  This will require the command service to have two message queue configuration settings (internal and external).</p>
<h4 id="command-service-configuration">command service configuration</h4>
<p>Example command service configuration is provided below.</p>
<div class="highlight"><pre><span></span><code><span class="k">[MessageQueue]</span>
<span class="w">    </span><span class="k">[InternalMessageQueue]</span>
<span class="w">    </span><span class="n">Protocol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"redis"</span>
<span class="w">    </span><span class="n">Host</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"localhost"</span>
<span class="w">    </span><span class="n">Port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6379</span>
<span class="w">    </span><span class="n">Type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"redis"</span>
<span class="w">    </span><span class="n">RequestTopicPrefix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"edgex/command/request/"</span><span class="w">   </span><span class="c1"># for publishing requests to the device service; &lt;device-service&gt;/&lt;device-name&gt;/&lt;command-name&gt;/&lt;method&gt; will be added to this publish topic prefix</span>
<span class="w">    </span><span class="n">ResponseTopic</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"edgex/command/response/#      # for subscribing to device service responses</span>
<span class="s">    AuthMode = "</span><span class="n">usernamepassword</span><span class="s">"                   # required for redis messagebus (secure or insecure).</span>
<span class="s">    SecretName = "</span><span class="n">redisdb</span><span class="s">"</span>
<span class="s">    [ExternalMQTT]</span>
<span class="s">    Protocol = "</span><span class="n">tcp</span><span class="s">"</span>
<span class="s">    Host = "</span><span class="n">localhost</span><span class="s">"</span>
<span class="s">    Port = 1883</span>
<span class="s">    RequestCommandTopic = "</span><span class="n">edgex</span><span class="err">/</span><span class="n">command</span><span class="err">/</span><span class="n">request</span><span class="err">/</span><span class="c1">#"           # for subscribing to 3rd party command requests</span>
<span class="w">    </span><span class="n">ResponseCommandTopicPrefix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"edgex/command/response/"</span><span class="w">    </span><span class="c1"># for publishing responses back to 3rd party systems /&lt;device-name&gt;/&lt;command-name&gt;/&lt;method&gt; will be added to this publish topic prefix</span>
<span class="w">    </span><span class="n">RequestQueryTopic</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"edgex/commandquery/request"</span>
<span class="w">    </span><span class="n">ResponseQueryTopic</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"edgex/commandquery/response"</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note<p>Core command contains no MessageQueue configuration today.  This is all additive/new configuration and therefore backward compatible with EdgeX 2.x implementations.</p>
</p>
</div>
<h4 id="device-service-configuration">device service configuration</h4>
<p>Example device service configuration is provided below.</p>
<div class="highlight"><pre><span></span><code><span class="k">[MessageQueue]</span>
<span class="c1">## already existing message queue configuration (for sending events/readings to the message bus)</span>
<span class="n">Protocol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"redis"</span>
<span class="n">Host</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"localhost"</span>
<span class="n">Port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6379</span>
<span class="n">Type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"redis"</span>
<span class="n">AuthMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"usernamepassword"</span><span class="w">                           </span><span class="c1"># required for redis messagebus (secure or insecure).</span>
<span class="n">SecretName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"redisdb"</span>
<span class="n">PublishTopicPrefix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"edgex/events/device"</span><span class="w"> </span><span class="c1"># /&lt;device-profile-name&gt;/&lt;device-name&gt;/&lt;source-name&gt; will be added to this Publish Topic prefix</span>
<span class="w">  </span><span class="k">[MessageQueue.Optional]</span>
<span class="w">  </span><span class="c1"># Default MQTT Specific options that need to be here to enable environment variable overrides of them</span>
<span class="w">  </span><span class="c1"># Client Identifiers</span>
<span class="w">  </span><span class="n">ClientId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"device-rest"</span>
<span class="w">  </span><span class="c1"># Connection information</span>
<span class="w">  </span><span class="n">Qos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0"</span><span class="w"> </span><span class="c1"># Quality of Service values are 0 (At most once), 1 (At least once) or 2 (Exactly once)</span>
<span class="w">  </span><span class="n">KeepAlive</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"10"</span><span class="w"> </span><span class="c1"># Seconds (must be 2 or greater)</span>
<span class="w">  </span><span class="n">Retained</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"false"</span>
<span class="w">  </span><span class="n">AutoReconnect</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"true"</span>
<span class="w">  </span><span class="n">ConnectTimeout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"5"</span><span class="w"> </span><span class="c1"># Seconds</span>
<span class="w">  </span><span class="n">SkipCertVerify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"false"</span><span class="w"> </span><span class="c1"># Only used if Cert/Key file or Cert/Key PEMblock are specified</span>

<span class="c1">## new configuration to allow device services to also communicate via message bus with core command</span>
<span class="n">CommandRequestTopic</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"edgex/command/request/#"</span><span class="w">         </span><span class="c1"># subscribing for inbound command requests</span>
<span class="n">CommandResponseTopicPrefix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"edgex/command/response/"</span><span class="w">  </span><span class="c1"># publishing outbound command responses; &lt;device-service&gt;/&lt;device-name&gt;/&lt;command-name&gt;/&lt;method&gt; will be added to this publish topic prefix</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note<p>Most of the device service configuration is existing based on its need to already communicate with the message bus for publishing events/readings.  The last two lines are added to allow device services to subscribe and publish command messages from/to the message bus.</p>
</p>
</div>
<h2 id="edgex-service-internal-message-bus-requests">EdgeX Service (Internal) Message Bus Requests</h2>
<p>Application services (or other EdgeX services in the future) may want to also use message communications to make command requests.  Application services make command requests today via REST.</p>
<p>In order to support this, the following need to be added:</p>
<ul>
<li>
<p>The command service will also need an internal request topic and internal response topic prefix configuration to allow internal EdgeX services to make command requests (and query requests).</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="k">[MessageQueue]</span>
<span class="w">        </span><span class="k">[InternalMessageQueue]</span>
<span class="w">        </span><span class="n">Protocol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"redis"</span>
<span class="w">        </span><span class="n">Host</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"localhost"</span>
<span class="w">        </span><span class="n">Port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6379</span>
<span class="w">        </span><span class="n">Type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"redis"</span>
<span class="w">        </span><span class="n">RequestTopicPrefix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"edgex/command/request/"</span><span class="w">   </span><span class="c1"># for publishing requests to the device service; &lt;device-service&gt;/&lt;device-name&gt;/&lt;command-name&gt;/&lt;method&gt; will be added to this publish topic prefix</span>
<span class="w">        </span><span class="n">ResponseTopic</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"edgex/command/response/#      # for subscribing to device service responses</span>
<span class="s">        InternalRequestCommandTopic = "</span><span class="err">/</span><span class="n">command</span><span class="err">/</span><span class="n">request</span><span class="err">/</span><span class="c1">#"     # for subscribing to internal command requests</span>
<span class="w">        </span><span class="n">InternalResponseCommandTopicPrefix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"/command/response/"</span><span class="w">    </span><span class="c1"># for publishing responses back to internal service /&lt;device-name&gt;/&lt;command-name&gt;/&lt;method&gt; will be added to this publish topic prefix</span>
<span class="w">        </span><span class="n">InternalRequestQueryTopic</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"/commandquery/request"</span>
<span class="w">        </span><span class="n">InternalResponseQueryTopic</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"/commandquery/response"</span>
<span class="w">        </span><span class="n">AuthMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"usernamepassword"</span><span class="w">                   </span><span class="c1"># required for redis messagebus (secure or insecure).</span>
<span class="w">        </span><span class="n">SecretName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"redisdb"</span>
</code></pre></div>
</li>
<li>
<p>A new command message client will need to be created to allow internal services (app services in this instance) to conveniently use the message bus communications with core command.  The client service's configuration will also be expanded to include the corresponding topic and <code>UseMessageBus</code> flag that enables the new messaging based CommandClient to be created.   Example client configuration would look something like the following:</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="k">[Clients]</span>
<span class="w">    </span><span class="k">[Clients.core-command]</span>
<span class="w">    </span><span class="n">UseMessageBus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="w">    </span><span class="n">Protocol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"redis"</span>
<span class="w">    </span><span class="n">Host</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"localhost"</span>
<span class="w">    </span><span class="n">Port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6379</span>
<span class="w">    </span><span class="n">CommandRequestTopicPrefix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"/command/request"</span><span class="w">  </span><span class="err">/&lt;</span><span class="n">device-name</span><span class="err">&gt;/&lt;</span><span class="n">command-name</span><span class="err">&gt;/&lt;</span><span class="n">method</span><span class="err">&gt;</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">added</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">publish</span><span class="w"> </span><span class="n">topic</span><span class="w"> </span><span class="n">prefix</span>
<span class="w">    </span><span class="n">CommandResponseTopic</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"/command/response/#"</span>
<span class="w">    </span><span class="n">CommandQueryRequestTopic</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"/commandquery/request"</span>
<span class="w">    </span><span class="n">CommandQueryResponseTopic</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"/commandquery/response"</span>
</code></pre></div>
</li>
</ul>
<h2 id="questions">Questions</h2>
<ul>
<li>
<p>Do we need separate topics for all the devices or would one on the device service suffice?</p>
<ul>
<li>Ans:  we have defined the deviceName in the parameterized topic, so one topic should be sufficient for Device Service- edgex/command/request/<device-name>...</device-name></li>
</ul>
</li>
<li>
<p>Would clients (non EdgeX services and applications) want to get a list of available commands via message (instead of calling REST)?</p>
<ul>
<li>Ans:  this is a valid question and could be provided via later additions to the command service (or other service like metadata) in the future.  It does not have to be tackled immediately.  </li>
</ul>
</li>
<li>
<p>Dynamic configuration of the message subscription is not a user friendly operation today (requiring configuration changes).</p>
<ul>
<li>Ans:  In the future, we might want to think about creating additional APIs for Adding/Updating/Deleting/Query the external subscription (and store them to the RedisDB).  One could also use the Consul UI to change configuration, but this would require the configuration in question be added to the writable section.</li>
</ul>
</li>
<li>
<p>Is it acceptable for more than one response to be published by the device service on the same correlation ID? Eg, send back "Acknowledged", then "Scheduled", then "Starting", then "Done" statuses?</p>
<ul>
<li>Ans:  No, the correlation id has a life span to/from the initial requester to the response back to the requester.</li>
</ul>
</li>
<li>
<p>Would it make sense to echo the command name into the response, as a reality check?</p>
<ul>
<li>Ans: solved via topic naming.  Also, per @lenny-intel: "not needed as we don't do this in the HTTP response. The response topic doesn't need the extra path info. The request ID or correlation ID is all that is needed to match the response to the request. No need to make it more complex."</li>
</ul>
</li>
<li>
<p>Would sending/receiving binary data (e.g. CBOR) be supported in this north-south message implementation?</p>
<ul>
<li>Ans:  today, command service and device services support CBOR get operations but not set (C SDK suppports both).  <a href="https://github.com/edgexfoundry/device-sdk-go/issues/488">Suggest getting feature parity</a> in place between the SDKs before exploring CBOR support messaging binary/CBOR payloads.</li>
<li>Ans update per Monthly Architect's meeting of 2/28/22: support get with CBOR payload.</li>
</ul>
</li>
<li>
<p>Use of the message bus communications (by the non-EdgeX 3rd party service or application) would bypass the API Gateway.</p>
<ul>
<li>Ans:  (per Monthly Architect's meeting of 3/28/22) Since the command service is serving as an external to internal message bus broker.  While not an issue, it is worth calling out that the message bus security paradigm in use is not quite the same as what's provided by the API Gateway, which provides access control for EdgeX. When the API Gateway is used, the security configuration is defined by the EdgeX instance. When an EdgeX service acts as a bridge to an external message bus, if the external bus is properly configured, then any application on the bus can now interact with the EdgeX instance. Thus the security configuration is defined by the external broker, not EdgeX. Finally, note that most MQTT brokers support topic ACLs based on client username.</li>
</ul>
</li>
<li>
<p>Note a number of open questions in the Message Structure section that still need to be addressed.</p>
</li>
</ul>
<div class="admonition alert">
<p class="admonition-title">Alert</p>
<p>Per TSC meeting of 4/27/22 - the discussion around error response was reopened.  There is still some polite disagreement as to whether to keep the error response simple (as documented in this ADR) or to offer errorCode enumerations that are similar to HTTP response codes for common problems (such as ).  As part of this discussion, the question is whether the error code enumerations should be exactly that of the HTTP response codes (400, 404, 423, 500, etc.) or more generic (i.e., non-HTTP) response error codes unique to this implementation.</p>
<p>The resolution to this question was to explore some options at implementation time.  The use of an enumeration (HTTP or other) can be explored during development and options brought forth via PR.</p>
</div>
<div class="admonition info">
<p class="admonition-title">Info<p>This ADR does not handle securing the message bus communications between services.  This need is to be covered universally in an upcoming ADR.</p>
</p>
</div>
<h2 id="future-considerations">Future Considerations</h2>
<ul>
<li>If desired, the query commands could return information to make <em>either</em> a REST or message request.  Presumably, the query responses would be the same then for both REST and message query requests so that information returned allows the 3rd party application to choose whether to use REST or message bus to make the command requests.</li>
<li>As mentioned in this ADR, eKuiper is allowed access directly to the internal EdgeX message bus.  This is a special circumstance of 3rd party external system communication.  In future releases of EdgeX, even eKuiper may be routed through an external to internal message bus bridge for better decoupling and security.</li>
<li>As noted, validation of all communications (REST or message bus) should be done in the future.</li>
<li>In the future, we might want to think about creating additional APIs for Adding/Updating/Deleting/Query the external subscription (and store them to the RedisDB).  As part of this consideration, it should be noted that one could also use the Consul UI to change configuration, but this would require the configuration in question be added to the writable section.</li>
</ul>
<h2 id="consequences">Consequences</h2>
<h2 id="references">References</h2>
<ul>
<li><a href="https://app.swaggerhub.com/apis/EdgeXFoundry1/core-command/2.1.0">Core Command API</a></li>
</ul>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
<div class="md-copyright__highlight">
      Copyright  2022 EdgeX Foundry
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
<div class="md-social">
<a class="md-social__link" href="https://github.com/edgexfoundry" rel="noopener" target="_blank" title="github.com">
<svg viewbox="0 0 480 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"></path></svg>
</a>
<a class="md-social__link" href="https://twitter.com/edgexfoundry" rel="noopener" target="_blank" title="twitter.com">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg>
</a>
<a class="md-social__link" href="https://www.linkedin.com/company/edgexfoundry" rel="noopener" target="_blank" title="www.linkedin.com">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs"], "search": "../../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
<script src="../../../assets/javascripts/bundle.d6c3db9e.min.js"></script>
<script src="../../../assets/javascripts/version-select.js"></script>
<script>document$.subscribe(() => {
            window.update_swagger_ui_iframe_height = function (id) {
                var iFrameID = document.getElementById(id);
                if (iFrameID) {
                    full_height = (iFrameID.contentWindow.document.body.scrollHeight + 80) + "px";
                    iFrameID.height = full_height;
                    iFrameID.style.height = full_height;
                }
            }
        
            let iframe_id_list = []
            var iframes = document.getElementsByClassName("swagger-ui-iframe");
            for (var i = 0; i < iframes.length; i++) { 
                iframe_id_list.push(iframes[i].getAttribute("id"))
            }
        
            let ticking = true;
            
            document.addEventListener('scroll', function(e) {
                if (!ticking) {
                    window.requestAnimationFrame(()=> {
                        let half_vh = window.innerHeight/2;
                        for(var i = 0; i < iframe_id_list.length; i++) {
                            let element = document.getElementById(iframe_id_list[i])
                            if(element==null){
                                return
                            }
                            let diff = element.getBoundingClientRect().top
                            if(element.contentWindow.update_top_val){
                                element.contentWindow.update_top_val(half_vh - diff)
                            }
                        }
                        ticking = false;
                    });
                    ticking = true;
                }
            });
        
            const dark_scheme_name = "slate"
            
            window.scheme = document.body.getAttribute("data-md-color-scheme")
            const options = {
                attributeFilter: ['data-md-color-scheme'],
            };
            function color_scheme_callback(mutations) {
                for (let mutation of mutations) {
                    if (mutation.attributeName === "data-md-color-scheme") {
                        scheme = document.body.getAttribute("data-md-color-scheme")
                        var iframe_list = document.getElementsByClassName("swagger-ui-iframe")
                        for(var i = 0; i < iframe_list.length; i++) {
                            var ele = iframe_list.item(i);
                            if (ele) {
                                if (scheme === dark_scheme_name) {
                                    ele.contentWindow.enable_dark_mode();
                                } else {
                                    ele.contentWindow.disable_dark_mode();
                                }
                            }
                        }
                    }
                }
            }
            observer = new MutationObserver(color_scheme_callback);
            observer.observe(document.body, options);
            })</script></body>
</html>