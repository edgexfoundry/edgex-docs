



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Documentation for use of EdgeX Foundry">
      
      
        <link rel="canonical" href="https://edgexfoundry.github.io/edgex-docs/microservices/application/Ch-ApplicationFunctionsSDK/">
      
      
        <meta name="author" content="Michael Johanson">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../assets/logo_edgex.png">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-4.6.3">
    
    
      
        <title>App Functions SDK (Golang) - Beta - EdgeX Foundry Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application.adb8469c.css">
      
        <link rel="stylesheet" href="../../../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#7e57c2">
      
    
    
      <script src="../../../assets/javascripts/modernizr.86422ebf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/version-select.css">
    
    
      
        
<script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-82811140-6", "auto")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="deep-purple" data-md-color-accent="red">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#app-functions-sdk-golang-beta" tabindex="0" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://edgexfoundry.github.io/edgex-docs/" title="EdgeX Foundry Documentation" aria-label="EdgeX Foundry Documentation" class="md-header-nav__button md-logo">
          
            <img alt="logo" src="../../../assets/logo_edgex.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              EdgeX Foundry Documentation
            </span>
            <span class="md-header-nav__topic">
              
                App Functions SDK (Golang) - Beta
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" aria-label="search" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/edgexfoundry/edgex-go/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    edgex/edgex-go
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../../.." class="md-tabs__link">
        Introduction
      </a>
    
  </li>

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../../getting-started/" class="md-tabs__link">
          Getting Started
        </a>
      
    </li>
  

      
        
  
  
    
    
  
  
    <li class="md-tabs__item">
      
        <a href="../../core/data/Ch-CoreData/" class="md-tabs__link">
          Microservices
        </a>
      
    </li>
  

  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../../examples/Ch-ExamplesProvisionDevice/" class="md-tabs__link">
          Examples and Tutorials
        </a>
      
    </li>
  

      
        
  
  
    
    
  
  
    <li class="md-tabs__item">
      
        <a href="../../../api/core/Ch-APICoreCommand/" class="md-tabs__link">
          API Reference
        </a>
      
    </li>
  

  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../../design/" class="md-tabs__link">
          Architectural Decision Records
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://edgexfoundry.github.io/edgex-docs/" title="EdgeX Foundry Documentation" class="md-nav__button md-logo">
      
        <img alt="logo" src="../../../assets/logo_edgex.png" width="48" height="48">
      
    </a>
    EdgeX Foundry Documentation
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/edgexfoundry/edgex-go/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    edgex/edgex-go
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Getting Started
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Getting Started
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/" title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/quick-start/" title="Quick Start" class="md-nav__link">
      Quick Start
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-3" type="checkbox" id="nav-2-3">
    
    <label class="md-nav__link" for="nav-2-3">
      Users
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-3">
        Users
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/Ch-GettingStartedUsers/" title="Getting Started - Users" class="md-nav__link">
      Getting Started - Users
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-4" type="checkbox" id="nav-2-4">
    
    <label class="md-nav__link" for="nav-2-4">
      Developers
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-4">
        Developers
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/Ch-GettingStartedDevelopers/" title="Getting Started - Developers" class="md-nav__link">
      Getting Started - Developers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/Ch-GettingStartedGoDevelopers/" title="Get EdgeX Foundry - Go Developers" class="md-nav__link">
      Get EdgeX Foundry - Go Developers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/Ch-GettingStartedHybrid/" title="Working in a Hybrid Environment" class="md-nav__link">
      Working in a Hybrid Environment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-4-4" type="checkbox" id="nav-2-4-4">
    
    <label class="md-nav__link" for="nav-2-4-4">
      Device Services
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-2-4-4">
        Device Services
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/Ch-GettingStartedSDK/" title="Device Service SDK" class="md-nav__link">
      Device Service SDK
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/Ch-GettingStartedSDK-C/" title="C SDK" class="md-nav__link">
      C SDK
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/Ch-GettingStartedSDK-Go/" title="Golang SDK" class="md-nav__link">
      Golang SDK
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/Ch-GettingStartedUsersNexus/" title="Getting Docker Images from EdgeX Nexus Repository" class="md-nav__link">
      Getting Docker Images from EdgeX Nexus Repository
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Microservices
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Microservices
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-1" type="checkbox" id="nav-3-1">
    
    <label class="md-nav__link" for="nav-3-1">
      Core Services
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-1">
        Core Services
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../core/data/Ch-CoreData/" title="Core Data" class="md-nav__link">
      Core Data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../core/metadata/Ch-Metadata/" title="Metadata" class="md-nav__link">
      Metadata
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../core/command/Ch-Command/" title="Command" class="md-nav__link">
      Command
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2" type="checkbox" id="nav-3-2">
    
    <label class="md-nav__link" for="nav-3-2">
      Supporting Services
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-2">
        Supporting Services
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../support/Ch-SupportingServices/" title="Supporting Services Microservices" class="md-nav__link">
      Supporting Services Microservices
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../support/logging/Ch-Logging/" title="Logging" class="md-nav__link">
      Logging
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../support/notifications/Ch-AlertsNotifications/" title="Alerts & Notifications" class="md-nav__link">
      Alerts & Notifications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../support/rulesengine/Ch-RulesEngine/" title="Rules Engine" class="md-nav__link">
      Rules Engine
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../support/scheduler/Ch-Scheduling/" title="Scheduling" class="md-nav__link">
      Scheduling
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-3" type="checkbox" id="nav-3-3">
    
    <label class="md-nav__link" for="nav-3-3">
      System Management
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-3">
        System Management
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../system-management/agent/Ch_SysMgmtAgent/" title="System Management Agent (SMA)" class="md-nav__link">
      System Management Agent (SMA)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-4" type="checkbox" id="nav-3-4">
    
    <label class="md-nav__link" for="nav-3-4">
      Security
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-4">
        Security
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../security/Ch-Security/" title="Security" class="md-nav__link">
      Security
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../security/Ch-SecretStore/" title="Secret Store" class="md-nav__link">
      Secret Store
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../security/Ch-APIGateway/" title="API Gateway" class="md-nav__link">
      API Gateway
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../security/Ch-AccessEdgeXRESTResources/" title="Access EdgeX REST resources" class="md-nav__link">
      Access EdgeX REST resources
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../security/Ch-StartingSecurity/" title="Starting security services within EdgeX" class="md-nav__link">
      Starting security services within EdgeX
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../security/Ch-SecurityIssues/" title="Security Issues" class="md-nav__link">
      Security Issues
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-5" type="checkbox" id="nav-3-5">
    
    <label class="md-nav__link" for="nav-3-5">
      Devices Services
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-5">
        Devices Services
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../device/Ch-DeviceServices/" title="Device Services Microservices" class="md-nav__link">
      Device Services Microservices
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../device/profile/Ch-DeviceProfile/" title="Device Profile" class="md-nav__link">
      Device Profile
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../device/sdk/Ch-DeviceSDK/" title="Device Services SDK" class="md-nav__link">
      Device Services SDK
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../device/virtual/Ch-VirtualDevice/" title="Virtual Device" class="md-nav__link">
      Virtual Device
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-6" type="checkbox" id="nav-3-6" checked>
    
    <label class="md-nav__link" for="nav-3-6">
      App Services
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-6">
        App Services
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Ch-ApplServices/" title="Application Services Microservices" class="md-nav__link">
      Application Services Microservices
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Ch-AppServiceConfigurable/" title="App Service Configurable" class="md-nav__link">
      App Service Configurable
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Ch-ApplicationServices/" title="Application Services" class="md-nav__link">
      Application Services
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
    <a href="./" title="App Functions SDK (Golang) - Beta" class="md-nav__link md-nav__link--active">
      App Functions SDK (Golang) - Beta
    </a>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Ch-HTTPTrigger/" title="HTTP Trigger" class="md-nav__link">
      HTTP Trigger
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Ch-MessageBusTrigger/" title="Message Bus Trigger" class="md-nav__link">
      Message Bus Trigger
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../configuration/Ch-Configuration/" title="Configuration and Registry" class="md-nav__link">
      Configuration and Registry
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Examples and Tutorials
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Examples and Tutorials
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../examples/Ch-ExamplesProvisionDevice/" title="Provison a Device - Modbus Example" class="md-nav__link">
      Provison a Device - Modbus Example
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../examples/Ch-ExamplesModbusdatatypeconversion/" title="Modbus - Data Type Conversion" class="md-nav__link">
      Modbus - Data Type Conversion
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../examples/Ch-ExamplesVirtualDeviceService/" title="Using the Virtual Device Service" class="md-nav__link">
      Using the Virtual Device Service
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../examples/Ch-ExamplesRandomDeviceService/" title="Random Integer Device Service Example" class="md-nav__link">
      Random Integer Device Service Example
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../examples/Ch-ExamplesSendingAndConsumingBinary/" title="Sending and Consuming Binary Data From EdgeX Device Services" class="md-nav__link">
      Sending and Consuming Binary Data From EdgeX Device Services
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-6" type="checkbox" id="nav-4-6">
    
    <label class="md-nav__link" for="nav-4-6">
      Adding a Device
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-6">
        Adding a Device
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../examples/Ch-ExamplesAddingModbusDevice/" title="Modbus" class="md-nav__link">
      Modbus
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../examples/Ch-ExamplesAddingSNMPDevice/" title="SNMP" class="md-nav__link">
      SNMP
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../examples/Ch-ExamplesAddingMQTTDevice/" title="MQTT" class="md-nav__link">
      MQTT
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-7" type="checkbox" id="nav-4-7">
    
    <label class="md-nav__link" for="nav-4-7">
      Walkthrough
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-7">
        Walkthrough
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../walk-through/Ch-Walkthrough/" title="EdgeX Demonstration API Walk Through" class="md-nav__link">
      EdgeX Demonstration API Walk Through
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../walk-through/Ch-WalkthroughSetup/" title="Setup up your environment" class="md-nav__link">
      Setup up your environment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../walk-through/Ch-WalkthroughRunning/" title="Running EdgeX" class="md-nav__link">
      Running EdgeX
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../walk-through/Ch-WalkthroughUseCase/" title="Example Use Case" class="md-nav__link">
      Example Use Case
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../walk-through/Ch-WalkthroughData/" title="Defining your data" class="md-nav__link">
      Defining your data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../walk-through/Ch-WalkthroughDeviceProfile/" title="Defining your device" class="md-nav__link">
      Defining your device
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../walk-through/Ch-WalkthroughDeviceService/" title="Register your Device Service" class="md-nav__link">
      Register your Device Service
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../walk-through/Ch-WalkthroughProvision/" title="Provision a Device" class="md-nav__link">
      Provision a Device
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../walk-through/Ch-WalkthroughCommands/" title="Calling commands" class="md-nav__link">
      Calling commands
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../walk-through/Ch-WalkthroughReading/" title="Sending events and reading data" class="md-nav__link">
      Sending events and reading data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../walk-through/Ch-WalkthroughExporting/" title="Exporting your device data" class="md-nav__link">
      Exporting your device data
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      API Reference
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        API Reference
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-1" type="checkbox" id="nav-5-1">
    
    <label class="md-nav__link" for="nav-5-1">
      Core
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-1">
        Core
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../api/core/Ch-APICoreCommand/" title="Core Command" class="md-nav__link">
      Core Command
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../api/core/Ch-APICoreData/" title="Core Data" class="md-nav__link">
      Core Data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../api/core/Ch-APICoreMetadata/" title="Core Metadata" class="md-nav__link">
      Core Metadata
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../api/core/Ch-APICoreServiceConfiguration/" title="Configuration and Registry" class="md-nav__link">
      Configuration and Registry
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2" type="checkbox" id="nav-5-2">
    
    <label class="md-nav__link" for="nav-5-2">
      Supporting Services
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-2">
        Supporting Services
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../api/supporting/Ch-APISupportingServicesAlerts/" title="Alerts & Notifications" class="md-nav__link">
      Alerts & Notifications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../api/supporting/Ch-APISupportingServicesLogging/" title="Logging" class="md-nav__link">
      Logging
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../api/supporting/Ch-APISupportingServicesRulesEngine/" title="Rules Engine" class="md-nav__link">
      Rules Engine
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../api/supporting/Ch-APISupportingServicesScheduling/" title="Scheduling" class="md-nav__link">
      Scheduling
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../api/Ch-APIDeviceServicesVirtual/" title="APIs - Device Services - Virtual Device Service" class="md-nav__link">
      APIs - Device Services - Virtual Device Service
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../api/Ch-APISystemManagement/" title="APIs - System Management - Agent" class="md-nav__link">
      APIs - System Management - Agent
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Architectural Decision Records
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Architectural Decision Records
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../design/" title="Architecture Decision Records Folder" class="md-nav__link">
      Architecture Decision Records Folder
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../design/TOC/" title="ADR Table of Contents" class="md-nav__link">
      ADR Table of Contents
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-3" type="checkbox" id="nav-6-3">
    
    <label class="md-nav__link" for="nav-6-3">
      Legacy
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-3">
        Legacy
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../design/legacy-design/" title="Legacy Design Documents" class="md-nav__link">
      Legacy Design Documents
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../design/legacy-requirements/" title="Legacy Requirements" class="md-nav__link">
      Legacy Requirements
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/edgexfoundry/edgex-go/edit/master/docs/microservices/application/Ch-ApplicationFunctionsSDK.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="app-functions-sdk-golang-beta">App Functions SDK (Golang) - Beta</h1>
<p>Welcome the App Functions SDK for EdgeX. This sdk is meant to provide
all the plumbing necessary for developers to get started in
processing/transforming/exporting data out of EdgeX.</p>
<h1 id="table-of-contents">Table of contents</h1>
<!--ts-->

<ul>
<li><a href="#getting-started">Getting Started</a></li>
<li><a href="#triggers">Triggers</a></li>
<li><a href="#context-api">Context API</a></li>
<li><a href="#built-in-transformsfunctions">Built-In Functions</a><ul>
<li><a href="#filtering">Filtering</a></li>
<li><a href="#encryption">Encryption</a></li>
<li><a href="#conversion">Conversion</a></li>
<li><a href="#compressions">Compressions</a></li>
<li><a href="#CoreData-Functions">Core Data</a></li>
<li><a href="#export-functions">Export Functions</a></li>
</ul>
</li>
<li><a href="#configuration">Configuration</a></li>
<li><a href="#error-handling">Error Handling</a></li>
<li><a href="#advanced-topics">Advanced Topics</a><ul>
<li><a href="#target-type">Target Type</a></li>
<li><a href="#command_line_options">Command Line Options</a></li>
<li><a href="#environment_variable_overrides">Environment Variable
    Overrides</a></li>
<li><a href="#store-and-forward">Store and Forward</a></li>
</ul>
</li>
</ul>
<h2 id="getting-started">Getting Started</h2>
<h3 id="build-prerequisites">Build Prerequisites</h3>
<p>Please see the <a href="https://github.com/edgexfoundry/edgex-go/blob/master/README.md">edgex-go
README</a>.</p>
<h3 id="the-sdk">The SDK</h3>
<p>The SDK is built around the idea of a "Functions Pipeline". A functions
pipeline is a collection of various functions that process the data in
the order that you've specified. The functions pipeline is executed by
the specified <a href="#triggers">trigger</a> in the <code>configuration.toml</code> . The
first function in the pipeline is called with the event that triggered
the pipeline (ex. <code>events.Model</code>). Each successive call in the pipeline
is called with the return result of the previous function. Let's take a
look at a simple example that creates a pipeline to filter particular
device ids and subsequently transform the data to XML:</p>
<div class="codehilite"><pre><span></span><code><span class="n">package</span> <span class="n">main</span>

<span class="kn">import</span> <span class="p">(</span>
    <span class="s2">&quot;fmt&quot;</span>
    <span class="s2">&quot;github.com/edgexfoundry/app-functions-sdk-go/appsdk&quot;</span>
    <span class="s2">&quot;github.com/edgexfoundry/app-functions-sdk-go/pkg/transforms&quot;</span>
    <span class="s2">&quot;os&quot;</span>
<span class="p">)</span>

<span class="n">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>

    <span class="o">//</span> <span class="mi">1</span><span class="p">)</span> <span class="n">First</span> <span class="n">thing</span> <span class="n">to</span> <span class="n">do</span> <span class="ow">is</span> <span class="n">to</span> <span class="n">create</span> <span class="n">an</span> <span class="n">instance</span> <span class="n">of</span> <span class="n">the</span> <span class="n">EdgeX</span> <span class="n">SDK</span><span class="p">,</span> <span class="n">giving</span> <span class="n">it</span> <span class="n">a</span> <span class="n">service</span> <span class="n">key</span>
    <span class="n">edgexSdk</span> <span class="p">:</span><span class="o">=</span> <span class="o">&amp;</span><span class="n">appsdk</span><span class="o">.</span><span class="n">AppFunctionsSDK</span><span class="p">{</span>
        <span class="n">ServiceKey</span><span class="p">:</span> <span class="s2">&quot;SimpleFilterXMLApp&quot;</span><span class="p">,</span> <span class="o">//</span> <span class="n">Key</span> <span class="n">used</span> <span class="n">by</span> <span class="n">Registry</span> <span class="p">(</span><span class="n">Aka</span> <span class="n">Consul</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="o">//</span> <span class="mi">2</span><span class="p">)</span> <span class="n">Next</span><span class="p">,</span> <span class="n">we</span> <span class="n">need</span> <span class="n">to</span> <span class="n">initialize</span> <span class="n">the</span> <span class="n">SDK</span>
    <span class="k">if</span> <span class="n">err</span> <span class="p">:</span><span class="o">=</span> <span class="n">edgexSdk</span><span class="o">.</span><span class="n">Initialize</span><span class="p">();</span> <span class="n">err</span> <span class="o">!=</span> <span class="n">nil</span> <span class="p">{</span>
        <span class="n">edgexSdk</span><span class="o">.</span><span class="n">LoggingClient</span><span class="o">.</span><span class="n">Error</span><span class="p">(</span><span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s2">&quot;SDK initialization failed: %v</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">err</span><span class="p">))</span>
        <span class="n">os</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="o">//</span> <span class="mi">3</span><span class="p">)</span> <span class="n">Since</span> <span class="n">our</span> <span class="n">FilterByDeviceName</span> <span class="n">Function</span> <span class="n">requires</span> <span class="n">the</span> <span class="nb">list</span> <span class="n">of</span> <span class="n">Device</span> <span class="n">Names</span> <span class="n">we</span> <span class="n">would</span>
    <span class="o">//</span> <span class="n">like</span> <span class="n">to</span> <span class="n">search</span> <span class="k">for</span><span class="p">,</span> <span class="n">we</span><span class="s1">&#39;ll go ahead and define that now.</span>
    <span class="n">deviceNames</span> <span class="p">:</span><span class="o">=</span> <span class="p">[]</span><span class="n">string</span><span class="p">{</span><span class="s2">&quot;Random-Float-Device&quot;</span><span class="p">}</span>

    <span class="o">//</span> <span class="mi">4</span><span class="p">)</span> <span class="n">This</span> <span class="ow">is</span> <span class="n">our</span> <span class="n">pipeline</span> <span class="n">configuration</span><span class="p">,</span> <span class="n">the</span> <span class="n">collection</span> <span class="n">of</span> <span class="n">functions</span> <span class="n">to</span>
    <span class="o">//</span> <span class="n">execute</span> <span class="n">every</span> <span class="n">time</span> <span class="n">an</span> <span class="n">event</span> <span class="ow">is</span> <span class="n">triggered</span><span class="o">.</span>
    <span class="k">if</span> <span class="n">err</span> <span class="p">:</span><span class="o">=</span> <span class="n">edgexSdk</span><span class="o">.</span><span class="n">SetFunctionsPipeline</span><span class="p">(</span>
            <span class="n">transforms</span><span class="o">.</span><span class="n">NewFilter</span><span class="p">(</span><span class="n">deviceNames</span><span class="p">)</span><span class="o">.</span><span class="n">FilterByDeviceName</span><span class="p">,</span> 
            <span class="n">transforms</span><span class="o">.</span><span class="n">NewConversion</span><span class="p">()</span><span class="o">.</span><span class="n">TransformToXML</span><span class="p">,</span>
        <span class="p">);</span> <span class="n">err</span> <span class="o">!=</span> <span class="n">nil</span> <span class="p">{</span>
            <span class="n">edgexSdk</span><span class="o">.</span><span class="n">LoggingClient</span><span class="o">.</span><span class="n">Error</span><span class="p">(</span><span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s2">&quot;SDK SetPipeline failed: %v</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">err</span><span class="p">))</span>
            <span class="n">os</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="p">}</span>

    <span class="o">//</span> <span class="mi">5</span><span class="p">)</span> <span class="n">shows</span> <span class="n">how</span> <span class="n">to</span> <span class="n">access</span> <span class="n">the</span> <span class="n">application</span><span class="s1">&#39;s specific configuration settings.</span>
    <span class="n">appSettings</span> <span class="p">:</span><span class="o">=</span> <span class="n">edgexSdk</span><span class="o">.</span><span class="n">ApplicationSettings</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">appSettings</span> <span class="o">!=</span> <span class="n">nil</span> <span class="p">{</span>
        <span class="n">appName</span><span class="p">,</span> <span class="n">ok</span> <span class="p">:</span><span class="o">=</span> <span class="n">appSettings</span><span class="p">[</span><span class="s2">&quot;ApplicationName&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">ok</span> <span class="p">{</span>
            <span class="n">edgexSdk</span><span class="o">.</span><span class="n">LoggingClient</span><span class="o">.</span><span class="n">Info</span><span class="p">(</span><span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> now running...&quot;</span><span class="p">,</span> <span class="n">appName</span><span class="p">))</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="n">edgexSdk</span><span class="o">.</span><span class="n">LoggingClient</span><span class="o">.</span><span class="n">Error</span><span class="p">(</span><span class="s2">&quot;ApplicationName application setting not found&quot;</span><span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">edgexSdk</span><span class="o">.</span><span class="n">LoggingClient</span><span class="o">.</span><span class="n">Error</span><span class="p">(</span><span class="s2">&quot;No application settings found&quot;</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="o">//</span> <span class="mi">6</span><span class="p">)</span> <span class="n">Lastly</span><span class="p">,</span> <span class="n">we</span><span class="s1">&#39;ll go ahead and tell the SDK to &quot;start&quot; and begin listening for events to trigger the pipeline.</span>
    <span class="n">edgexSdk</span><span class="o">.</span><span class="n">MakeItRun</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div>


<p>The above example is meant to merely demonstrate the structure of your
application. Notice that the output of the last function is not
available anywhere inside this application. You must provide a function
in order to work with the data from the previous function. Let's go
ahead and add the following function that prints the output to the
console.</p>
<div class="codehilite"><pre><span></span><code><span class="err">func printXMLToConsole(edgexcontext *appcontext.Context, params ...interface{}) (bool,interface{}) {</span>
<span class="err">  if len(params) &lt; 1 { </span>
<span class="err">    // We didn&#39;t receive a result</span>
<span class="err">    return false, errors.New(&quot;No Data Received&quot;)</span>
<span class="err">  }</span>
<span class="err">  println(params[0].(string))</span>
<span class="err">  return true, nil</span>
<span class="err">}</span>
</code></pre></div>


<p>After placing the above function in your code, the next step is to
modify the pipeline to call this function:</p>
<div class="codehilite"><pre><span></span><code><span class="err">edgexSdk.SetFunctionsPipeline(</span>
<span class="err">  transforms.NewFilter(deviceNames).FilterByDeviceName, </span>
<span class="err">  transforms.NewConversion().TransformToXML,</span>
<span class="err">  printXMLToConsole //notice this is not a function call, but simply a function pointer. </span>
<span class="err">)</span>
</code></pre></div>


<p>After making the above modifications, you should now see data printing
out to the console in XML when an event is triggered. > You can find
this example in the <code>/examples</code> directory located in this repository.
You can also use the provided <code>EdgeX Applications Function SDK.postman\_collection.json</code> file to load into postman to trigger the
sample pipeline.</p>
<p>Up until this point, the pipeline has been <a href="#triggers">triggered</a> by an
event over HTTP and the data at the end of that pipeline lands in the
last function specified. In the example, data ends up printed to the
console. Perhaps we'd like to send the data back to where it came from.
In the case of an HTTP trigger, this would be the HTTP response. In the
case of a message bus, this could be a new topic to send the data back
to for other applications that wish to receive it. To do this, simply
call <code>edgexcontext.Complete([]byte outputData)</code> passing in the data you
wish to "respond" with. In the above <code>printXMLToConsole(...)</code> function,
replace <code>println(params[0].(string))</code> with
<code>edgexcontext.Complete([]byte(params[0].(string)))</code>. You should now see
the response in your postman window when testing the pipeline.</p>
<h2 id="examples">Examples</h2>
<p>The <a href="https://github.com/edgexfoundry-holding/app-service-examples">App Service
Examples</a>
repo contains a variety of simple to advanced example <strong>Application
Services</strong> built upon the <strong>App Functions SDK</strong>. Examples that once were
in the examples folder of the SDK have been moved to this <code>Examples</code>
repo.</p>
<h2 id="triggers">Triggers</h2>
<p>Triggers determine how the app functions pipeline begins execution. In
the simple example provided above, an HTTP trigger is used. The trigger
is determine by the <code>configuration.toml</code> file located in the <code>/res</code>
directory under a section called <code>[Binding]</code>. Check out the
<a href="#configuration">Configuration Section</a> for more information about the
toml file.</p>
<h3 id="message-bus-trigger">Message Bus Trigger</h3>
<p>A message bus trigger will execute the pipeline every time data is
received off of the configured topic.</p>
<h4 id="type-and-topic-configuration">Type and Topic configuration</h4>
<p>Here's an example:</p>
<div class="codehilite"><pre><span></span><code><span class="n">Type</span><span class="o">=</span><span class="s">&quot;messagebus&quot;</span> 
<span class="n">SubscribeTopic</span><span class="o">=</span><span class="s">&quot;events&quot;</span>
<span class="n">PublishTopic</span><span class="o">=</span><span class="s">&quot;&quot;</span>
</code></pre></div>


<p>The <code>Type=</code> is set to "messagebus". <a href="">EdgeX Core Data</a> is publishing
data to the <code>events</code> topic. So to receive data from core data, you can
set your <code>SubscribeTopic=</code> either to <code>""</code> or <code>"events"</code>. You may also
designate a <code>PublishTopic=</code> if you wish to publish data back to the
message bus. <code>edgexcontext.Complete([]byte outputData)</code> - Will send data
back to back to the message bus with the topic specified in the
<code>PublishTopic=</code> property #### Message bus connection configuration
The other piece of configuration required are the connection settings:</p>
<div class="codehilite"><pre><span></span><code><span class="k">[MessageBus]</span>
<span class="n">Type</span> <span class="o">=</span> <span class="s">&#39;zero&#39;</span> <span class="c1">#specifies of message bus (i.e zero for ZMQ)</span>
    <span class="k">[MessageBus.PublishHost]</span>
        <span class="n">Host</span> <span class="o">=</span> <span class="s">&#39;*&#39;</span>
        <span class="n">Port</span> <span class="o">=</span> <span class="mi">5564</span>
        <span class="n">Protocol</span> <span class="o">=</span> <span class="s">&#39;tcp&#39;</span>
    <span class="k">[MessageBus.SubscribeHost]</span>
        <span class="n">Host</span> <span class="o">=</span> <span class="s">&#39;localhost&#39;</span>
        <span class="n">Port</span> <span class="o">=</span> <span class="mi">5563</span>
        <span class="n">Protocol</span> <span class="o">=</span> <span class="s">&#39;tcp&#39;</span>
</code></pre></div>


<p>By default, <code>EdgeX Core Data</code> publishes data to the <code>events</code> topic on
port 5563. The publish host is used if publishing data back to the
message bus. ><strong>Important Note:</strong> Publish Host <strong>MUST</strong> be different
for every topic you wish to publish to since the SDK will bind to the
specific port. 5563 for example cannot be used to publish since
<code>EdgeX Core Data</code> has bound to that port. Similarly, you cannot have two
separate instances of the app functions SDK running publishing to the
same port.</p>
<h3 id="http-trigger">HTTP Trigger</h3>
<p>Designating an HTTP trigger will allow the pipeline to be triggered by a
RESTful <code>POST</code> call to <code>http://[host]:[port]/trigger/</code>. The body of the
POST must be an EdgeX event.</p>
<p><code>edgexcontext.Complete([]byte outputData)</code> - Will send the specified
data as the response to the request that originally triggered the HTTP
Request.</p>
<h2 id="context-api">Context API</h2>
<p>The context parameter passed to each function/transform provides
operations and data associated with each execution of the pipeline.
Let's take a look at a few of the properties that are available:</p>
<div class="codehilite"><pre><span></span><code><span class="k">type</span> <span class="n">Context</span> <span class="n">struct</span> <span class="err">{</span>
    <span class="o">//</span> <span class="n">ID</span> <span class="k">of</span> <span class="n">the</span> <span class="n">EdgeX</span> <span class="n">Event</span> <span class="c1">-- will be filled for a received JSON Event</span>
    <span class="n">EventID</span> <span class="n">string</span>

    <span class="o">//</span> <span class="n">Checksum</span> <span class="k">of</span> <span class="n">the</span> <span class="n">EdgeX</span> <span class="n">Event</span> <span class="c1">-- will be filled for a received CBOR Event</span>
    <span class="n">EventChecksum</span> <span class="n">string</span>

    <span class="o">//</span> <span class="n">This</span> <span class="k">is</span> <span class="n">the</span> <span class="n">ID</span> <span class="n">used</span> <span class="k">to</span> <span class="n">track</span> <span class="n">the</span> <span class="n">EdgeX</span> <span class="n">event</span> <span class="n">through</span> <span class="n">entire</span> <span class="n">EdgeX</span> <span class="n">framework</span><span class="p">.</span>
    <span class="n">CorrelationID</span> <span class="n">string</span>

    <span class="o">//</span> <span class="n">OutputData</span> <span class="k">is</span> <span class="n">used</span> <span class="k">for</span> <span class="n">specifying</span> <span class="n">the</span> <span class="k">data</span> <span class="n">that</span> <span class="k">is</span> <span class="k">to</span> <span class="n">be</span> <span class="n">outputted</span><span class="p">.</span> <span class="n">Leverage</span> <span class="n">the</span> <span class="p">.</span><span class="n">Complete</span><span class="p">()</span> <span class="k">function</span> <span class="k">to</span> <span class="k">set</span><span class="p">.</span>
    <span class="n">OutputData</span> <span class="p">[]</span><span class="n">byte</span>

    <span class="o">//</span> <span class="n">This</span> <span class="n">holds</span> <span class="n">the</span> <span class="n">configuration</span> <span class="k">for</span> <span class="n">your</span> <span class="n">service</span><span class="p">.</span> <span class="n">This</span> <span class="k">is</span> <span class="n">the</span> <span class="n">preferred</span> <span class="n">way</span> <span class="k">to</span> <span class="k">access</span> <span class="n">your</span> <span class="n">custom</span> <span class="n">application</span> <span class="n">settings</span> <span class="n">that</span> <span class="n">have</span> <span class="n">been</span> <span class="k">set</span> <span class="k">in</span> <span class="n">the</span> <span class="n">configuration</span><span class="p">.</span> 
    <span class="n">Configuration</span> <span class="n">common</span><span class="p">.</span><span class="n">ConfigurationStruct</span>

    <span class="o">//</span> <span class="n">LoggingClient</span> <span class="k">is</span> <span class="n">exposed</span> <span class="k">to</span> <span class="n">allow</span> <span class="n">logging</span> <span class="n">following</span> <span class="n">the</span> <span class="n">preferred</span> <span class="n">logging</span> <span class="n">strategy</span> <span class="n">within</span> <span class="n">EdgeX</span><span class="p">.</span>
    <span class="n">LoggingClient</span> <span class="n">logger</span><span class="p">.</span><span class="n">LoggingClient</span>

    <span class="o">//</span> <span class="n">EventClient</span> <span class="n">exposes</span> <span class="n">Core</span> <span class="k">Data</span><span class="s1">&#39;s EventClient API</span>
<span class="s1">    EventClient coredata.EventClient</span>

<span class="s1">    // ValueDescriptorClient exposes Core Data&#39;</span><span class="n">s</span> <span class="n">ValueDescriptor</span> <span class="n">API</span>
    <span class="n">ValueDescriptorClient</span> <span class="n">coredata</span><span class="p">.</span><span class="n">ValueDescriptorClient</span>

    <span class="o">//</span> <span class="n">CommandClient</span> <span class="n">exposes</span> <span class="n">Core</span> <span class="n">Commands</span><span class="s1">&#39;s Command API</span>
<span class="s1">    CommandClient command.CommandClient</span>

<span class="s1">    // NotificationsClient exposes Support Notification&#39;</span><span class="n">s</span> <span class="n">Notifications</span> <span class="n">API</span>
    <span class="n">NotificationsClient</span> <span class="n">notifications</span><span class="p">.</span><span class="n">NotificationsClient</span>

    <span class="o">//</span> <span class="n">RetryData</span> <span class="n">holds</span> <span class="n">the</span> <span class="k">data</span> <span class="k">to</span> <span class="n">be</span> <span class="n">stored</span> <span class="k">for</span> <span class="n">later</span> <span class="n">retry</span> <span class="k">when</span> <span class="n">the</span> <span class="n">pipeline</span> <span class="k">function</span> <span class="k">returns</span> <span class="n">an</span> <span class="n">error</span>
    <span class="n">RetryData</span> <span class="p">[]</span><span class="n">byte</span>
<span class="err">}</span>
</code></pre></div>


<h3 id="loggingclient">LoggingClient</h3>
<p>The <code>LoggingClient</code> exposed on the context is available to leverage
logging libraries/service utilized throughout the EdgeX framework. The
SDK has initialized everything so it can be used to log <code>Trace</code>,
<code>Debug</code>, <code>Warn</code>, <code>Info</code>, and <code>Error</code> messages as appropriate. See
<code>examples/simple-filter-xml/main.go</code> for an example of how to use the
<code>LoggingClient</code>.</p>
<h3 id="eventclient">EventClient</h3>
<p>The <code>EventClient</code> exposed on the context is available to leverage Core
Data's <code>Event</code> API. See <a href="https://github.com/edgexfoundry/go-mod-core-contracts/blob/master/clients/coredata/event.go#L35">interface
definition</a>
for more details. This client is useful for querying events and is used
by the <a href="#markaspushed">MarkAsPushed</a> convenience API described below.</p>
<h3 id="valuedescriptorclient">ValueDescriptorClient</h3>
<p>The <code>ValueDescriptorClient</code> exposed on the context is available to
leverage Core Data's <code>ValueDescriptor</code> API. See <a href="https://github.com/edgexfoundry/go-mod-core-contracts/blob/master/clients/coredata/value_descriptor.go#L29">interface
definition</a>
for more details. Useful for looking up the value descriptor for a
reading received.</p>
<h3 id="commandclient">CommandClient</h3>
<p>The <code>CommandClient</code> exposed on the context is available to leverage Core
Command's <code>Command</code> API. See <a href="https://github.com/edgexfoundry/go-mod-core-contracts/blob/master/clients/command/client.go#L28">interface
definition</a>
for more details. Useful for sending commands to devices.</p>
<h3 id="notificationsclient">NotificationsClient</h3>
<p>The <code>CommandClient</code> exposed on the context is available to leverage
Support Notifications' <code>Notifications</code> API. See
<a href="https://github.com/edgexfoundry/go-mod-core-contracts/blob/master/clients/notifications/README.md">README</a>
for more details. Useful for sending notifications.</p>
<h3 id="note-about-clients">Note about Clients</h3>
<p>Each of the clients above is only initialized if the Clients section of
the configuration contains an entry for the service associated with the
Client API. If it isn't in the configuration the client will be <code>nil</code>.
Your code must check for <code>nil</code> to avoid panic in case it is missing from
the configuration. Only add the clients to your configuration that your
Application Service will actually be using. All application services
need the <code>Logging</code> and many will need <code>Core-Data</code>. The following is an
example <code>Clients</code> section of a configuration.toml with all supported
clients specified:</p>
<div class="codehilite"><pre><span></span><code><span class="k">[Clients]</span>
  <span class="k">[Clients.Logging]</span>
  <span class="na">Protocol</span> <span class="o">=</span> <span class="s">&quot;http&quot;</span>
<span class="s">  Host = &quot;localhost&quot;</span>
<span class="s">  Port = 48061</span>

  <span class="k">[Clients.CoreData]</span>
  <span class="na">Protocol</span> <span class="o">=</span> <span class="s">&#39;http&#39;</span>
<span class="s">  Host = &#39;localhost&#39;</span>
<span class="s">  Port = 48080</span>

  <span class="k">[Clients.Command]</span>
  <span class="na">Protocol</span> <span class="o">=</span> <span class="s">&#39;http&#39;</span>
<span class="s">  Host = &#39;localhost&#39;</span>
<span class="s">  Port = 48082</span>

  <span class="k">[Clients.Notifications]</span>
  <span class="na">Protocol</span> <span class="o">=</span> <span class="s">&#39;http&#39;</span>
<span class="s">  Host = &#39;localhost&#39;</span>
<span class="s">  Port = 48060</span>
</code></pre></div>


<h3 id="markaspushed">.MarkAsPushed()</h3>
<p><code>.MarkAsPushed()</code> is used to indicate to EdgeX Core Data that an event
has been "pushed" and is no longer required to be stored. The scheduler
service will purge all events that have been marked as pushed based on
the configured schedule. By default, it is once daily at midnight. If
you leverage the built in export functions (i.e.HTTP Export, or MQTT
Export), then the event will automatically be marked as pushed upon a
successful export. ### .PushToCore()
<code>.PushToCore(string deviceName, string readingName, byte[] value)</code> is
used to push data to EdgeX Core Data so that it can be shared with other
applications that are subscribed to the message bus that core-data
publishes to. <code>deviceName</code> can be set as you like along with the
<code>readingName</code> which will be set on the EdgeX event sent to CoreData.
This function will return the new EdgeX Event with the ID populated,
however the CorrelationId will not be available.</p>
<blockquote>
<p>NOTE: If validation is turned on in CoreServices then your
<code>deviceName</code> and <code>readingName</code> must exist in the CoreMetadata and be
properly registered in EdgeX.</p>
</blockquote>
<h3 id="setretrydata">.SetRetryData()</h3>
<p><code>.SetRetryData(payload []byte)</code> can be used to store data for later
retry. This is useful when creating a custom export function that needs
to retry on failure sending the data. The payload data will be stored
for later retry based on <code>Store and Forward</code> configuration. When the
retry is triggered, the function pipeline will be re-executed starting
with the function that called this API. That function will be passed the
stored data, so it is important that all transformations occur in
functions prior to the export function. The <code>Context</code> will also be
restored to the state when the function called this API. See <a href="#store-and-forward">Store and
Forward</a> for more details.</p>
<blockquote>
<p>NOTE: <code>Store and Forward</code> be must enabled when calling this API.</p>
</blockquote>
<h2 id="built-in-transformsfunctions">Built-In Transforms/Functions</h2>
<p>All transforms define a type and a <code>New</code> function which is used to
initialize an instance of the type with the required parameters. These
instances returned by these <code>New</code> functions give access to their
appropriate pipeline function pointers when build the function pipeline.</p>
<div class="codehilite"><pre><span></span><code><span class="err">E.G. NewFilter([] {&quot;Device1&quot;, &quot;Device2&quot;}).FilterByDeviceName</span>
</code></pre></div>


<h3 id="filtering">Filtering</h3>
<p>There are two basic types of filtering included in the SDK to add to
your pipeline. Theses provided Filter functions return a type of
events.Model. If filtering results in no remaining data, the pipeline
execution for that pass is terminated. If no values are provided for
filtering, then data flows through unfiltered.
-<code>NewFilter([]string filterValues)</code> - This function returns a <code>Filter</code>
instance initialized with the passed in filter values. This <code>Filter</code>
instance is used to access the following filter functions that will
operate using the specified filter values. -<code>FilterByDeviceName</code> - This
function will filter the event data down to the specified device names
and return the filtered data to the pipeline. -
<code>FilterByValueDescriptor</code> - This function will filter the event data
down to the specified device value descriptor and return the filtered
data to the pipeline.</p>
<h3 id="encryption">Encryption</h3>
<p>There is one encryption transform included in the SDK that can be added
to your pipeline.</p>
<ul>
<li><code>NewEncryption(key string, initializationVector string)</code> - This
    function returns a <code>Encryption</code> instance initialized with the passed
    in key and initialization vector. This <code>Encryption</code> instance is used
    to access the following encryption function that will use the
    specified key and initialization vector.<ul>
<li><code>EncryptWithAES</code> - This function receives a either a <code>string</code>,
    <code>[]byte</code>, or <code>json.Marshaller</code> type and encrypts it using AES
    encryption and returns a <code>[]byte</code> to the pipeline.</li>
</ul>
</li>
</ul>
<h3 id="conversion">Conversion</h3>
<p>There are two conversions included in the SDK that can be added to your
pipeline. These transforms return a <code>string</code>.</p>
<ul>
<li><code>NewConversion()</code> - This function returns a <code>Conversion</code> instance
    that is used to access the following conversion functions:<ul>
<li><code>TransformToXML</code> - This function receives an <code>events.Model</code>
    type, converts it to XML format and returns the XML string to
    the pipeline.</li>
<li><code>TransformToJSON</code> - This function receives an <code>events.Model</code>
    type and converts it to JSON format and returns the JSON string
    to the pipeline.</li>
</ul>
</li>
</ul>
<p>### Compressions There are two compression types included in the SDK
that can be added to your pipeline. These transforms return a <code>[]byte</code>.</p>
<ul>
<li><code>NewCompression()</code> - This function returns a <code>Compression</code> instance
    that is used to access the following compression functions:<ul>
<li><code>CompressWithGZIP</code> - This function receives either a
    <code>string</code>,<code>[]byte</code>, or <code>json.Marshaler</code> type, GZIP compresses the
    data, converts result to base64 encoded string, which is
    returned as a <code>[]byte</code> to the pipeline.</li>
<li><code>CompressWithZLIB</code> - This function receives either a
    <code>string</code>,<code>[]byte</code>, or <code>json.Marshaler</code> type, ZLIB compresses the
    data, converts result to base64 encoded string, which is
    returned as a <code>[]byte</code> to the pipeline.</li>
</ul>
</li>
</ul>
<h3 id="coredata-functions">CoreData Functions</h3>
<p>These are functions that enable interactions with the CoreData REST API.
- <code>NewCoreData()</code> - This function returns a <code>CoreData</code> instance. This
<code>CoreData</code> instance is used to access the following function(s). -
<code>MarkAsPushed</code> - This function provides the MarkAsPushed function from
the context as a First-Class Transform that can be called in your
pipeline. <a href="#.MarkAsPushed()">See Definition Above</a>. The data passed into
this function from the pipeline is passed along unmodifed since all
required information is provided on the context (EventId,
CorrelationId,etc.. ) - <code>PushToCore</code> - This function provides the
PushToCore function from the context as a First-Class Transform that can
be called in your pipeline. <a href="#.PushToCore()">See Definition Above</a>. The
data passed into this function from the pipeline is wrapped in an EdgeX
event with the <code>deviceName</code> and <code>readingName</code> that were set upon
instantiation and then sent to CoreData to be added as an event. Returns
the new EdgeX event with ID populated.</p>
<div class="codehilite"><pre><span></span><code><span class="o">&gt;</span> <span class="n">NOTE</span><span class="p">:</span> <span class="k">If</span> <span class="n">validation</span> <span class="k">is</span> <span class="n">turned</span> <span class="k">on</span> <span class="k">in</span> <span class="n">CoreServices</span> <span class="k">then</span> <span class="n">your</span> <span class="ss">`deviceName`</span> <span class="k">and</span> <span class="ss">`readingName`</span> <span class="n">must</span> <span class="n">exist</span> <span class="k">in</span> <span class="n">the</span> <span class="n">CoreMetadata</span> <span class="k">and</span> <span class="n">be</span> <span class="n">properly</span> <span class="n">registered</span> <span class="k">in</span> <span class="n">EdgeX</span><span class="p">.</span>
</code></pre></div>


<h3 id="export-functions">Export Functions</h3>
<p>There are two export functions included in the SDK that can be added to
your pipeline.
-<code>NewHTTPSender(url string, mimeType string, persistOnError bool)</code> -This
function returns a <code>HTTPSender</code> instance initialized with the passed in
url, mime type and persistOnError values. This <code>HTTPSender</code> instance is
used to access the following functions that will use the required url
and optional mime type and persistOnError:</p>
<ul>
<li>
<p><code>HTTPPost</code> - This function receives either a <code>string</code>,<code>[]byte</code>, or
    <code>json.Marshaler</code> type from the previous function in the pipeline and
    posts it to the configured endpoint. If no previous function exists,
    then the event that triggered the pipeline, marshaled to json, will
    be used. Currently, only unauthenticated endpoints are supported.
    Authenticated endpoints will be supported in the future. If the post
    fails and <code>persistOnError</code>is <code>true</code> and <code>Store and Forward</code> is
    enabled, the data will be stored for later retry. See <a href="#store-and-forward">Store and
    Forward</a> for more details</p>
</li>
<li>
<p><code>NewMQTTSender(logging logger.LoggingClient, addr models.Addressable, keyCertPair *KeyCertPair, mqttConfig MqttConfig, persistOnError bool)</code></p>
<p>- This function returns a <code>MQTTSender</code> instance initialized with
the passed in MQTT configuration . This <code>MQTTSender</code> instance is
used to access the following function that will use the specified
MQTT configuration</p>
<ul>
<li>
<p><code>KeyCertPair</code> - This structure holds the Key and Certificate
    information for when using secure <strong>TLS</strong> connection to the
    broker. Can be <code>nil</code> if not using secure <strong>TLS</strong> connection.</p>
</li>
<li>
<p><code>MqttConfig</code> - This structure holds addition MQTT configuration
    settings.</p>
<div class="codehilite"><pre><span></span><code><span class="err">Qos            byte</span>
<span class="err">Retain         bool</span>
<span class="err">AutoReconnect  bool</span>
<span class="err">SkipCertVerify bool</span>
<span class="err">User           string</span>
<span class="err">Password       string</span>
</code></pre></div>


<p>The <code>GO</code> complier will default these to <code>0</code>, <code>false</code> and <code>""</code>,
so you only need to set the fields that your usage requires that
differ from the default.</p>
</li>
<li>
<p><code>MQTTSend</code> - This function receives either a <code>string</code>,<code>[]byte</code>,
    or <code>json.Marshaler</code> type from the previous function in the
    pipeline and sends it to the specified MQTT broker. If no
    previous function exists, then the event that triggered the
    pipeline, marshaled to json, will be used. If the send fails and
    <code>persistOnError</code>is <code>true</code> and <code>Store and Forward</code> is enabled,
    the data will be stored for later retry. See <a href="#store-and-forward">Store and
    Forward</a> for more details</p>
</li>
</ul>
</li>
</ul>
<h3 id="output-functions">Output Functions</h3>
<p>There is one output function included in the SDK that can be added to
your pipeline.</p>
<ul>
<li>NewOutput() - This function returns a <code>Output</code> instance that is used
    to access the following output function:<ul>
<li><code>SetOutput</code> - This function receives either a <code>string</code>,<code>[]byte</code>,
    or <code>json.Marshaler</code> type from the previous function in the
    pipeline and sets it as the output data for the pipeline to
    return to the configured trigger. If configured to use message
    bus, the data will be published to the message bus as determined
    by the <code>MessageBus</code> and <code>Binding</code> configuration. If configured
    to use HTTP trigger the data is returned as the HTTP response.
    Note that calling Complete() from the Context API in a custom
    function can be used in place of adding this function to your
    pipeline</li>
</ul>
</li>
</ul>
<h2 id="configuration">Configuration</h2>
<p>Similar to other EdgeX services, configuration is first determined by
the <code>configuration.toml</code> file in the <code>/res</code> folder. If <code>-r</code> is passed to
the application on startup, the SDK will leverage the provided registry
(i.e Consul) to push configuration from the file into the registry and
monitor configuration from there. You will find the configuration under
the <code>edgex/appservices/1.0/</code> key. There are two primary sections in the
<code>configuration.toml</code> file that will need to be set that are specific to
the AppFunctionsSDK. 1) <code>[Binding]</code> - This specifies the
<a href="#triggers">trigger</a> type and associated data required to configure a
trigger.</p>
<div class="codehilite"><pre><span></span><code><span class="k">[Binding]</span>
<span class="n">Type</span><span class="o">=</span><span class="s">&quot;&quot;</span>
<span class="n">SubscribeTopic</span><span class="o">=</span><span class="s">&quot;&quot;</span>
<span class="n">PublishTopic</span><span class="o">=</span><span class="s">&quot;&quot;</span>
</code></pre></div>


<p>2)  <code>[ApplicationSettings]</code> - Is used for custom application settings
    and is accessed via the ApplicationSettings() API. The
    ApplicationSettings API returns a <code>map[string] string</code> containing
    the contents on the ApplicationSetting section of the
    <code>configuration.toml</code> file.</p>
<div class="codehilite"><pre><span></span><code><span class="k">[ApplicationSettings]</span>
<span class="n">ApplicationName</span> <span class="o">=</span> <span class="s">&quot;My Application Service&quot;</span>
</code></pre></div>


<h2 id="error-handling">Error Handling</h2>
<ul>
<li>Each transform returns a <code>true</code> or <code>false</code> as part of the return
    signature. This is called the <code>continuePipeline</code> flag and indicates
    whether the SDK should continue calling successive transforms in the
    pipeline.</li>
<li><code>return false, nil</code> will stop the pipeline and stop processing the
    event. This is useful for example when filtering on values and
    nothing matches the criteria you've filtered on.</li>
<li><code>return false, error</code>, will stop the pipeline as well and the SDK
    will log the errorString you have returned.</li>
<li>Returning <code>true</code> tells the SDK to continue, and will call the next
    function in the pipeline with your result.</li>
<li>The SDK will return control back to main when receiving a
    SIGTERM/SIGINT event to allow for custom clean up.</li>
</ul>
<h2 id="advanced-topics">Advanced Topics</h2>
<p>The following items discuss topics that are a bit beyond the basic use
cases of the Application Functions SDK when interacting with EdgeX.</p>
<h3 id="configurable-functions-pipeline">Configurable Functions Pipeline</h3>
<p>This SDK provides the capability to define the functions pipeline via
configuration rather than code using the <strong>app-service-configurable</strong>
application service. See <strong>app-service-configurable</strong>
<a href="https://github.com/edgexfoundry/app-service-configurable/blob/master/README.md">README</a>
for more details.</p>
<h3 id="using-the-webserver">Using The Webserver</h3>
<p>It is not uncommon to require your own API endpoints when building an
app service. Rather than spin up your own webserver inside of your app
(alongside the already existing running webserver), we've exposed a
method that allows you add your own routes to the existing webserver. A
few routes are reserved and cannot be used: - /api/version -/api/v1/ping
- /api/v1/metrics - /api/v1/config - /api/v1/trigger To add your own
route, use the
<code>AddRoute(route string, handler func(nethttp.ResponseWriter, *nethttp.Request), methods ...string)</code>
function provided on the sdk. Here's an example:</p>
<div class="codehilite"><pre><span></span><code><span class="err">edgexSdk.AddRoute(&quot;/myroute&quot;, func(writer http.ResponseWriter, req *http.Request) {</span>
<span class="err">    context := req.Context().Value(appsdk.SDKKey).(*appsdk.AppFunctionsSDK) </span>
<span class="err">        context.LoggingClient.Info(&quot;TEST&quot;) // alternative to edgexSdk.LoggingClient.Info(&quot;TEST&quot;)</span>
<span class="err">        writer.Header().Set(&quot;Content-Type&quot;, &quot;text/plain&quot;)</span>
<span class="err">        writer.Write([]byte(&quot;hello&quot;))</span>
<span class="err">        writer.WriteHeader(200)</span>
<span class="err">}, &quot;GET&quot;)</span>
</code></pre></div>


<p>Under the hood, this simply adds the provided route, handler, and method
to the gorilla <code>mux.Router</code> we use in the SDK. For more information you
can check out the github repo <a href="https://github.com/gorilla/mux">here</a>.
You can access the resources such as the logging client by accessing the
context as shown above -- this is useful for when your routes might not
be defined in your main.go where you have access to the <code>edgexSdk</code>
instance.</p>
<h3 id="target-type">Target Type</h3>
<p>The target type is the object type of the incoming data that is sent to
the first function in the function pipeline. By default this is an EdgeX
<code>Event</code> since typical usage is receiving <code>events</code> from Core Data via
Message Bus.</p>
<p>For other usages where the data is not <code>events</code> coming from Core Data,
the <code>TargetType</code> of the accepted incoming data can be set when the SDK
instance is created. There are scenarios where the incoming data is not
an EdgeX <code>Event</code>. One example scenario is 2 application services are
chained via the Message Bus. The output of the first service back to the
Messages Bus is inference data from analyzing the original input
<code>Event</code>data. The second service needs to be able to let the SDK know the
target type of the input data it is expecting.</p>
<p>For usages where the incoming data is not <code>events</code>, the <code>TargetType</code> of
the excepted incoming data can the set when the SDK instance is created.</p>
<p>Example:</p>
<div class="codehilite"><pre><span></span><code><span class="k">type</span> <span class="n">Person</span> <span class="n">struct</span> <span class="err">{</span>
    <span class="n">FirstName</span> <span class="n">string</span> <span class="o">`</span><span class="n">json</span><span class="p">:</span><span class="ss">&quot;first_name&quot;</span><span class="o">`</span>
    <span class="n">LastName</span>  <span class="n">string</span> <span class="o">`</span><span class="n">json</span><span class="p">:</span><span class="ss">&quot;last_name&quot;</span><span class="o">`</span>
<span class="err">}</span>

<span class="n">edgexSdk</span> <span class="p">:</span><span class="o">=</span> <span class="o">&amp;</span><span class="n">appsdk</span><span class="p">.</span><span class="n">AppFunctionsSDK</span> <span class="err">{</span>
    <span class="n">ServiceKey</span><span class="p">:</span> <span class="n">serviceKey</span><span class="p">,</span> 
    <span class="n">TargetType</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">Person</span><span class="err">{}</span><span class="p">,</span>
<span class="err">}</span>
</code></pre></div>


<p>Note that <code>TargetType</code> must be set to a pointer to an instance of your
target type such as <code>&amp;Person{}</code> . The first function in your function
pipeline will be passed an instance of your target type, not a pointer
to it. In the example above the first function in the pipeline would
start something like:</p>
<div class="codehilite"><pre><span></span><code><span class="n">func</span> <span class="n">MyPersonFunction</span><span class="p">(</span><span class="n">edgexcontext</span> <span class="o">*</span><span class="n">appcontext</span><span class="p">.</span><span class="n">Context</span><span class="p">,</span> <span class="n">params</span> <span class="p">...</span><span class="n">interface</span><span class="err">{}</span><span class="p">)</span> <span class="p">(</span><span class="n">bool</span><span class="p">,</span> <span class="n">interface</span><span class="err">{}</span><span class="p">)</span> <span class="err">{</span>

    <span class="n">edgexcontext</span><span class="p">.</span><span class="n">LoggingClient</span><span class="p">.</span><span class="n">Debug</span><span class="p">(</span><span class="ss">&quot;MyPersonFunction&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">len</span><span class="p">(</span><span class="n">params</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="err">{</span>
        <span class="o">//</span> <span class="n">We</span> <span class="n">didn</span><span class="err">&#39;</span><span class="n">t</span> <span class="n">receive</span> <span class="n">a</span> <span class="k">result</span>
        <span class="k">return</span> <span class="k">false</span><span class="p">,</span> <span class="n">nil</span>
    <span class="err">}</span>

    <span class="n">person</span><span class="p">,</span> <span class="n">ok</span> <span class="p">:</span><span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="mi">0</span><span class="p">].(</span><span class="n">Person</span><span class="p">)</span>
    <span class="k">if</span> <span class="o">!</span><span class="n">ok</span> <span class="err">{</span>
        <span class="k">return</span> <span class="k">false</span><span class="p">,</span> <span class="n">errors</span><span class="p">.</span><span class="k">New</span><span class="p">(</span><span class="ss">&quot;type received is not a Person&quot;</span><span class="p">)</span>
    <span class="err">}</span>

    <span class="p">....</span>
</code></pre></div>


<p>The SDK supports unmarshaling JSON or CBOR encoded data into an instance
of the target type. If your incoming data is not JSON or CBOR encoded,
you then need to set the <code>TargetType</code> to <code>&amp;[]byte</code>.</p>
<p>If the target type is set to <code>&amp;[]byte</code> the incoming data will not be
unmarshaled. The content type, if set, will be passed as the second
parameter to the first function in your pipeline. Your first function
will be responsible for decoding the data or not.</p>
<h3 id="command-line-options">Command Line Options</h3>
<p>The following command line options are available</p>
<div class="codehilite"><pre><span></span><code><span class="err">-c=&lt;path&gt;</span>
<span class="err">--confdir=&lt;path&gt;</span>
<span class="err">      Specify an alternate configuration directory.</span>
<span class="err">-p=&lt;profile&gt;</span>
<span class="err">--profile=&lt;profile&gt;</span>
<span class="err">      Specify a profile other than default.</span>
<span class="err">-r    </span>
<span class="err">--registry</span>
<span class="err">      Indicates the service should use the registry.</span>
<span class="err">-o    </span>
<span class="err">-overwrite</span>
<span class="err">      Overwrite configuration in the Registry with local values.</span>
<span class="err">-s    </span>
<span class="err">-skipVersionCheck</span>
<span class="err">      Indicates the service should skip the Core Service&#39;s version compatibility check.</span>
</code></pre></div>


<p>Examples:</p>
<div class="codehilite"><pre><span></span><code><span class="err">simple-filter-xml -r -c=./res -p=docker</span>
</code></pre></div>


<p>or</p>
<div class="codehilite"><pre><span></span><code><span class="err">simple-filter-xml --registry --confdir=./res --profile=docker</span>
</code></pre></div>


<h3 id="environment-variable-overrides">Environment Variable Overrides</h3>
<p>All the configuration settings from the configuration.toml file can be
overridden by environment variables. Except for two special cases listed
below, the overrides <strong>only</strong> occur when the configuration values are
first pushed into the Registry. Once the values are in the Registry, the
Registry values are always used.</p>
<p>The environment variable names have the following format:</p>
<div class="codehilite"><pre><span></span><code><span class="err">&lt;TOML Key&gt;</span>
<span class="err">&lt;TOML Section&gt;_&lt;TOML Key&gt;</span>
<span class="err">&lt;TOML Section&gt;_&lt;TOML Sub-Section&gt;_&lt;TOML Key&gt;</span>
</code></pre></div>


<p>Examples:</p>
<div class="codehilite"><pre><span></span><code><span class="n">TOML</span><span class="w">   </span><span class="err">:</span><span class="w"> </span><span class="n">FailLimit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="w"></span>
<span class="n">ENVVAR</span><span class="w"> </span><span class="err">:</span><span class="w"> </span><span class="n">FailLimit</span><span class="o">=</span><span class="mi">100</span><span class="w"></span>

<span class="n">TOML</span><span class="w">   </span><span class="err">:</span><span class="w"> </span><span class="o">[</span><span class="n">Logging</span><span class="o">]</span><span class="w"></span>
<span class="w">         </span><span class="n">EnableRemote</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">false</span><span class="w"></span>
<span class="n">ENVVAR</span><span class="w"> </span><span class="err">:</span><span class="w"> </span><span class="n">Logging</span><span class="p">.</span><span class="n">EnableRemote</span><span class="o">=</span><span class="k">true</span><span class="w"></span>

<span class="n">TOML</span><span class="w">   </span><span class="err">:</span><span class="w"> </span><span class="o">[</span><span class="n">Clients</span><span class="o">]</span><span class="w"></span>
<span class="w">            </span><span class="o">[</span><span class="n">Clients.CoreData</span><span class="o">]</span><span class="w"></span>
<span class="w">            </span><span class="k">Host</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;localhost&#39;</span><span class="w"></span>
<span class="n">ENVVAR</span><span class="w"> </span><span class="err">:</span><span class="w"> </span><span class="n">Clients_CoreData_Host</span><span class="o">=</span><span class="n">edgex</span><span class="o">-</span><span class="n">core</span><span class="o">-</span><span class="k">data</span><span class="w"></span>
</code></pre></div>


<h4 id="edgex_registry">edgex_registry</h4>
<p>This environment variable overrides the Registry connection information
and occurs every time the application service starts. The value is in
the format of a URL.</p>
<div class="codehilite"><pre><span></span><code><span class="n">edgex_registry</span><span class="o">=</span><span class="n">consul</span><span class="p">:</span><span class="o">//</span><span class="n">edgex</span><span class="o">-</span><span class="n">core</span><span class="o">-</span><span class="n">consul</span><span class="p">:</span><span class="mi">8500</span>

<span class="n">This</span> <span class="k">sets</span> <span class="n">the</span> <span class="n">Registry</span> <span class="n">information</span> <span class="n">fields</span> <span class="k">as</span> <span class="n">follows</span><span class="p">:</span>
    <span class="k">Type</span><span class="p">:</span> <span class="n">consul</span>
    <span class="k">Host</span><span class="p">:</span> <span class="n">edgex</span><span class="o">-</span><span class="n">core</span><span class="o">-</span><span class="n">consul</span>
    <span class="n">Port</span><span class="p">:</span> <span class="mi">8500</span>
</code></pre></div>


<h4 id="edgex_service">edgex_service</h4>
<p>This environment variable overrides the Service connection information
and occurs every time the application service starts. The value is in
the format of a URL.</p>
<div class="codehilite"><pre><span></span><code><span class="n">edgex_service</span><span class="o">=</span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mi">192</span><span class="p">.</span><span class="mi">168</span><span class="p">.</span><span class="mi">1</span><span class="p">.</span><span class="mi">2</span><span class="p">:</span><span class="mi">4903</span>

<span class="n">This</span> <span class="k">sets</span> <span class="n">the</span> <span class="n">Service</span> <span class="n">information</span> <span class="n">fields</span> <span class="k">as</span> <span class="n">follows</span><span class="p">:</span>
    <span class="n">Protocol</span><span class="p">:</span> <span class="n">http</span>
    <span class="k">Host</span><span class="p">:</span> <span class="mi">192</span><span class="p">.</span><span class="mi">168</span><span class="p">.</span><span class="mi">1</span><span class="p">.</span><span class="mi">2</span>
    <span class="n">Port</span><span class="p">:</span> <span class="mi">4903</span>
</code></pre></div>


<h4 id="edgex_profile">edgex_profile</h4>
<p>This environment variable overrides the command line <code>profile</code> argument.
It will replace the current value passed via the <code>-p</code> or <code>--profile</code>, if
one exists. If not specified it will add the <code>--profile</code> argument. This
is useful when running the service via docker-compose.</p>
<p>Using docker-compose:</p>
<div class="codehilite"><pre><span></span><code><span class="c">app-service-configurable-rules:</span>
<span class="c">  image: edgexfoundry/docker-app-service-configurable:1.1.0</span>
<span class="c">  environment: </span>
<span class="c">    - edgex_profile : &quot;rules-engine&quot;</span>
<span class="c">  ports:</span>
<span class="c">    - &quot;48095:48095&quot;</span>
<span class="c">  container_name: edgex-app-service-configurable</span>
<span class="c">  hostname: edgex-app-service-configurable</span>
<span class="c">  networks:</span>
<span class="c">    edgex-network:</span>
<span class="c">      aliases:</span>
<span class="c">        - edgex-app-service-configurable</span>
<span class="c">  depends_on:</span>
<span class="c">    - data</span>
<span class="c">    - command</span>
</code></pre></div>


<p>This sets the <code>--profile=docker-rules-engine</code> command line argument so
that the application service uses the <code>docker-rules-engine</code>
configuration profile which resides at
<code>/res/docker-rules-engine/configuration.toml</code></p>
<blockquote>
<p><em>Note that Application Services no longer use docker profiles. They
use Environment Overrides in the docker compose file to make the
necessary changes to the configuration for running in Docker. See
the</em><strong>Environment Variable Overrides For Docker</strong><em>section in</em><a href="https://github.com/edgexfoundry/app-service-configurable/blob/master/README.md#environment-variable-overrides-for-docker">App
Service Configurable's
README</a>
for more details and an example.</p>
</blockquote>
<h3 id="store-and-forward">Store and Forward</h3>
<p>The Store and Forward capability allows for export functions to persist
data on failure and for the export of the data to be retried at a later
time.</p>
<blockquote>
<p><em>Note: The order the data exported via this retry mechanism is not
guaranteed to be the same order in which the data was initial received
from Core Data</em></p>
</blockquote>
<h4 id="configuration_1">Configuration</h4>
<p>Two sections of configuration have been added for Store and Forward.</p>
<p><code>Writable.StoreAndForward</code> allows enabling, setting the interval between
retries and the max number of retries. If running with Registry, these
setting can be changed on the fly without having to restart the service.</p>
<div class="codehilite"><pre><span></span><code><span class="k">[Writable.StoreAndForward]</span>
  <span class="n">Enabled</span> <span class="o">=</span> <span class="kc">false</span>
  <span class="n">RetryInterval</span> <span class="o">=</span> <span class="s">&#39;5m&#39;</span>
  <span class="n">MaxRetryCount</span> <span class="o">=</span> <span class="mi">10</span>
</code></pre></div>


<p>Database describes which database type to use, <code>mongodb</code> or <code>redisdb</code>,
and the information required to connect to the database. This section is
required if Store and Forward is enabled, otherwise it is currently
optional.</p>
<div class="codehilite"><pre><span></span><code><span class="k">[Database]</span>
<span class="n">Type</span> <span class="o">=</span> <span class="s">&quot;mongodb&quot;</span>
<span class="n">Host</span> <span class="o">=</span> <span class="s">&quot;localhost&quot;</span>
<span class="n">Port</span> <span class="o">=</span> <span class="mi">27017</span>
<span class="n">Timeout</span> <span class="o">=</span> <span class="s">&#39;5s&#39;</span>
<span class="n">Username</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
<span class="n">Password</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
</code></pre></div>


<h4 id="how-it-works">How it works</h4>
<p>When an export function encounters an error sending data it can call
<code>SetRetryData(payload []byte)</code> on the Context. This will store the data
for later retry. If the application service is stop and then restarted
while stored data hasn't been successfully exported, the export retry
will resume once the service is up and running again.</p>
<blockquote>
<p><em>Note: It is important that export functions return an error and stop
pipeline execution</em> after the call to <code>SetRetryData</code>. See
<a href="https://github.com/edgexfoundry/app-functions-sdk-go/blob/master/pkg/transforms/http.go">HTTPPost</a>
function in SDK as an example</p>
</blockquote>
<p>When the <code>RetryInterval</code> expires, the function pipeline will be
re-executed starting with the export function that saved the data. The
saved data will be passed to the export function which can then attempt
to resend the data.</p>
<blockquote>
<p><em>NOTE: The export function will receive the data as it was stored, so
it is important that any transformation of the data occur in functions
prior to the export function. The export function should only export
the data that it receives.</em></p>
</blockquote>
<p>One of three out comes can occur after the export retried has completed.</p>
<ol>
<li>
<p>Export retry was successful</p>
<p>In this case the stored data is removed from the database and the
execution of the pipeline functions after the export function, if
any, continues.</p>
</li>
<li>
<p>Export retry fails and retry count <code>has not been</code> exceeded</p>
<p>In this case the store data is updated in the database with the
incremented retry count</p>
</li>
<li>
<p>Export retry fails and retry count <code>has been</code> exceeded</p>
<p>In this case the store data is removed from the database and never
retried again.</p>
</li>
</ol>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../Ch-ApplicationServices/" title="Application Services" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Application Services
              </span>
            </div>
          </a>
        
        
          <a href="../Ch-HTTPTrigger/" title="HTTP Trigger" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                HTTP Trigger
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2020 EdgeX Foundry
          </div>
        
        powered by
        <a href="https://www.mkdocs.org" target="_blank" rel="noopener">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/edgexfoundry" target="_blank" rel="noopener" title="github" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://twitter.com/edgexfoundry" target="_blank" rel="noopener" title="twitter" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://www.linkedin.com/company/edgexfoundry" target="_blank" rel="noopener" title="linkedin" class="md-footer-social__link fa fa-linkedin"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/application.c33a9706.js"></script>
      
      <script>app.initialize({version:"1.1",url:{base:"../../.."}})</script>
      
        <script src="../../../assets/javascripts/version-select.js"></script>
      
    
  </body>
</html>