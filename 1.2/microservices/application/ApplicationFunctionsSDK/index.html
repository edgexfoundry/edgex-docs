


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for use of EdgeX Foundry">
      
      
        <link rel="canonical" href="https://edgexfoundry.github.io/edgex-docs/microservices/application/ApplicationFunctionsSDK/">
      
      
        <meta name="author" content="Michael Johanson">
      
      <link rel="shortcut icon" href="../../../assets/logo_edgex.png">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-5.1.0">
    
    
      
        <title>App Functions SDK - EdgeX Foundry Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.89dc9fe3.min.css">
      
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/version-select.css">
    
      <link rel="stylesheet" href="../../../assets/stylesheets/branding.css">
    
    
      
        
<link rel="preconnect dns-prefetch" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-82811140-6","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}),document.addEventListener("DOMContentSwitch",function(){ga("send","pageview")})</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
  
    <body dir="ltr">
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#app-functions-sdk" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://edgexfoundry.github.io/edgex-docs/" title="EdgeX Foundry Documentation" class="md-header-nav__button md-logo" aria-label="EdgeX Foundry Documentation">
      
  <img src="../../../assets/logo_edgex_white.png" alt="logo">

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z" /></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            EdgeX Foundry Documentation
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              App Functions SDK
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" /></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" /></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" /></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/edgexfoundry/edgex-go/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    edgex/edgex-go
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
          

  

<nav class="md-tabs md-tabs--active" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../../.." class="md-tabs__link">
        Introduction
      </a>
    
  </li>

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../../getting-started/" class="md-tabs__link">
          Getting Started
        </a>
      
    </li>
  

      
        
  
  
    
    
  
  
    <li class="md-tabs__item">
      
        <a href="../../core/data/Ch-CoreData/" class="md-tabs__link">
          Microservices
        </a>
      
    </li>
  

  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../../examples/Ch-ExamplesProvisionDevice/" class="md-tabs__link">
          Examples and Tutorials
        </a>
      
    </li>
  

      
        
  
  
    
    
  
  
    <li class="md-tabs__item">
      
        <a href="../../../api/core/Ch-APICoreCommand/" class="md-tabs__link">
          API Reference
        </a>
      
    </li>
  

  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../../design/" class="md-tabs__link">
          Architectural Decision Records
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://edgexfoundry.github.io/edgex-docs/" title="EdgeX Foundry Documentation" class="md-nav__button md-logo" aria-label="EdgeX Foundry Documentation">
      
  <img src="../../../assets/logo_edgex_white.png" alt="logo">

    </a>
    EdgeX Foundry Documentation
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/edgexfoundry/edgex-go/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    edgex/edgex-go
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Getting Started
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Getting Started" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Getting Started
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/" title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/quick-start/" title="Quick Start" class="md-nav__link">
      Quick Start
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-3" type="checkbox" id="nav-2-3">
    
    <label class="md-nav__link" for="nav-2-3">
      Users
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Users" data-md-level="2">
      <label class="md-nav__title" for="nav-2-3">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Users
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/Ch-GettingStartedUsers/" title="Getting Started - Users" class="md-nav__link">
      Getting Started - Users
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-4" type="checkbox" id="nav-2-4">
    
    <label class="md-nav__link" for="nav-2-4">
      Developers
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Developers" data-md-level="2">
      <label class="md-nav__title" for="nav-2-4">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Developers
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/Ch-GettingStartedDevelopers/" title="Getting Started - Developers" class="md-nav__link">
      Getting Started - Developers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/Ch-GettingStartedGoDevelopers/" title="Get EdgeX Foundry - Go Developers" class="md-nav__link">
      Get EdgeX Foundry - Go Developers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/Ch-GettingStartedHybrid/" title="Working in a Hybrid Environment" class="md-nav__link">
      Working in a Hybrid Environment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/ApplicationFunctionsSDK/" title="Application Functions SDK" class="md-nav__link">
      Application Functions SDK
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-4-5" type="checkbox" id="nav-2-4-5">
    
    <label class="md-nav__link" for="nav-2-4-5">
      Device Services
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Device Services" data-md-level="3">
      <label class="md-nav__title" for="nav-2-4-5">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Device Services
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/Ch-GettingStartedSDK/" title="Device Service SDK" class="md-nav__link">
      Device Service SDK
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/Ch-GettingStartedSDK-C/" title="C SDK" class="md-nav__link">
      C SDK
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/Ch-GettingStartedSDK-Go/" title="Golang SDK" class="md-nav__link">
      Golang SDK
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/Ch-GettingStartedUsersNexus/" title="Getting Docker Images from EdgeX Nexus Repository" class="md-nav__link">
      Getting Docker Images from EdgeX Nexus Repository
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Microservices
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Microservices" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Microservices
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-1" type="checkbox" id="nav-3-1">
    
    <label class="md-nav__link" for="nav-3-1">
      Core Services
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Core Services" data-md-level="2">
      <label class="md-nav__title" for="nav-3-1">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Core Services
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../core/data/Ch-CoreData/" title="Core Data" class="md-nav__link">
      Core Data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../core/metadata/Ch-Metadata/" title="Metadata" class="md-nav__link">
      Metadata
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../core/command/Ch-Command/" title="Command" class="md-nav__link">
      Command
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-2" type="checkbox" id="nav-3-2">
    
    <label class="md-nav__link" for="nav-3-2">
      Supporting Services
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Supporting Services" data-md-level="2">
      <label class="md-nav__title" for="nav-3-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Supporting Services
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../support/Ch-SupportingServices/" title="Supporting Services Microservices" class="md-nav__link">
      Supporting Services Microservices
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../support/logging/Ch-Logging/" title="Logging" class="md-nav__link">
      Logging
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../support/notifications/Ch-AlertsNotifications/" title="Alerts & Notifications" class="md-nav__link">
      Alerts & Notifications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../support/rulesengine/Ch-RulesEngine/" title="Rules Engine" class="md-nav__link">
      Rules Engine
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../support/scheduler/Ch-Scheduling/" title="Scheduling" class="md-nav__link">
      Scheduling
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-3" type="checkbox" id="nav-3-3">
    
    <label class="md-nav__link" for="nav-3-3">
      System Management
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="System Management" data-md-level="2">
      <label class="md-nav__title" for="nav-3-3">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        System Management
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../system-management/agent/Ch_SysMgmtAgent/" title="System Management Agent (SMA)" class="md-nav__link">
      System Management Agent (SMA)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-4" type="checkbox" id="nav-3-4">
    
    <label class="md-nav__link" for="nav-3-4">
      Security
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Security" data-md-level="2">
      <label class="md-nav__title" for="nav-3-4">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Security
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../security/Ch-Security/" title="Security" class="md-nav__link">
      Security
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../security/Ch-SecretStore/" title="Secret Store" class="md-nav__link">
      Secret Store
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../security/Ch-APIGateway/" title="API Gateway" class="md-nav__link">
      API Gateway
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../security/Ch-AccessEdgeXRESTResources/" title="Access EdgeX REST resources" class="md-nav__link">
      Access EdgeX REST resources
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../security/Ch-StartingSecurity/" title="Starting security services within EdgeX" class="md-nav__link">
      Starting security services within EdgeX
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../security/Ch-SecurityIssues/" title="Security Issues" class="md-nav__link">
      Security Issues
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-5" type="checkbox" id="nav-3-5">
    
    <label class="md-nav__link" for="nav-3-5">
      Devices Services
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Devices Services" data-md-level="2">
      <label class="md-nav__title" for="nav-3-5">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Devices Services
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../device/Ch-DeviceServices/" title="Device Services Microservices" class="md-nav__link">
      Device Services Microservices
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../device/profile/Ch-DeviceProfile/" title="Device Profile" class="md-nav__link">
      Device Profile
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../device/sdk/Ch-DeviceSDK/" title="Device Services SDK" class="md-nav__link">
      Device Services SDK
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../device/virtual/Ch-VirtualDevice/" title="Virtual Device" class="md-nav__link">
      Virtual Device
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-6" type="checkbox" id="nav-3-6" checked>
    
    <label class="md-nav__link" for="nav-3-6">
      App Services
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="App Services" data-md-level="2">
      <label class="md-nav__title" for="nav-3-6">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        App Services
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../ApplServices/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ApplicationServices/" title="Application Services" class="md-nav__link">
      Application Services
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Triggers/" title="Triggers" class="md-nav__link">
      Triggers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../AppServiceConfigurable/" title="App Service Configurable" class="md-nav__link">
      App Service Configurable
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        App Functions SDK
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3,9H17V7H3V9M3,13H17V11H3V13M3,17H17V15H3V17M19,17H21V15H19V17M19,7V9H21V7H19M19,13H21V11H19V13Z" /></svg>
        </span>
      </label>
    
    <a href="./" title="App Functions SDK" class="md-nav__link md-nav__link--active">
      App Functions SDK
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#context-api" class="md-nav__link">
    Context API
  </a>
  
    <nav class="md-nav" aria-label="Context API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#loggingclient" class="md-nav__link">
    LoggingClient
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eventclient" class="md-nav__link">
    EventClient
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#valuedescriptorclient" class="md-nav__link">
    ValueDescriptorClient
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#commandclient" class="md-nav__link">
    CommandClient
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notificationsclient" class="md-nav__link">
    NotificationsClient
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note-about-clients" class="md-nav__link">
    Note about Clients
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#markaspushed" class="md-nav__link">
    .MarkAsPushed()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pushtocore" class="md-nav__link">
    .PushToCore()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#complete" class="md-nav__link">
    .Complete()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setretrydata" class="md-nav__link">
    .SetRetryData()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getsecrets" class="md-nav__link">
    .GetSecrets()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#built-in-transformsfunctions" class="md-nav__link">
    Built-In Transforms/Functions
  </a>
  
    <nav class="md-nav" aria-label="Built-In Transforms/Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#filtering" class="md-nav__link">
    Filtering
  </a>
  
    <nav class="md-nav" aria-label="Filtering">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#json-logic" class="md-nav__link">
    JSON Logic
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#encryption" class="md-nav__link">
    Encryption
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#batch" class="md-nav__link">
    Batch
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conversion" class="md-nav__link">
    Conversion
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compressions" class="md-nav__link">
    Compressions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#coredata-functions" class="md-nav__link">
    CoreData Functions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#export-functions" class="md-nav__link">
    Export Functions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#output-functions" class="md-nav__link">
    Output Functions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    Configuration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-handling" class="md-nav__link">
    Error Handling
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-topics" class="md-nav__link">
    Advanced Topics
  </a>
  
    <nav class="md-nav" aria-label="Advanced Topics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configurable-functions-pipeline" class="md-nav__link">
    Configurable Functions Pipeline
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-the-webserver" class="md-nav__link">
    Using The Webserver
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#target-type" class="md-nav__link">
    Target Type
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#command-line-options" class="md-nav__link">
    Command Line Options
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment-variable-overrides" class="md-nav__link">
    Environment Variable Overrides
  </a>
  
    <nav class="md-nav" aria-label="Environment Variable Overrides">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#edgex_registry" class="md-nav__link">
    edgex_registry
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#edgex_service" class="md-nav__link">
    edgex_service
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#edgex_profile" class="md-nav__link">
    edgex_profile
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#store-and-forward" class="md-nav__link">
    Store and Forward
  </a>
  
    <nav class="md-nav" aria-label="Store and Forward">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration_1" class="md-nav__link">
    Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-it-works" class="md-nav__link">
    How it works
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secrets" class="md-nav__link">
    Secrets
  </a>
  
    <nav class="md-nav" aria-label="Secrets">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration_2" class="md-nav__link">
    Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#storing-secrets" class="md-nav__link">
    Storing Secrets
  </a>
  
    <nav class="md-nav" aria-label="Storing Secrets">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#secure-mode" class="md-nav__link">
    Secure Mode
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#insecure-mode" class="md-nav__link">
    Insecure Mode
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getting-secrets" class="md-nav__link">
    Getting Secrets
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../configuration/Ch-Configuration/" title="Configuration and Registry" class="md-nav__link">
      Configuration and Registry
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Examples and Tutorials
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Examples and Tutorials" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Examples and Tutorials
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../examples/Ch-ExamplesProvisionDevice/" title="Provison a Device - Modbus Example" class="md-nav__link">
      Provison a Device - Modbus Example
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../examples/Ch-ExamplesModbusdatatypeconversion/" title="Modbus - Data Type Conversion" class="md-nav__link">
      Modbus - Data Type Conversion
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../examples/Ch-ExamplesVirtualDeviceService/" title="Using the Virtual Device Service" class="md-nav__link">
      Using the Virtual Device Service
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../examples/Ch-ExamplesRandomDeviceService/" title="Random Integer Device Service Example" class="md-nav__link">
      Random Integer Device Service Example
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../examples/Ch-ExamplesSendingAndConsumingBinary/" title="Sending and Consuming Binary Data From EdgeX Device Services" class="md-nav__link">
      Sending and Consuming Binary Data From EdgeX Device Services
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../examples/AppServiceExamples/" title="App Service Examples" class="md-nav__link">
      App Service Examples
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-7" type="checkbox" id="nav-4-7">
    
    <label class="md-nav__link" for="nav-4-7">
      Adding a Device
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Adding a Device" data-md-level="2">
      <label class="md-nav__title" for="nav-4-7">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Adding a Device
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../examples/Ch-ExamplesAddingModbusDevice/" title="Modbus" class="md-nav__link">
      Modbus
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../examples/Ch-ExamplesAddingSNMPDevice/" title="SNMP" class="md-nav__link">
      SNMP
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../examples/Ch-ExamplesAddingMQTTDevice/" title="MQTT" class="md-nav__link">
      MQTT
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-8" type="checkbox" id="nav-4-8">
    
    <label class="md-nav__link" for="nav-4-8">
      Walkthrough
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Walkthrough" data-md-level="2">
      <label class="md-nav__title" for="nav-4-8">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Walkthrough
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../walk-through/Ch-Walkthrough/" title="EdgeX Demonstration API Walk Through" class="md-nav__link">
      EdgeX Demonstration API Walk Through
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../walk-through/Ch-WalkthroughSetup/" title="Setup up your environment" class="md-nav__link">
      Setup up your environment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../walk-through/Ch-WalkthroughRunning/" title="Running EdgeX" class="md-nav__link">
      Running EdgeX
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../walk-through/Ch-WalkthroughUseCase/" title="Example Use Case" class="md-nav__link">
      Example Use Case
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../walk-through/Ch-WalkthroughData/" title="Defining your data" class="md-nav__link">
      Defining your data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../walk-through/Ch-WalkthroughDeviceProfile/" title="Defining your device" class="md-nav__link">
      Defining your device
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../walk-through/Ch-WalkthroughDeviceService/" title="Register your Device Service" class="md-nav__link">
      Register your Device Service
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../walk-through/Ch-WalkthroughProvision/" title="Provision a Device" class="md-nav__link">
      Provision a Device
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../walk-through/Ch-WalkthroughCommands/" title="Calling commands" class="md-nav__link">
      Calling commands
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../walk-through/Ch-WalkthroughReading/" title="Sending events and reading data" class="md-nav__link">
      Sending events and reading data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../walk-through/Ch-WalkthroughExporting/" title="Exporting your device data" class="md-nav__link">
      Exporting your device data
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      API Reference
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="API Reference" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        API Reference
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5-1" type="checkbox" id="nav-5-1">
    
    <label class="md-nav__link" for="nav-5-1">
      Core
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Core" data-md-level="2">
      <label class="md-nav__title" for="nav-5-1">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Core
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../api/core/Ch-APICoreCommand/" title="Core Command" class="md-nav__link">
      Core Command
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../api/core/Ch-APICoreData/" title="Core Data" class="md-nav__link">
      Core Data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../api/core/Ch-APICoreMetadata/" title="Core Metadata" class="md-nav__link">
      Core Metadata
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../api/core/Ch-APICoreServiceConfiguration/" title="Configuration and Registry" class="md-nav__link">
      Configuration and Registry
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5-2" type="checkbox" id="nav-5-2">
    
    <label class="md-nav__link" for="nav-5-2">
      Supporting Services
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Supporting Services" data-md-level="2">
      <label class="md-nav__title" for="nav-5-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Supporting Services
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../api/supporting/Ch-APISupportingServicesAlerts/" title="Alerts & Notifications" class="md-nav__link">
      Alerts & Notifications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../api/supporting/Ch-APISupportingServicesLogging/" title="Logging" class="md-nav__link">
      Logging
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../api/supporting/Ch-APISupportingServicesRulesEngine/" title="Rules Engine" class="md-nav__link">
      Rules Engine
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../api/supporting/Ch-APISupportingServicesScheduling/" title="Scheduling" class="md-nav__link">
      Scheduling
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../api/Ch-APIDeviceServicesVirtual/" title="APIs - Device Services - Virtual Device Service" class="md-nav__link">
      APIs - Device Services - Virtual Device Service
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../api/Ch-APISystemManagement/" title="APIs - System Management - Agent" class="md-nav__link">
      APIs - System Management - Agent
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Architectural Decision Records
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Architectural Decision Records" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Architectural Decision Records
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../design/" title="Architecture Decision Records Folder" class="md-nav__link">
      Architecture Decision Records Folder
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../design/TOC/" title="ADR Table of Contents" class="md-nav__link">
      ADR Table of Contents
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6-3" type="checkbox" id="nav-6-3">
    
    <label class="md-nav__link" for="nav-6-3">
      Legacy
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Legacy" data-md-level="2">
      <label class="md-nav__title" for="nav-6-3">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Legacy
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../design/legacy-design/" title="Legacy Design Documents" class="md-nav__link">
      Legacy Design Documents
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../design/legacy-requirements/" title="Legacy Requirements" class="md-nav__link">
      Legacy Requirements
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#context-api" class="md-nav__link">
    Context API
  </a>
  
    <nav class="md-nav" aria-label="Context API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#loggingclient" class="md-nav__link">
    LoggingClient
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eventclient" class="md-nav__link">
    EventClient
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#valuedescriptorclient" class="md-nav__link">
    ValueDescriptorClient
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#commandclient" class="md-nav__link">
    CommandClient
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notificationsclient" class="md-nav__link">
    NotificationsClient
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note-about-clients" class="md-nav__link">
    Note about Clients
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#markaspushed" class="md-nav__link">
    .MarkAsPushed()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pushtocore" class="md-nav__link">
    .PushToCore()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#complete" class="md-nav__link">
    .Complete()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setretrydata" class="md-nav__link">
    .SetRetryData()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getsecrets" class="md-nav__link">
    .GetSecrets()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#built-in-transformsfunctions" class="md-nav__link">
    Built-In Transforms/Functions
  </a>
  
    <nav class="md-nav" aria-label="Built-In Transforms/Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#filtering" class="md-nav__link">
    Filtering
  </a>
  
    <nav class="md-nav" aria-label="Filtering">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#json-logic" class="md-nav__link">
    JSON Logic
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#encryption" class="md-nav__link">
    Encryption
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#batch" class="md-nav__link">
    Batch
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conversion" class="md-nav__link">
    Conversion
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compressions" class="md-nav__link">
    Compressions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#coredata-functions" class="md-nav__link">
    CoreData Functions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#export-functions" class="md-nav__link">
    Export Functions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#output-functions" class="md-nav__link">
    Output Functions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    Configuration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-handling" class="md-nav__link">
    Error Handling
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-topics" class="md-nav__link">
    Advanced Topics
  </a>
  
    <nav class="md-nav" aria-label="Advanced Topics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configurable-functions-pipeline" class="md-nav__link">
    Configurable Functions Pipeline
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-the-webserver" class="md-nav__link">
    Using The Webserver
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#target-type" class="md-nav__link">
    Target Type
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#command-line-options" class="md-nav__link">
    Command Line Options
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment-variable-overrides" class="md-nav__link">
    Environment Variable Overrides
  </a>
  
    <nav class="md-nav" aria-label="Environment Variable Overrides">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#edgex_registry" class="md-nav__link">
    edgex_registry
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#edgex_service" class="md-nav__link">
    edgex_service
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#edgex_profile" class="md-nav__link">
    edgex_profile
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#store-and-forward" class="md-nav__link">
    Store and Forward
  </a>
  
    <nav class="md-nav" aria-label="Store and Forward">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration_1" class="md-nav__link">
    Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-it-works" class="md-nav__link">
    How it works
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secrets" class="md-nav__link">
    Secrets
  </a>
  
    <nav class="md-nav" aria-label="Secrets">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration_2" class="md-nav__link">
    Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#storing-secrets" class="md-nav__link">
    Storing Secrets
  </a>
  
    <nav class="md-nav" aria-label="Storing Secrets">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#secure-mode" class="md-nav__link">
    Secure Mode
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#insecure-mode" class="md-nav__link">
    Insecure Mode
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getting-secrets" class="md-nav__link">
    Getting Secrets
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/edgexfoundry/edgex-go/edit/master/docs/microservices/application/ApplicationFunctionsSDK.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z" /></svg>
                  </a>
                
                
                  
                
                
                <h1 id="app-functions-sdk">App Functions SDK</h1>
<p>Welcome the App Functions SDK for EdgeX. This sdk is meant to provide all the plumbing necessary for developers to get started in processing/transforming/exporting data out of EdgeX. </p>
<h2 id="context-api">Context API</h2>
<p>The context parameter passed to each function/transform provides operations and data associated with each execution of the pipeline. Let's take a look at a few of the properties that are available:</p>
<div class="codehilite"><pre><span></span><code><span class="kd">type</span> <span class="nx">Context</span> <span class="kd">struct</span> <span class="p">{</span>
    <span class="c1">// ID of the EdgeX Event (will be filled for a received JSON Event)</span>
    <span class="nx">EventID</span> <span class="kt">string</span>

    <span class="c1">// Checksum of the EdgeX Event (will be filled for a received CBOR Event)</span>
    <span class="nx">EventChecksum</span> <span class="kt">string</span>

    <span class="c1">// This is the ID used to track the EdgeX event through entire EdgeX framework.</span>
    <span class="nx">CorrelationID</span> <span class="kt">string</span>

    <span class="c1">// OutputData is used for specifying the data that is to be outputted. Leverage the .Complete() function to set.</span>
    <span class="nx">OutputData</span> <span class="p">[]</span><span class="kt">byte</span>

    <span class="c1">// This holds the configuration for your service. This is the preferred way to access your custom application settings that have been set in the configuration. </span>
    <span class="nx">Configuration</span> <span class="nx">common</span><span class="p">.</span><span class="nx">ConfigurationStruct</span>

    <span class="c1">// LoggingClient is exposed to allow logging following the preferred logging strategy within EdgeX.</span>
    <span class="nx">LoggingClient</span> <span class="nx">logger</span><span class="p">.</span><span class="nx">LoggingClient</span>

    <span class="c1">// EventClient exposes Core Data&#39;s EventClient API</span>
    <span class="nx">EventClient</span> <span class="nx">coredata</span><span class="p">.</span><span class="nx">EventClient</span>

    <span class="c1">// ValueDescriptorClient exposes Core Data&#39;s ValueDescriptor API</span>
    <span class="nx">ValueDescriptorClient</span> <span class="nx">coredata</span><span class="p">.</span><span class="nx">ValueDescriptorClient</span>

    <span class="c1">// CommandClient exposes Core Commands&#39;s Command API</span>
    <span class="nx">CommandClient</span> <span class="nx">command</span><span class="p">.</span><span class="nx">CommandClient</span>

    <span class="c1">// NotificationsClient exposes Support Notification&#39;s Notifications API</span>
    <span class="nx">NotificationsClient</span> <span class="nx">notifications</span><span class="p">.</span><span class="nx">NotificationsClient</span>

    <span class="c1">// RetryData holds the data to be stored for later retry when the pipeline function returns an error</span>
    <span class="nx">RetryData</span> <span class="p">[]</span><span class="kt">byte</span>

    <span class="c1">// SecretProvider exposes the support for getting and storing secrets</span>
    <span class="nx">SecretProvider</span> <span class="o">*</span><span class="nx">security</span><span class="p">.</span><span class="nx">SecretProvider</span>
<span class="p">}</span>
</code></pre></div>


<h3 id="loggingclient">LoggingClient</h3>
<p>The <code>LoggingClient</code> exposed on the context is available to leverage logging libraries/service utilized throughout the EdgeX framework. The SDK has initialized everything so it can be used to log <code>Trace</code>, <code>Debug</code>, <code>Warn</code>, <code>Info</code>, and <code>Error</code> messages as appropriate. See <code>examples/simple-filter-xml/main.go</code> for an example of how to use the <code>LoggingClient</code>.</p>
<h3 id="eventclient">EventClient</h3>
<p>The <code>EventClient</code> exposed on the context is available to leverage Core Data's <code>Event</code> API. See <a href="https://github.com/edgexfoundry/go-mod-core-contracts/blob/master/clients/coredata/event.go#L35">interface definition</a> for more details. This client is useful for querying events and is used by the <a href="#markaspushed">MarkAsPushed</a> convenience API described below.</p>
<h3 id="valuedescriptorclient">ValueDescriptorClient</h3>
<p>The <code>ValueDescriptorClient</code> exposed on the context is available to leverage Core Data's <code>ValueDescriptor</code> API. See <a href="https://github.com/edgexfoundry/go-mod-core-contracts/blob/master/clients/coredata/value_descriptor.go#L29">interface definition</a> for more details. Useful for looking up the value descriptor for a reading received.</p>
<h3 id="commandclient">CommandClient</h3>
<p>The <code>CommandClient</code> exposed on the context is available to leverage Core Command's <code>Command</code> API. See <a href="https://github.com/edgexfoundry/go-mod-core-contracts/blob/master/clients/command/client.go#L28">interface definition</a> for more details. Useful for sending commands to devices.</p>
<h3 id="notificationsclient">NotificationsClient</h3>
<p>The <code>CommandClient</code> exposed on the context is available to leverage Support Notifications' <code>Notifications</code> API. See <a href="https://github.com/edgexfoundry/go-mod-core-contracts/blob/master/clients/notifications/README.md">README</a> for more details. Useful for sending notifications. </p>
<h3 id="note-about-clients">Note about Clients</h3>
<p>Each of the clients above is only initialized if the Clients section of the configuration contains an entry for the service associated with the Client API. If it isn't in the configuration the client will be <code>nil</code>. Your code must check for <code>nil</code> to avoid panic in case it is missing from the configuration. Only add the clients to your configuration that your Application Service will actually be using. All application services need the <code>Logging</code> and many will need <code>Core-Data</code>. The following is an example <code>Clients</code> section of a configuration.toml with all supported clients specified:</p>
<div class="codehilite"><pre><span></span><code><span class="k">[Clients]</span>
  <span class="k">[Clients.Logging]</span>
  <span class="na">Protocol</span> <span class="o">=</span> <span class="s">&quot;http&quot;</span>
<span class="s">  Host = &quot;localhost&quot;</span>
<span class="s">  Port = 48061</span>

  <span class="k">[Clients.CoreData]</span>
  <span class="na">Protocol</span> <span class="o">=</span> <span class="s">&#39;http&#39;</span>
<span class="s">  Host = &#39;localhost&#39;</span>
<span class="s">  Port = 48080</span>

  <span class="k">[Clients.Command]</span>
  <span class="na">Protocol</span> <span class="o">=</span> <span class="s">&#39;http&#39;</span>
<span class="s">  Host = &#39;localhost&#39;</span>
<span class="s">  Port = 48082</span>

  <span class="k">[Clients.Notifications]</span>
  <span class="na">Protocol</span> <span class="o">=</span> <span class="s">&#39;http&#39;</span>
<span class="s">  Host = &#39;localhost&#39;</span>
<span class="s">  Port = 48060</span>
</code></pre></div>


<h3 id="markaspushed">.MarkAsPushed()</h3>
<p><code>.MarkAsPushed()</code> is used to indicate to EdgeX Core Data that an event has been "pushed" and is no longer required to be stored. The scheduler service will purge all events that have been marked as pushed based on the configured schedule. By default, it is once daily at midnight. If you leverage the built in export functions (i.e. HTTP Export, or MQTT Export), then the event will automatically be marked as pushed upon a successful export. </p>
<h3 id="pushtocore">.PushToCore()</h3>
<p><code>.PushToCore(string deviceName, string readingName, byte[] value)</code> is used to push data to EdgeX Core Data so that it can be shared with other applications that are subscribed to the message bus that core-data publishes to. <code>deviceName</code> can be set as you like along with the <code>readingName</code> which will be set on the EdgeX event sent to CoreData. This function will return the new EdgeX Event with the ID populated, however the CorrelationId will not be available.</p>
<blockquote>
<p>NOTE: If validation is turned on in CoreServices then your <code>deviceName</code> and <code>readingName</code> must exist in the CoreMetadata and be properly registered in EdgeX. </p>
<p>WARNING: Be aware that without a filter in your pipeline, it is possible to create an infinite loop when the messagebus trigger is used. Choose your device-name and reading name appropriately.</p>
</blockquote>
<h3 id="complete">.Complete()</h3>
<p><code>.Complete([]byte outputData)</code> can be used to return data back to the configured trigger. In the case of an HTTP trigger, this would be an HTTP Response to the caller. In the case of a message bus trigger, this is how data can be published to a new topic per the configuration. </p>
<h3 id="setretrydata">.SetRetryData()</h3>
<p><code>.SetRetryData(payload []byte)</code> can be used to store data for later retry. This is useful when creating a custom export function that needs to retry on failure sending the data. The payload data will be stored for later retry based on <code>Store and Forward</code> configuration. When the retry is triggered, the function pipeline will be re-executed starting with the function that called this API. That function will be passed the stored data, so it is important that all transformations occur in functions prior to the export function. The <code>Context</code> will also be restored to the state when the function called this API. See <a href="#store-and-forward">Store and Forward</a> for more details.</p>
<blockquote>
<p>NOTE: <code>Store and Forward</code> be must enabled when calling this API. </p>
</blockquote>
<h3 id="getsecrets">.GetSecrets()</h3>
<p><code>.GetSecrets(path string, keys ...string)</code> is used to retrieve secrets from the secret store. <code>path</code> specifies the type or location of the secrets to retrieve. If specified it is appended to the base path from the exclusive secret store configuration. <code>keys</code> specifies the secrets which to retrieve. If no keys are provided then all the keys associated with the specified path will be returned.</p>
<h2 id="built-in-transformsfunctions">Built-In Transforms/Functions</h2>
<p>All transforms define a type and a <code>New</code> function which is used to initialize an instance of the type with the  required parameters. These instances returned by these <code>New</code> functions give access to their appropriate pipeline function pointers when build  the function pipeline.</p>
<div class="codehilite"><pre><span></span><code><span class="err">E.G. NewFilter([] {&quot;Device1&quot;, &quot;Device2&quot;}).FilterByDeviceName</span>
</code></pre></div>


<h3 id="filtering">Filtering</h3>
<p>There are two basic types of filtering included in the SDK to add to your pipeline. Theses provided Filter functions return a type of events.Model. If filtering results in no remaining data, the pipeline execution for that pass is terminated. If no values are provided for filtering, then data flows through unfiltered.
 - <code>NewFilter([]string filterValues)</code> - This function returns a <code>Filter</code> instance initialized with the passed in filter values. This <code>Filter</code> instance is used to access the following filter functions that will operate using the specified filter values.
    - <code>FilterByDeviceName</code> - This function will filter the event data down to the specified device names and return the filtered data to the pipeline.
    - <code>FilterByValueDescriptor</code> - This function will filter the event data down to the specified device value descriptor and return the filtered data to the pipeline.</p>
<h4 id="json-logic">JSON Logic</h4>
<ul>
<li>
<p><code>NewJSONLogic(rule string)</code> - This function returns a <code>JSONLogic</code> instance initialized with the passed in JSON rule. The rule passed in should be a JSON string conforming to the specification here: http://jsonlogic.com/operations.html. </p>
<blockquote>
<p>NOTE: Only simple logic/filtering operators are supported. Manipulation of data via JSONLogic rules are not yet supported. For more advanced scenarios checkout <a href="https://github.com/emqx/kuiper">EMQ X Kuiper</a>.</p>
</blockquote>
</li>
<li>
<p><code>Evaluate</code> - This is the function that will be used in the pipeline to apply the JSON rule to data coming in on the pipeline. If the condition of your rule is met, then the pipeline will continue and the data will continue to flow to the next function in the pipeline. If the condition of your rule is NOT met, then pipeline execution stops. </p>
</li>
</ul>
<h3 id="encryption">Encryption</h3>
<p>There is one encryption transform included in the SDK that can be added to your pipeline. </p>
<ul>
<li><code>NewEncryption(key string, initializationVector string)</code> - This function returns a <code>Encryption</code> instance initialized with the passed in key and initialization vector. This <code>Encryption</code> instance is used to access the following encryption function that will use the specified key and initialization vector.</li>
<li><code>EncryptWithAES</code> - This function receives a either a <code>string</code>, <code>[]byte</code>, or <code>json.Marshaller</code> type and encrypts it using AES encryption and returns a <code>[]byte</code> to the pipeline.</li>
</ul>
<h3 id="batch">Batch</h3>
<p>Included in the SDK is an in-memory batch function that will hold on to your data before continuing the pipeline. There are three functions provided for batching each with their own strategy.
- <code>NewBatchByTime(timeInterval string)</code> - This function returns a <code>BatchConfig</code> instance with time being the strategy that is used for determining when to release the batched data and continue the pipeline. <code>timeInterval</code> is the duration to wait (i.e. <code>10s</code>). The time begins after the first piece of data is received. If no data has been received no data will be sent forward. 
- <code>NewBatchByCount(batchThreshold int)</code> - This function returns a <code>BatchConfig</code> instance with count being the strategy that is used for determining when to release the batched data and continue the pipeline. <code>batchThreshold</code> is how many events to hold on to (i.e. <code>25</code>). The count begins after the first piece of data is received and once the threshold is met, the batched data will continue forward and the counter will be reset.
- <code>NewBatchByTimeAndCount(timeInterval string, batchThreshold int)</code> - This function returns a <code>BatchConfig</code> instance with a combination of both time and count being the strategy that is used for determining when to release the batched data and continue the pipeline. Whichever occurs first will trigger the data to continue and be reset.
  - <code>Batch</code> - This function will apply the selected strategy in your pipeline.</p>
<h3 id="conversion">Conversion</h3>
<p>There are two conversions included in the SDK that can be added to your pipeline. These transforms return a <code>string</code>.</p>
<ul>
<li><code>NewConversion()</code> - This function returns a <code>Conversion</code> instance that is used to access the following conversion functions: <ul>
<li><code>TransformToXML</code>  - This function receives an <code>events.Model</code> type, converts it to XML format and returns the XML string to the pipeline. </li>
<li><code>TransformToJSON</code> - This function receives an <code>events.Model</code> type and converts it to JSON format and returns the JSON string to the pipeline.</li>
</ul>
</li>
</ul>
<h3 id="compressions">Compressions</h3>
<p>There are two compression types included in the SDK that can be added to your pipeline. These transforms return a <code>[]byte</code>.</p>
<ul>
<li><code>NewCompression()</code> - This function returns a <code>Compression</code> instance that is used to access the following compression functions:<ul>
<li><code>CompressWithGZIP</code>  - This function receives either a <code>string</code>,<code>[]byte</code>, or <code>json.Marshaler</code> type, GZIP compresses the data, converts result to base64 encoded string, which is returned as a <code>[]byte</code> to the pipeline.</li>
<li><code>CompressWithZLIB</code> - This function receives either a <code>string</code>,<code>[]byte</code>, or <code>json.Marshaler</code> type, ZLIB compresses the data, converts result to base64 encoded string, which is returned as a <code>[]byte</code> to the pipeline.</li>
</ul>
</li>
</ul>
<h3 id="coredata-functions">CoreData Functions</h3>
<p>These are functions that enable interactions with the CoreData REST API. 
- <code>NewCoreData()</code> - This function returns a <code>CoreData</code> instance. This <code>CoreData</code> instance is used to access the following function(s).
  - <code>MarkAsPushed</code> - This function provides the MarkAsPushed function from the context as a First-Class Transform that can be called in your pipeline. <a href="#.MarkAsPushed()">See Definition Above</a>. The data passed into this function from the pipeline is passed along unmodifed since all required information is provided on the context (EventId, CorrelationId,etc.. )
  - <code>PushToCore</code> - This function provides the PushToCore function from the context as a First-Class Transform that can be called in your pipeline. <a href="#.PushToCore()">See Definition Above</a>. The data passed into this function from the pipeline is wrapped in an EdgeX event with the <code>deviceName</code> and <code>readingName</code> that were set upon instantiation and then sent to CoreData to be added as an event. Returns the new EdgeX event with ID populated.</p>
<div class="codehilite"><pre><span></span><code><span class="o">&gt;</span> <span class="n">NOTE</span><span class="p">:</span> <span class="k">If</span> <span class="n">validation</span> <span class="k">is</span> <span class="n">turned</span> <span class="k">on</span> <span class="k">in</span> <span class="n">CoreServices</span> <span class="k">then</span> <span class="n">your</span> <span class="ss">`deviceName`</span> <span class="k">and</span> <span class="ss">`readingName`</span> <span class="n">must</span> <span class="n">exist</span> <span class="k">in</span> <span class="n">the</span> <span class="n">CoreMetadata</span> <span class="k">and</span> <span class="n">be</span> <span class="n">properly</span> <span class="n">registered</span> <span class="k">in</span> <span class="n">EdgeX</span><span class="p">.</span>
</code></pre></div>


<h3 id="export-functions">Export Functions</h3>
<p>There are few export functions included in the SDK that can be added to your pipeline. 
- <code>NewHTTPSender(url string, mimeType string, persistOnError bool)</code> - This function returns a <code>HTTPSender</code> instance initialized with the passed in url, mime type and persistOnError values. 
- <code>NewHTTPSenderWithSecretHeader(url string, mimeType string, persistOnError bool, httpHeaderSecretName string, secretPath string)</code> - This function returns a <code>HTTPSender</code> instance similar to the above function however will set up the <code>HTTPSender</code> to add a header to the HTTP request using the <code>httpHeaderSecretName</code> as both the header key  and the key to search for in the secret provider at <code>secretPath</code> leveraging secure storage of secrets. 
This <code>HTTPSender</code> instance is used to access the following functions that will use the required url and optional mime type and persistOnError:</p>
<ul>
<li><code>HTTPPost</code> - This function receives either a <code>string</code>,<code>[]byte</code>, or <code>json.Marshaler</code> type from the previous function in the pipeline and posts it to the configured endpoint. If no previous function exists, then the event that triggered the pipeline, marshaled to json, will be used. Currently, only unauthenticated endpoints are supported. Authenticated endpoints will be supported in the future. If the post fails and <code>persistOnError</code>is <code>true</code> and <code>Store and Forward</code> is enabled, the data will be stored for later retry. See <a href="#store-and-forward">Store and Forward</a> for more details</li>
<li><code>NewMQTTSecretSender(mqttConfig MQTTSecretConfig, persistOnError bool)</code> - This function returns a <code>MQTTSecretSender</code> instance intialized with the options specfied in the <code>MQTTSecretConfig</code>.</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="kd">type</span> <span class="nx">MQTTSecretConfig</span> <span class="kd">struct</span> <span class="p">{</span>
    <span class="c1">// BrokerAddress should be set to the complete broker address i.e. mqtts://mosquitto:8883/mybroker</span>
    <span class="nx">BrokerAddress</span> <span class="kt">string</span>
    <span class="c1">// ClientId to connect with the broker with.</span>
    <span class="nx">ClientId</span> <span class="kt">string</span>
    <span class="c1">// The name of the path in secret provider to retrieve your secrets</span>
    <span class="nx">SecretPath</span> <span class="kt">string</span>
    <span class="c1">// AutoReconnect indicated whether or not to retry connection if disconnected</span>
    <span class="nx">AutoReconnect</span> <span class="kt">bool</span>
    <span class="c1">// Topic that you wish to publish to</span>
    <span class="nx">Topic</span> <span class="kt">string</span>
    <span class="c1">// QoS for MQTT Connection</span>
    <span class="nx">QoS</span> <span class="kt">byte</span>
    <span class="c1">// Retain setting for MQTT Connection</span>
    <span class="nx">Retain</span> <span class="kt">bool</span>
    <span class="c1">// SkipCertVerify</span>
    <span class="nx">SkipCertVerify</span> <span class="kt">bool</span>
    <span class="c1">// AuthMode indicates what to use when connecting to the broker. Options are &quot;none&quot;, &quot;cacert&quot; , &quot;usernamepassword&quot;, &quot;clientcert&quot;.</span>
    <span class="c1">// If a CA Cert exists in the SecretPath then it will be used for all modes except &quot;none&quot;. </span>
    <span class="nx">AuthMode</span> <span class="kt">string</span>
<span class="p">}</span>
</code></pre></div>


<p>Secrets in the secret provider may be located at any path however they must have the follow keys at the specified <code>SecretPath</code>. What <code>AuthMode</code> you choose depends on what values are used. For example, if "none" is specified as auth mode all keys will be ignored. Similarily, if <code>AuthMode</code> is set to "clientcert" username and password will be ignored.
  <code>username</code> - username to connect to the broker
  <code>password</code> - password used to connect to the broker
  <code>clientkey</code>- client private key in PEM format
  <code>clientcert</code> - client cert in PEM format
  <code>cacert</code> - ca cert in PEM format</p>
<ul>
<li>
<p><strong>DEPRECATED</strong><code>NewMQTTSender(logging logger.LoggingClient, addr models.Addressable, keyCertPair *KeyCertPair, mqttConfig MqttConfig, persistOnError bool)</code> - This function returns a <code>MQTTSender</code> instance initialized with the passed in MQTT configuration . This <code>MQTTSender</code> instance is used to access the following  function that will use the specified MQTT configuration</p>
</li>
<li>
<p><code>KeyCertPair</code> - This structure holds the Key and Certificate information for when using secure <strong>TLS</strong> connection to the broker. Can be <code>nil</code> if not using secure <strong>TLS</strong> connection. </p>
</li>
<li>
<p><code>MqttConfig</code> - This structure holds addition MQTT configuration settings. </p>
<p><code>Qos            byte
    Retain         bool
    AutoReconnect  bool
    SkipCertVerify bool
    User           string
    Password       string</code></p>
<p>The <code>GO</code> complier will default these to <code>0</code>, <code>false</code> and <code>""</code>, so you only need to set the fields that your usage requires that differ from the default.</p>
</li>
<li>
<p><code>MQTTSend</code> - This function receives either a <code>string</code>,<code>[]byte</code>, or <code>json.Marshaler</code> type from the previous function in the pipeline and sends it to the specified MQTT broker. If no previous function exists, then the event that triggered the pipeline, marshaled to json, will be used. If the send fails and <code>persistOnError</code>is <code>true</code> and <code>Store and Forward</code> is enabled, the data will be stored for later retry. See <a href="#store-and-forward">Store and Forward</a> for more details</p>
</li>
</ul>
<h3 id="output-functions">Output Functions</h3>
<p>There is one output function included in the SDK that can be added to your pipeline. </p>
<ul>
<li>NewOutput() - This function returns a <code>Output</code> instance that is used to access the following output function: </li>
<li><code>SetOutput</code> - This function receives either a <code>string</code>,<code>[]byte</code>, or <code>json.Marshaler</code> type from the previous function in the pipeline and sets it as the output data for the pipeline to return to the configured trigger. If configured to use message bus, the data will be published to the message bus as determined by the <code>MessageBus</code> and <code>Binding</code> configuration. If configured to use HTTP trigger the data is returned as the HTTP response. Note that calling Complete() from the Context API in a custom function can be used in place of adding this function to your pipeline</li>
</ul>
<h2 id="configuration">Configuration</h2>
<p>Similar to other EdgeX services, configuration is first determined by the <code>configuration.toml</code> file in the <code>/res</code> folder. If <code>-r</code> is passed to the application on startup, the SDK will leverage the provided registry (i.e Consul) to push configuration from the file into the registry and monitor configuration from there. You will find the configuration under the <code>edgex/appservices/1.0/</code> key. There are two primary sections in the <code>configuration.toml</code> file that will need to be set that are specific to the AppFunctionsSDK. 
  1) <code>[Binding]</code> - This specifies the <a href="#triggers">trigger</a> type and associated data required to configure a trigger. </p>
<p><code>toml
  [Binding]
  Type=""
  SubscribeTopic=""
  PublishTopic=""</code>
  2) <code>[ApplicationSettings]</code> - Is used for custom application settings and is accessed via the ApplicationSettings() API. The ApplicationSettings API returns a <code>map[string] string</code> containing the contents on the ApplicationSetting section of the <code>configuration.toml</code> file.
 <code>toml
 [ApplicationSettings]
 ApplicationName = "My Application Service"</code></p>
<h2 id="error-handling">Error Handling</h2>
<ul>
<li>Each transform returns a <code>true</code> or <code>false</code> as part of the return signature. This is called the <code>continuePipeline</code> flag and indicates whether the SDK should continue calling successive transforms in the pipeline.</li>
<li><code>return false, nil</code> will stop the pipeline and stop processing the event. This is useful for example when filtering on values and nothing matches the criteria you've filtered on. </li>
<li><code>return false, error</code>, will stop the pipeline as well and the SDK will log the errorString you have returned.</li>
<li>Returning <code>true</code> tells the SDK to continue, and will call the next function in the pipeline with your result.</li>
<li>The SDK will return control back to main when receiving a SIGTERM/SIGINT event to allow for custom clean up.</li>
</ul>
<h2 id="advanced-topics">Advanced Topics</h2>
<p>The following items discuss topics that are a bit beyond the basic use cases of the Application Functions SDK when interacting with EdgeX.</p>
<h3 id="configurable-functions-pipeline">Configurable Functions Pipeline</h3>
<p>This SDK provides the capability to define the functions pipeline via configuration rather than code using the <strong>app-service-configurable</strong> application service. See <strong>app-service-configurable</strong> <a href="https://github.com/edgexfoundry/app-service-configurable/blob/master/README.md">README</a> for more details.</p>
<h3 id="using-the-webserver">Using The Webserver</h3>
<p>It is not uncommon to require your own API endpoints when building an app service. Rather than spin up your own webserver inside of your app (alongside the already existing running webserver), we've exposed a method that allows you add your own routes to the existing webserver. A few routes are reserved and cannot be used:
- /api/version
- /api/v1/ping
- /api/v1/metrics
- /api/v1/config
- /api/v1/trigger
To add your own route, use the <code>AddRoute(route string, handler func(nethttp.ResponseWriter, *nethttp.Request), methods ...string) error</code> function provided on the sdk. Here's an example:</p>
<div class="codehilite"><pre><span></span><code><span class="nx">edgexSdk</span><span class="p">.</span><span class="nx">AddRoute</span><span class="p">(</span><span class="s">&quot;/myroute&quot;</span><span class="p">,</span> <span class="kd">func</span><span class="p">(</span><span class="nx">writer</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">req</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">context</span> <span class="o">:=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">Context</span><span class="p">().</span><span class="nx">Value</span><span class="p">(</span><span class="nx">appsdk</span><span class="p">.</span><span class="nx">SDKKey</span><span class="p">).(</span><span class="o">*</span><span class="nx">appsdk</span><span class="p">.</span><span class="nx">AppFunctionsSDK</span><span class="p">)</span> 
        <span class="nx">context</span><span class="p">.</span><span class="nx">LoggingClient</span><span class="p">.</span><span class="nx">Info</span><span class="p">(</span><span class="s">&quot;TEST&quot;</span><span class="p">)</span> <span class="c1">// alternative to edgexSdk.LoggingClient.Info(&quot;TEST&quot;)</span>
        <span class="nx">writer</span><span class="p">.</span><span class="nx">Header</span><span class="p">().</span><span class="nx">Set</span><span class="p">(</span><span class="s">&quot;Content-Type&quot;</span><span class="p">,</span> <span class="s">&quot;text/plain&quot;</span><span class="p">)</span>
        <span class="nx">writer</span><span class="p">.</span><span class="nx">Write</span><span class="p">([]</span><span class="nb">byte</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">))</span>
        <span class="nx">writer</span><span class="p">.</span><span class="nx">WriteHeader</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
<span class="p">},</span> <span class="s">&quot;GET&quot;</span><span class="p">)</span>
</code></pre></div>


<p>Under the hood, this simply adds the provided route, handler, and method to the gorilla <code>mux.Router</code> we use in the SDK. For more information you can check out the github repo <a href="https://github.com/gorilla/mux">here</a>. 
You can access the resources such as the logging client by accessing the context as shown above -- this is useful for when your routes might not be defined in your main.go where you have access to the <code>edgexSdk</code> instance.</p>
<h3 id="target-type">Target Type</h3>
<p>The target type is the object type of the incoming data that is sent to the first function in the function pipeline. By default this is an EdgeX <code>Event</code> since typical usage is receiving <code>events</code> from Core Data via Message Bus. </p>
<p>For other usages where the data is not <code>events</code> coming from Core Data, the <code>TargetType</code> of the accepted incoming data can be set when the SDK instance is created. 
There are scenarios where the incoming data is not an EdgeX <code>Event</code>. One example scenario is 2 application services are chained via the Message Bus. The output of the first service back to the Messages Bus is inference data from analyzing the original input <code>Event</code>data.  The second service needs to be able to let the SDK know the target type of the input data it is expecting.</p>
<p>For usages where the incoming data is not <code>events</code>, the <code>TargetType</code> of the excepted incoming data can the set when the SDK instance is created. </p>
<p>Example:</p>
<div class="codehilite"><pre><span></span><code><span class="k">type</span> <span class="n">Person</span> <span class="n">struct</span> <span class="err">{</span>
    <span class="n">FirstName</span> <span class="n">string</span> <span class="o">`</span><span class="n">json</span><span class="p">:</span><span class="ss">&quot;first_name&quot;</span><span class="o">`</span>
    <span class="n">LastName</span>  <span class="n">string</span> <span class="o">`</span><span class="n">json</span><span class="p">:</span><span class="ss">&quot;last_name&quot;</span><span class="o">`</span>
<span class="err">}</span>

<span class="n">edgexSdk</span> <span class="p">:</span><span class="o">=</span> <span class="o">&amp;</span><span class="n">appsdk</span><span class="p">.</span><span class="n">AppFunctionsSDK</span> <span class="err">{</span>
    <span class="n">ServiceKey</span><span class="p">:</span> <span class="n">serviceKey</span><span class="p">,</span> 
    <span class="n">TargetType</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">Person</span><span class="err">{}</span><span class="p">,</span>
<span class="err">}</span>
</code></pre></div>


<p>Note that <code>TargetType</code> must be set to a pointer to an instance of your target type such as <code>&amp;Person{}</code> . The first function in your function pipeline will be passed an instance of your target type, not a pointer to it. In the example above the first function in the pipeline would start something like:</p>
<div class="codehilite"><pre><span></span><code><span class="n">func</span> <span class="n">MyPersonFunction</span><span class="p">(</span><span class="n">edgexcontext</span> <span class="o">*</span><span class="n">appcontext</span><span class="p">.</span><span class="n">Context</span><span class="p">,</span> <span class="n">params</span> <span class="p">...</span><span class="n">interface</span><span class="err">{}</span><span class="p">)</span> <span class="p">(</span><span class="n">bool</span><span class="p">,</span> <span class="n">interface</span><span class="err">{}</span><span class="p">)</span> <span class="err">{</span>

    <span class="n">edgexcontext</span><span class="p">.</span><span class="n">LoggingClient</span><span class="p">.</span><span class="n">Debug</span><span class="p">(</span><span class="ss">&quot;MyPersonFunction&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">len</span><span class="p">(</span><span class="n">params</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="err">{</span>
        <span class="o">//</span> <span class="n">We</span> <span class="n">didn</span><span class="err">&#39;</span><span class="n">t</span> <span class="n">receive</span> <span class="n">a</span> <span class="k">result</span>
        <span class="k">return</span> <span class="k">false</span><span class="p">,</span> <span class="n">nil</span>
    <span class="err">}</span>

    <span class="n">person</span><span class="p">,</span> <span class="n">ok</span> <span class="p">:</span><span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="mi">0</span><span class="p">].(</span><span class="n">Person</span><span class="p">)</span>
    <span class="k">if</span> <span class="o">!</span><span class="n">ok</span> <span class="err">{</span>
        <span class="k">return</span> <span class="k">false</span><span class="p">,</span> <span class="n">errors</span><span class="p">.</span><span class="k">New</span><span class="p">(</span><span class="ss">&quot;type received is not a Person&quot;</span><span class="p">)</span>
    <span class="err">}</span>

    <span class="p">....</span>
</code></pre></div>


<p>The SDK supports unmarshaling JSON or CBOR encoded data into an instance of the target type. If your incoming data is not JSON or CBOR encoded, you then need to set the <code>TargetType</code> to  <code>&amp;[]byte</code>.</p>
<p>If the target type is set to <code>&amp;[]byte</code> the incoming data will not be unmarshaled.  The content type, if set, will be passed as the second parameter to the first function in your pipeline.  Your first function will be responsible for decoding the data or not.</p>
<h3 id="command-line-options">Command Line Options</h3>
<p>The following command line options are available</p>
<div class="codehilite"><pre><span></span><code><span class="err">  -c=&lt;path&gt;</span>
<span class="err">  --confdir=&lt;path&gt;</span>
<span class="err">        Specify an alternate configuration directory.</span>
<span class="err">  -p=&lt;profile&gt;</span>
<span class="err">  --profile=&lt;profile&gt;</span>
<span class="err">        Specify a profile other than default.</span>
<span class="err">  -r    </span>
<span class="err">  --registry</span>
<span class="err">        Indicates the service should use the registry.</span>
<span class="err">  -o    </span>
<span class="err">  -overwrite</span>
<span class="err">        Overwrite configuration in the Registry with local values.</span>
<span class="err">  -s    </span>
<span class="err">  -skipVersionCheck</span>
<span class="err">        Indicates the service should skip the Core Service&#39;s version compatibility check.</span>
</code></pre></div>


<p>Examples:</p>
<div class="codehilite"><pre><span></span><code><span class="err">simple-filter-xml -r -c=./res -p=docker</span>
</code></pre></div>


<p>or</p>
<div class="codehilite"><pre><span></span><code><span class="err">simple-filter-xml --registry --confdir=./res --profile=docker</span>
</code></pre></div>


<h3 id="environment-variable-overrides">Environment Variable Overrides</h3>
<p>All the configuration settings from the configuration.toml file can be overridden by environment variables. Except for two special cases listed below, the overrides <strong>only</strong> occur when the configuration values are first pushed into the Registry. Once the values are in the Registry, the Registry values are always used. </p>
<p>The environment variable names have the following format:</p>
<div class="codehilite"><pre><span></span><code><span class="err">&lt;TOML Key&gt;</span>
<span class="err">&lt;TOML Section&gt;_&lt;TOML Key&gt;</span>
<span class="err">&lt;TOML Section&gt;_&lt;TOML Sub-Section&gt;_&lt;TOML Key&gt;</span>
</code></pre></div>


<p>Examples:</p>
<div class="codehilite"><pre><span></span><code><span class="n">TOML</span><span class="w">   </span><span class="err">:</span><span class="w"> </span><span class="n">FailLimit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="w"></span>
<span class="n">ENVVAR</span><span class="w"> </span><span class="err">:</span><span class="w"> </span><span class="n">FailLimit</span><span class="o">=</span><span class="mi">100</span><span class="w"></span>

<span class="n">TOML</span><span class="w">   </span><span class="err">:</span><span class="w"> </span><span class="o">[</span><span class="n">Logging</span><span class="o">]</span><span class="w"></span>
<span class="w">         </span><span class="n">EnableRemote</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">false</span><span class="w"></span>
<span class="n">ENVVAR</span><span class="w"> </span><span class="err">:</span><span class="w"> </span><span class="n">Logging</span><span class="p">.</span><span class="n">EnableRemote</span><span class="o">=</span><span class="k">true</span><span class="w"></span>

<span class="n">TOML</span><span class="w">   </span><span class="err">:</span><span class="w"> </span><span class="o">[</span><span class="n">Clients</span><span class="o">]</span><span class="w"></span>
<span class="w">            </span><span class="o">[</span><span class="n">Clients.CoreData</span><span class="o">]</span><span class="w"></span>
<span class="w">            </span><span class="k">Host</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;localhost&#39;</span><span class="w"></span>
<span class="n">ENVVAR</span><span class="w"> </span><span class="err">:</span><span class="w"> </span><span class="n">Clients_CoreData_Host</span><span class="o">=</span><span class="n">edgex</span><span class="o">-</span><span class="n">core</span><span class="o">-</span><span class="k">data</span><span class="w"></span>
</code></pre></div>


<h4 id="edgex_registry">edgex_registry</h4>
<p>This environment variable overrides the Registry connection information and occurs every time the application service starts. The value is in the format of a URL.</p>
<div class="codehilite"><pre><span></span><code><span class="n">edgex_registry</span><span class="o">=</span><span class="n">consul</span><span class="p">:</span><span class="o">//</span><span class="n">edgex</span><span class="o">-</span><span class="n">core</span><span class="o">-</span><span class="n">consul</span><span class="p">:</span><span class="mi">8500</span>

<span class="n">This</span> <span class="k">sets</span> <span class="n">the</span> <span class="n">Registry</span> <span class="n">information</span> <span class="n">fields</span> <span class="k">as</span> <span class="n">follows</span><span class="p">:</span>
    <span class="k">Type</span><span class="p">:</span> <span class="n">consul</span>
    <span class="k">Host</span><span class="p">:</span> <span class="n">edgex</span><span class="o">-</span><span class="n">core</span><span class="o">-</span><span class="n">consul</span>
    <span class="n">Port</span><span class="p">:</span> <span class="mi">8500</span>
</code></pre></div>


<h4 id="edgex_service">edgex_service</h4>
<p>This environment variable overrides the Service connection information and occurs every time the application service starts. The value is in the format of a URL.</p>
<div class="codehilite"><pre><span></span><code><span class="n">edgex_service</span><span class="o">=</span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mi">192</span><span class="p">.</span><span class="mi">168</span><span class="p">.</span><span class="mi">1</span><span class="p">.</span><span class="mi">2</span><span class="p">:</span><span class="mi">4903</span>

<span class="n">This</span> <span class="k">sets</span> <span class="n">the</span> <span class="n">Service</span> <span class="n">information</span> <span class="n">fields</span> <span class="k">as</span> <span class="n">follows</span><span class="p">:</span>
    <span class="n">Protocol</span><span class="p">:</span> <span class="n">http</span>
    <span class="k">Host</span><span class="p">:</span> <span class="mi">192</span><span class="p">.</span><span class="mi">168</span><span class="p">.</span><span class="mi">1</span><span class="p">.</span><span class="mi">2</span>
    <span class="n">Port</span><span class="p">:</span> <span class="mi">4903</span>
</code></pre></div>


<h4 id="edgex_profile">edgex_profile</h4>
<p>This environment variable overrides the command line <code>profile</code> argument. It will replace the current value passed via the <code>-p</code> or <code>--profile</code>, if one exists. If not specified it will add the <code>--profile</code> argument. This is useful when running the service via docker-compose.</p>
<p>Using docker-compose:</p>
<div class="codehilite"><pre><span></span><code><span class="err">  app-service-configurable-rules:</span>
<span class="err">    image: edgexfoundry/docker-app-service-configurable:1.1.0</span>
<span class="err">    environment: </span>
<span class="err">      - edgex_profile : &quot;rules-engine&quot;</span>
<span class="err">    ports:</span>
<span class="err">      - &quot;48095:48095&quot;</span>
<span class="err">    container_name: edgex-app-service-configurable</span>
<span class="err">    hostname: edgex-app-service-configurable</span>
<span class="err">    networks:</span>
<span class="err">      edgex-network:</span>
<span class="err">        aliases:</span>
<span class="err">          - edgex-app-service-configurable</span>
<span class="err">    depends_on:</span>
<span class="err">      - data</span>
<span class="err">      - command</span>
</code></pre></div>


<p>This sets the <code>--profile=docker-rules-engine</code> command line argument so that the application service uses the <code>docker-rules-engine</code> configuration profile which resides at <code>/res/docker-rules-engine/configuration.toml</code></p>
<blockquote>
<p><em>Note that Application Services no longer use docker profiles. They use Environment Overrides in the docker compose file to make the necessary changes to the configuration for running in Docker. See the </em><em>Environment Variable Overrides For Docker</em><em> section in <a href="https://github.com/edgexfoundry/app-service-configurable/blob/master/README.md#environment-variable-overrides-for-docker">App Service Configurable's README</a></em> for more details and an example. </p>
</blockquote>
<h3 id="store-and-forward">Store and Forward</h3>
<p>The Store and Forward capability allows for export functions to persist data on failure and for the export of the data to be retried at a later time. </p>
<blockquote>
<p><em>Note: The order the data exported via this retry mechanism is not guaranteed to be the same order in which the data was initial received from Core Data</em></p>
</blockquote>
<h4 id="configuration_1">Configuration</h4>
<p>Two sections of configuration have been added for Store and Forward.</p>
<p><code>Writable.StoreAndForward</code> allows enabling, setting the interval between retries and the max number of retries. If running with Registry, these setting can be changed on the fly without having to restart the service.</p>
<div class="codehilite"><pre><span></span><code>  <span class="k">[Writable.StoreAndForward]</span>
    <span class="n">Enabled</span> <span class="o">=</span> <span class="kc">false</span>
    <span class="n">RetryInterval</span> <span class="o">=</span> <span class="s">&#39;5m&#39;</span>
    <span class="n">MaxRetryCount</span> <span class="o">=</span> <span class="mi">10</span>
</code></pre></div>


<blockquote>
<p><em>Note: RetryInterval should be at least 1 second (eg. '1s') or greater. If a value less than 1 second is specified, 1 second will be used.</em></p>
<p><em>Note: Endless retries will occur when MaxRetryCount is set to 0.</em></p>
<p><em>Note: If MaxRetryCount is set to less than 0, a default of 1 retry will be used.</em></p>
</blockquote>
<p>Database describes which database type to use, <code>mongodb</code> or <code>redisdb</code>, and the information required to connect to the database. This section is required if Store and Forward is enabled, otherwise it is currently optional.</p>
<div class="codehilite"><pre><span></span><code><span class="k">[Database]</span>
<span class="n">Type</span> <span class="o">=</span> <span class="s">&quot;mongodb&quot;</span>
<span class="n">Host</span> <span class="o">=</span> <span class="s">&quot;localhost&quot;</span>
<span class="n">Port</span> <span class="o">=</span> <span class="mi">27017</span>
<span class="n">Timeout</span> <span class="o">=</span> <span class="s">&#39;5s&#39;</span>
<span class="n">Username</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
<span class="n">Password</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
</code></pre></div>


<h4 id="how-it-works">How it works</h4>
<p>When an export function encounters an error sending data it can call <code>SetRetryData(payload []byte)</code> on the Context. This will store the data for later retry. If the application service is stop and then restarted while stored data hasn't been successfully exported, the export retry will resume once the service is up and running again.</p>
<blockquote>
<p><em>Note: It is important that export functions return an error and stop pipeline execution</em> after the call to <code>SetRetryData</code>. See <a href="https://github.com/edgexfoundry/app-functions-sdk-go/blob/master/pkg/transforms/http.go">HTTPPost</a> function in SDK as an example</p>
</blockquote>
<p>When the <code>RetryInterval</code> expires, the function pipeline will be re-executed starting with the export function that saved the data. The saved data will be passed to the export function which can then attempt to resend the data. </p>
<blockquote>
<p><em>NOTE: The export function will receive the data as it was stored, so it is important that any transformation of the data occur in functions prior to the export function. The export function should only export the data that it receives.</em></p>
</blockquote>
<p>One of three out comes can occur after the export retried has completed. </p>
<ol>
<li>Export retry was successful</li>
</ol>
<p>In this case the stored data is removed from the database and the execution of the pipeline functions after the export function, if any, continues. </p>
<ol>
<li>Export retry fails and retry count <code>has not been</code> exceeded</li>
</ol>
<p>In this case the store data is updated in the database with the incremented retry count</p>
<ol>
<li>Export retry fails and retry count <code>has been</code> exceeded</li>
</ol>
<p>In this case the store data is removed from the database and never retried again.</p>
<blockquote>
<p><em>NOTE: Changing Writable.Pipeline.ExecutionOrder will invalidate all currently stored data and result in it all being removed from the database on the next retry.</em> This is because the position of the export function can no longer be guaranteed and no way to ensure it is properly executed on the retry.</p>
</blockquote>
<h3 id="secrets">Secrets</h3>
<h4 id="configuration_2">Configuration</h4>
<p>All instances of App Services share the same database and database credentials. However, there are secrets for each App Service that are exclusive to the instance running. As a result, two separate configuration for secret store clients are used to manage shared and exclusive application service secrets.</p>
<p>The GetSecrets() and StoreSecrets() calls  use the exclusive secret store client to manage application secrets.</p>
<p>An example of configuration settings for each secret store client is below:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Shared Secret Store</span>
<span class="k">[SecretStore]</span>
    <span class="n">Host</span> <span class="o">=</span> <span class="s">&#39;localhost&#39;</span>
    <span class="n">Port</span> <span class="o">=</span> <span class="mi">8200</span>
    <span class="n">Path</span> <span class="o">=</span> <span class="s">&#39;/v1/secret/edgex/appservice/&#39;</span>
    <span class="n">Protocol</span> <span class="o">=</span> <span class="s">&#39;https&#39;</span>
    <span class="n">RootCaCertPath</span> <span class="o">=</span> <span class="s">&#39;/tmp/edgex/secrets/ca/ca.pem&#39;</span>
    <span class="n">ServerName</span> <span class="o">=</span> <span class="s">&#39;edgex-vault&#39;</span>
    <span class="n">TokenFile</span> <span class="o">=</span> <span class="s">&#39;/tmp/edgex/secrets/edgex-appservice/secrets-token.json&#39;</span>
    <span class="c1"># Number of attempts to retry retrieving secrets before failing to start the service.</span>
    <span class="n">AdditionalRetryAttempts</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="c1"># Amount of time to wait before attempting another retry</span>
    <span class="n">RetryWaitPeriod</span> <span class="o">=</span> <span class="s">&quot;1s&quot;</span>

    <span class="k">[SecretStore.Authentication]</span>
        <span class="n">AuthType</span> <span class="o">=</span> <span class="s">&#39;X-Vault-Token&#39;</span>  

<span class="c1"># Exclusive Secret Store</span>
<span class="k">[SecretStoreExclusive]</span>
    <span class="n">Host</span> <span class="o">=</span> <span class="s">&#39;localhost&#39;</span>
    <span class="n">Port</span> <span class="o">=</span> <span class="mi">8200</span>
    <span class="n">Path</span> <span class="o">=</span> <span class="s">&#39;/v1/secret/edgex/&lt;app service key&gt;/&#39;</span>
    <span class="n">Protocol</span> <span class="o">=</span> <span class="s">&#39;https&#39;</span>
    <span class="n">ServerName</span> <span class="o">=</span> <span class="s">&#39;edgex-vault&#39;</span>
    <span class="n">TokenFile</span> <span class="o">=</span> <span class="s">&#39;/tmp/edgex/secrets/&lt;app service key&gt;/secrets-token.json&#39;</span>
    <span class="c1"># Number of attempts to retry retrieving secrets before failing to start the service.</span>
    <span class="n">AdditionalRetryAttempts</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="c1"># Amount of time to wait before attempting another retry</span>
    <span class="n">RetryWaitPeriod</span> <span class="o">=</span> <span class="s">&quot;1s&quot;</span>

    <span class="k">[SecretStoreExclusive.Authentication]</span>
        <span class="n">AuthType</span> <span class="o">=</span> <span class="s">&#39;X-Vault-Token&#39;</span>
</code></pre></div>


<h4 id="storing-secrets">Storing Secrets</h4>
<h5 id="secure-mode">Secure Mode</h5>
<p>When running an application service in secure mode, secrets can be stored in the secret store (Vault) by making an HTTP <code>POST</code> call to the secrets API route in the application service, <code>http://[host]:[port]/api/v1/secrets</code>. The secrets are stored and retrieved from the secret store based on values in the <em>SecretStoreExclusive</em> section of the configuration file. Once a secret is stored, only the service that added the secret will be able to retrieve it.  For secret retrieval see <a href="#getting-secrets">Getting Secrets</a>.</p>
<p>An example of the message body JSON is below.  </p>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
  <span class="nt">&quot;path&quot;</span> <span class="p">:</span> <span class="s2">&quot;/MyPath&quot;</span><span class="p">,</span>
  <span class="nt">&quot;secrets&quot;</span> <span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;key&quot;</span> <span class="p">:</span> <span class="s2">&quot;MySecretKey&quot;</span><span class="p">,</span>
      <span class="nt">&quot;value&quot;</span> <span class="p">:</span> <span class="s2">&quot;MySecretValue&quot;</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div>


<p><code>NOTE: path specifies the type or location of the secrets to store. It is appended to the base path from the SecretStoreExclusive configuration. An empty path is a valid configuration for a secret's location.</code></p>
<h5 id="insecure-mode">Insecure Mode</h5>
<p>When running in insecure mode, the secrets are stored and retrieved from the <em>Writable.InsecureSecrets</em> section of the service's configuration toml file. Insecure secrets and their paths can be configured as below.</p>
<div class="codehilite"><pre><span></span><code>   <span class="p">[</span><span class="n">Writable</span><span class="p">.</span><span class="n">InsecureSecrets</span><span class="p">]</span>    
      <span class="k">[Writable.InsecureSecrets.AWS]</span>
        <span class="n">Path</span> <span class="o">=</span> <span class="s">&#39;aws&#39;</span>
        <span class="k">[Writable.InsecureSecrets.AWS.Secrets]</span>
          <span class="n">username</span> <span class="o">=</span> <span class="s">&#39;aws-user&#39;</span>
          <span class="n">password</span> <span class="o">=</span> <span class="s">&#39;aws-pw&#39;</span>

      <span class="k">[Writable.InsecureSecrets.MongoDB]</span>
        <span class="n">Path</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
        <span class="k">[Writable.InsecureSecrets.MongoDB.Secrets]</span>
          <span class="n">username</span> <span class="o">=</span> <span class="s">&#39;mongo-user&#39;</span>
          <span class="n">password</span> <span class="o">=</span> <span class="s">&#39;mongo-pw&#39;</span>
</code></pre></div>


<p><code>NOTE: An empty path is a valid configuration for a secret's location</code></p>
<h4 id="getting-secrets">Getting Secrets</h4>
<p>Application Services can retrieve their secrets from the underlying secret store using the <a href="#.GetSecrets()">GetSecrets()</a> API in the SDK. </p>
<p>If in secure mode, the secrets are retrieved from the secret store based on the <em>SecretStoreExclusive</em> configuration values. </p>
<p>If running in insecure mode, the secrets are retrieved from the <em>Writable.InsecureSecrets</em> configuration.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../AppServiceConfigurable/" title="App Service Configurable" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                App Service Configurable
              </div>
            </div>
          </a>
        
        
          <a href="../../configuration/Ch-Configuration/" title="Configuration and Registry" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Configuration and Registry
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z" /></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2020 EdgeX Foundry
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
  <div class="md-footer-social">
    
      
      
      <a href="https://github.com/edgexfoundry" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
      </a>
    
      
      
      <a href="https://twitter.com/edgexfoundry" target="_blank" rel="noopener" title="twitter.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
      </a>
    
      
      
      <a href="https://www.linkedin.com/company/edgexfoundry" target="_blank" rel="noopener" title="www.linkedin.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/vendor.36cbf620.min.js"></script>
      <script src="../../../assets/javascripts/bundle.00c583dd.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../../..",
          features: ["tabs"],
          search: Object.assign({
            worker: "../../../assets/javascripts/worker/search.7f7c8775.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="../../../assets/javascripts/version-select.js"></script>
      
    
  </body>
</html>